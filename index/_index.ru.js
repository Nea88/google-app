jQuery.cookie=function(e,t,n){if("undefined"==typeof t){var i=null;if(document.cookie&&""!=document.cookie)for(var o=document.cookie.split(";"),r=0;r<o.length;r++){var a=jQuery.trim(o[r]);if(a.substring(0,e.length+1)==e+"="){i=decodeURIComponent(a.substring(e.length+1));break}}return i}n=n||{},null===t&&(t="",n.expires=-1);var s="";if(n.expires&&("number"==typeof n.expires||n.expires.toUTCString)){var l;"number"==typeof n.expires?(l=new Date,l.setTime(l.getTime()+1e3*60*60*24*n.expires)):l=n.expires,s="; expires="+l.toUTCString()}var c=n.path?"; path="+n.path:"",u=n.domain?"; domain="+n.domain:"",d=n.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(t),s,c,u,d].join("")},function(e){function t(t,i,o){var a=!1;if(r){var s=[];e.each(l,function(){o.hasOwnProperty(this)&&(a=!0)&&s.push({name:this,val:o[this]})}),a&&(e.each(o,function(e){s.push({name:e,val:this})}),o=s)}e.each(o,function(o,r){if(a&&(o=r.name,r=r.val),e.isFunction(r)&&(!n||r.toString().indexOf(".__base")>-1)){var s=t[o]||function(){};i[o]=function(){var e=this.__base;this.__base=s;var t=r.apply(this,arguments);return this.__base=e,t}}else i[o]=r})}var n=function(){}.toString().indexOf("_")>-1,i=function(){},o=Object.create||function(e){var t=function(){};return t.prototype=e,new t},r=!0,a={toString:""};for(var s in a)a.hasOwnProperty(s)&&(r=!1);var l=r?["toString","valueOf"]:null;e.inherit=function(){var n=arguments,r=e.isFunction(n[0]),a=r?n[0]:i,s=n[r?1:0]||{},l=n[r?2:1],c=s.__constructor||r&&a.prototype.__constructor?function(){return this.__constructor.apply(this,arguments)}:function(){};if(!r)return c.prototype=s,c.prototype.__self=c.prototype.constructor=c,e.extend(c,l);e.extend(c,a);var u=a.prototype,d=c.prototype=o(u);return d.__self=d.constructor=c,t(u,d,s),l&&t(a,c,l),c},e.inheritSelf=function(e,n,i){var o=e.prototype;return t(o,o,n),i&&t(e,e,i),e}}(jQuery),function(e){var t=0,n="__"+ +new Date,i=function(){return"uniq"+ ++t};e.identify=function(e,t){if(!e)return i();var o="uniqueID"in e?"uniqueID":n;return t||o in e?e[o]:e[o]=i()}}(jQuery),function(e){e.isEmptyObject||(e.isEmptyObject=function(e){for(var t in e)return!1;return!0})}(jQuery),function(e){e.extend({debounce:function(e,t,n,i){3==arguments.length&&"boolean"!=typeof n&&(i=n,n=!1);var o;return function(){var r=arguments;i=i||this,n&&!o&&e.apply(i,r),clearTimeout(o),o=setTimeout(function(){n||e.apply(i,r),o=null},t)}},throttle:function(e,t,n){var i,o,r;return function(){o=arguments,r=!0,n=n||this,i||function(){r?(e.apply(n,o),r=!1,i=setTimeout(arguments.callee,t)):i=null}()}}})}(jQuery),function(e){var t="__"+ +new Date+"storage",n=function(t,n){return e.identify(t)+(n?e.identify(n):"")},i={buildEventName:function(e){return e},on:function(i,o,r,a,s){if("string"==typeof i){e.isFunction(o)&&(a=r,r=o,o=void 0);for(var l,c=n(r,a),u=this[t]||(this[t]={}),d=i.split(" "),h=0;i=d[h++];)if(i=this.buildEventName(i),l=u[i]||(u[i]={ids:{},list:{}}),!(c in l.ids)){var p=l.list,f={fn:r,data:o,ctx:a,special:s};p.last?(p.last.next=f,f.prev=p.last):p.first=f,l.ids[c]=p.last=f}}else{var m=this;e.each(i,function(e,t){m.on(e,t,o,s)})}return this},onFirst:function(e,t,n,i){return this.on(e,t,n,i,{one:!0})},un:function(i,o,r){if("string"==typeof i||"undefined"==typeof i){var a=this[t];if(a)if(i){for(var s,l=i.split(" "),c=0;i=l[c++];)if(i=this.buildEventName(i),s=a[i])if(o){var u=n(o,r),d=s.ids;if(u in d){var h=s.list,p=d[u],f=p.prev,m=p.next;f?f.next=m:p===h.first&&(h.first=m),m?m.prev=f:p===h.last&&(h.last=f),delete d[u]}}else delete this[t][i]}else delete this[t]}else{var g=this;e.each(i,function(e,t){g.un(e,t,r)})}return this},trigger:function(n,i){var o,r=this,a=r[t];if("string"==typeof n?n=e.Event(r.buildEventName(o=n)):n.type=r.buildEventName(o=n.type),n.target||(n.target=r),a&&(a=a[n.type]))for(var s,l=a.list.first;l;)n.data=l.data,s=l.fn.call(l.ctx||r,n,i),"undefined"!=typeof s&&(n.result=s,s===!1&&(n.preventDefault(),n.stopPropagation())),l.special&&l.special.one&&r.un(o,l.fn,l.ctx),l=l.next;return this}};e.observable=e.inherit(i,i)}(jQuery),function(e,t){function n(e,t,n){return(e?"__elem_"+e:"")+"__mod"+(t?"_"+t:"")+(n?"_"+n:"")}function i(t,i,o){e.isFunction(t)?i[n(o,"*","*")]=t:e.each(t,function(t,r){e.isFunction(r)?i[n(o,t,"*")]=r:e.each(r,function(e,r){i[n(o,t,e)]=r})})}function o(e,t){return t?Array.isArray(t)?function(n){for(var i=0,o=t.length;o>i;)if(n.hasMod(e,t[i++]))return!0;return!1}:function(n){return n.hasMod(e,t)}:function(t){return t.hasMod(e)}}var r=[],a={},s={};this.BEM=e.inherit(e.observable,{__constructor:function(e,t,n){var i=this;i._modCache=e||{},i._processingMods={},i._params=t,i.params=null,n!==!1?i._init():i.afterCurrentEvent(function(){i._init()})},_init:function(){return this._initing||this.hasMod("js","inited")||(this._initing=!0,this.params||(this.params=e.extend(this.getDefaultParams(),this._params),delete this._params),this.setMod("js","inited"),delete this._initing,this.hasMod("js","inited")&&this.trigger("init")),this},changeThis:function(e,t){return e.bind(t||this)},afterCurrentEvent:function(e,t){this.__self.afterCurrentEvent(this.changeThis(e,t))},trigger:function(e,t){return this.__base(e=this.buildEvent(e),t).__self.trigger(e,t),this},buildEvent:function(t){return"string"==typeof t&&(t=e.Event(t)),t.block=this,t},hasMod:function(e,n,i){var o=arguments.length,r=!1;1==o?(i="",n=e,e=t,r=!0):2==o&&("string"==typeof e?(i=n,n=e,e=t):(i="",r=!0));var a=this.getMod(e,n)===i;return r?!a:a},getMod:function(e,t){var n=typeof e;if("string"===n||"undefined"===n){t=e||t;var i=this._modCache;return t in i?i[t]:i[t]=this._extractModVal(t)}return this._getElemMod(t,e)},_getElemMod:function(e,t,n){return this._extractModVal(e,t,n)},getMods:function(e){var n=e&&"string"!=typeof e,i=this,o=[].slice.call(arguments,n?1:0),r=i._extractMods(o,n?e:t);return n||(o.length?o.forEach(function(e){i._modCache[e]=r[e]}):i._modCache=r),r},setMod:function(n,i,o){"undefined"==typeof o&&(o=i,i=n,n=t);var r=this;if(!n||n[0]){var a=(n&&n[0]?e.identify(n[0]):"")+"_"+i;if(this._processingMods[a])return r;var s,l=n?r._getElemMod(i,n,s=r.__self._extractElemNameFrom(n)):r.getMod(i);if(l===o)return r;this._processingMods[a]=!0;var c=!0,u=[i,o,l];n&&u.unshift(n),[["*","*"],[i,"*"],[i,o]].forEach(function(e){c=r._callModFn(s,e[0],e[1],u)!==!1&&c}),!n&&c&&(r._modCache[i]=o),c&&r._afterSetMod(i,o,l,n,s),delete this._processingMods[a]}return r},_afterSetMod:function(){},toggleMod:function(e,n,i,o,r){"string"==typeof e&&(r=o,o=i,i=n,n=e,e=t),"undefined"==typeof o?o="":"boolean"==typeof o&&(r=o,o="");var a=this.getMod(e,n);return(a==i||a==o)&&this.setMod(e,n,"boolean"==typeof r?r?i:o:this.hasMod(e,n,i)?o:i),this},delMod:function(e,n){return n||(n=e,e=t),this.setMod(e,n,"")},_callModFn:function(e,i,o,r){var a=n(e,i,o);return this[a]?this[a].apply(this,r):t},_extractModVal:function(){return""},_extractMods:function(){return{}},channel:function(e,t){return this.__self.channel(e,t)},getDefaultParams:function(){return{}},del:function(e){var t=[].slice.call(arguments);return"string"==typeof e&&t.unshift(this),this.__self.del.apply(this.__self,t),this},destruct:function(){}},{_name:"i-bem",blocks:a,decl:function(n,r,s){if("string"==typeof n?n={block:n}:n.name&&(n.block=n.name),n.baseBlock&&!a[n.baseBlock])throw'baseBlock "'+n.baseBlock+'" for "'+n.block+'" is undefined';r||(r={}),r.onSetMod&&(i(r.onSetMod,r),delete r.onSetMod),r.onElemSetMod&&(e.each(r.onElemSetMod,function(e,t){i(t,r,e)}),delete r.onElemSetMod);var l=a[n.baseBlock||n.block]||this;if(n.modName){var c=o(n.modName,n.modVal);e.each(r,function(n,i){e.isFunction(i)&&(r[n]=function(){var e;if(c(this))e=i;else{var o=l.prototype[n];o&&o!==r[n]&&(e=this.__base)}return e?e.apply(this,arguments):t})})}if(s&&"boolean"==typeof s.live){var u=s.live;s.live=function(){return u}}var d;return n.block==l._name?(d=e.inheritSelf(l,r,s))._processLive(!0):(d=a[n.block]=e.inherit(l,r,s))._name=n.block,d},_processLive:function(){return!1},create:function(e,t){return"string"==typeof e&&(e={block:e}),new a[e.block](e.mods,t)},getName:function(){return this._name},_extractElemNameFrom:function(){},afterCurrentEvent:function(e,t){1==r.push({fn:e,ctx:t})&&setTimeout(this._runAfterCurrentEventFns,0)},_runAfterCurrentEventFns:function(){var e=r.length;if(e)for(var t,n=r.splice(0,e);t=n.shift();)t.fn.call(t.ctx||this)},changeThis:function(e,t){return e.bind(t||this)},del:function(e){var t="string"==typeof e,n=t?0:1,i=arguments.length;for(t&&(e=this);i>n;)delete e[arguments[n++]];return this},channel:function(n,i){return"boolean"==typeof n&&(i=n,n=t),n||(n="default"),i?(s[n]&&(s[n].un(),delete s[n]),void 0):s[n]||(s[n]=new e.observable)}})}(jQuery),function(){Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t})}(),function(){var e=Array.prototype,t=Object.prototype.toString,n={indexOf:function(e,t){t=+(t||0);var n=this,i=n.length;if(i>0&&i>t)for(t=0>t?Math.ceil(t):Math.floor(t),-i>t&&(t=0),0>t&&(t+=i);i>t;){if(t in n&&n[t]===e)return t;++t}return-1},forEach:function(e,t){for(var n=-1,i=this,o=i.length;++n<o;)n in i&&(t?e.call(t,i[n],n,i):e(i[n],n,i))},map:function(e,t){for(var n=-1,i=this,o=i.length,r=new Array(o);++n<o;)n in i&&(r[n]=t?e.call(t,i[n],n,i):e(i[n],n,i));return r},filter:function(e,t){for(var n=-1,i=this,o=i.length,r=[];++n<o;)n in i&&(t?e.call(t,i[n],n,i):e(i[n],n,i))&&r.push(i[n]);return r},reduce:function(e,t){var n,i=-1,o=this,r=o.length;if(arguments.length<2){for(;++i<r;)if(i in o){n=o[i];break}}else n=t;for(;++i<r;)i in o&&(n=e(n,o[i],i,o));return n},some:function(e,t){for(var n=-1,i=this,o=i.length;++n<o;)if(n in i&&(t?e.call(t,i[n],n,i):e(i[n],n,i)))return!0;return!1},every:function(e,t){for(var n=-1,i=this,o=i.length;++n<o;)if(n in i&&!(t?e.call(t,i[n],n,i):e(i[n],n,i)))return!1;return!0}};for(var i in n)e[i]||(e[i]=n[i]);Array.isArray||(Array.isArray=function(e){return"[object Array]"===t.call(e)})}(),function(){var e=Array.prototype.slice;Function.prototype.bind||(Function.prototype.bind=function(t){var n=this,i=e.call(arguments,1);return function(){return n.apply(t,i.concat(e.call(arguments)))}})}(),function(e,t,n){function i(e,t,n){n.push(a,e,a,t)}function o(e,t,n,o){o.push(e),n&&i(t,n,o)}function r(e,t,r,a,l){o(e,n,n,l),l.push(s,t),a&&i(r,a,l)}var a="_",s="__",l="[a-zA-Z0-9-]+";e.INTERNAL={NAME_PATTERN:l,MOD_DELIM:a,ELEM_DELIM:s,buildModPostfix:function(e,t,n){var o=n||[];return i(e,t,o),n?o:o.join("")},buildClass:function(e,t,i,a,s){var l=typeof i;if("string"==l?"string"!=typeof a&&"number"!=typeof a&&(s=a,a=i,i=t,t=n):"undefined"!=l?(s=i,i=n):t&&"string"!=typeof t&&(s=t,t=n),!(t||i||s))return e;var c=s||[];return t?r(e,t,i,a,c):o(e,i,a,c),s?c:c.join("")},buildClasses:function(e,i,a,s){i&&"string"!=typeof i&&(s=a,a=i,i=n);var l=s||[];return i?r(e,i,n,n,l):o(e,n,n,l),a&&t.each(a,function(t,n){n&&(l.push(" "),i?r(e,i,t,n,l):o(e,t,n,l))}),s?l:l.join("")}}}(BEM,jQuery),function(e,t,n){function i(e,t,n){(e[t]||(e[t]=[])).unshift(n)}function o(e,t){return t.modName?function(n){(n._curBlock.mods||{})[t.modName]===t.modVal&&e(n)}:e}function r(e,n){var i,o=t.isArray(n);return t.isArray(e)?o?i=e.concat(n):(i=e).push(n):o?(i=n).unshift(e):i=[e,n],i}function a(e){return e.replace(f,function(e){return p[e]})}var s=e.INTERNAL,l=s.ELEM_DELIM,c={area:1,base:1,br:1,col:1,command:1,embed:1,hr:1,img:1,input:1,keygen:1,link:1,meta:1,param:1,source:1,wbr:1},u=s.buildClass,d=s.buildClasses,h={},p={"'":"\\'",'"':"'","&":"&amp;","<":"&lt;",">":"&gt;"},f=/['"&<>]/g;e.HTML={decl:function(e,n){"string"==typeof e&&(e={block:e}),e.name&&(e.block=e.name);var r=h[e.block]||(h[e.block]={});n.onBlock&&i(r,"_block",o(n.onBlock,e)),n.onElem&&(t.isFunction(n.onElem)?i(r,"_elem",o(n.onElem,e)):t.each(n.onElem,function(t,n){i(r,"_elem"+("*"===t?"":l+t),o(n,e))}))},build:function(e){var t=new this.Ctx(e);return t._buildAll(),t._flush()},Ctx:t.inherit({__constructor:function(e){this._buffer=[],this._params=e,this._tParams=null,this._tParamsChanges=null,this._curBlock=n},pos:function(){return this._params._pos},isFirst:function(){return 1===this._params._pos},isLast:function(){var e=this._params;return e._pos===e._siblingsCount},params:function(e){var t=this;return"undefined"==typeof e?t._params:(t._params=e,t)},param:function(e,n,i,o){var r=this,a=r._params;return"undefined"==typeof n?a[e]:(!i&&e in a?o&&(a[e]=t.extend(n,a[e])):a[e]=n,r)},attrs:function(e,t){return this.param("attrs",e,t,!0)},attr:function(e,t,n){var i=this;if("undefined"==typeof t)return(i._params.attrs||{})[e];var o=i._params.attrs;return o?(n||!(e in o))&&(o[e]=t):(i._params.attrs={})[e]=t,i},tag:function(e,t){return this.param("tag",e,t)},cls:function(e,t){return this.param("cls",e,t)},mods:function(e,t){return this.param("mods",e,t,!0)},mod:function(e,t,n){var i=this;if("undefined"==typeof t)return(i._params.mods||{})[e];var o=i._params.mods;return o?(n||!(e in o))&&(o[e]=t):(i._params.mods={})[e]=t,i},mix:function(e,t){var n=this,i=n._params;return"undefined"==typeof e?i.mix:(i.mix=!t&&"mix"in i?i.mix.concat(e):e,n)},js:function(e){return this.param("js",e)},content:function(e,t){return this.param("content",e,t)},wrapContent:function(e){var t=this,n=t._params;return e.content=n.content,n.content=e,t},beforeContent:function(e){var t=this,n=t._params;return n.content=r(e,n.content),t},afterContent:function(e){var t=this,n=t._params;return n.content=r(n.content,e),t},wrap:function(e){var t=this,n=t._params;return e.block||(e._curBlock=t._curBlock),e.content=n._wrapper?n._wrapper:n,n._wrapper=e,t},tParam:function(e,t){var n=this,i=n._tParams||(n._tParams={});if("undefined"==typeof t)return i[e];var o=n._tParamsChanges||(n._tParamsChanges={});return e in o||(o[e]=i[e]),i[e]=t,n},generateId:function(){return t.identify()},stop:function(){this._params._isStopped=!0},_buildAll:function(){var e=this,n=e._buffer,i=e._params,o=typeof i;if("string"==o||"number"==o)n.push(i);else if(t.isArray(i))for(var r,a,s=0,l=i.length;l>s;)e._params=r=i[s++],a=typeof r,"string"==a||"number"==a?n.push(r):r&&(r._pos=s,r._siblingsCount=l,e._buildByDecl());else i&&(e._params._pos=e._params._siblingsCount=1,e._buildByDecl())},_build:function(){var e,n=this,i=n._buffer,o=n._params,r=o.tag||"div",s=o.block||o.elem,l=s&&(o.block||n._curBlock.block),h=!1;o.js&&((e={})[u(l,o.elem)]=o.js===!0?{}:o.js,h=!o.elem),i.push("<",r),(s||o.cls)&&(i.push(' class="'),s&&(d(l,o.elem,o.mods,i),o.mix&&t.each(o.mix,function(t,n){n&&(i.push(" "),d(n.block,n.elem,n.mods,i),n.js&&((e||(e={}))[u(n.block,n.elem)]=n.js===!0?{}:n.js,h||(h=!n.elem)))})),o.cls&&i.push(s?" ":"",o.cls),h&&i.push(" i-bem"),i.push('"')),e&&i.push(' onclick="return ',a(JSON.stringify(e)),'"'),o.attrs&&t.each(o.attrs,function(e,t){"undefined"!=typeof t&&null!==t&&t!==!1&&i.push(" ",e,'="',t.toString().replace(/"/g,"&quot;"),'"')}),c[r]?i.push("/>"):(i.push(">"),"undefined"!=typeof o.content&&(n._params=o.content,n._buildAll()),i.push("</",r,">"))},_flush:function(){var e=this._buffer.join("");return delete this._buffer,e},_buildByDecl:function(){var e=this,n=e._curBlock,i=e._params;if(i._curBlock&&(e._curBlock=i._curBlock),i.block&&(e._curBlock=i),!i._wrapper){if(i.block||i.elem){var o=h[e._curBlock.block];if(o){var r;if(i.elem?(r=o["_elem"+l+i.elem],o._elem&&(r=r?r.concat(o._elem):o._elem)):r=o._block,r)for(var a,s=0;(a=r[s++])&&(a(e),!i._isStopped););}}if(i._wrapper)return i._curBlock=e._curBlock,e._params=i._wrapper,e._buildAll()}var c=e._tParamsChanges;if(e._tParamsChanges=null,e._build(),e._curBlock=n,c){var u=e._tParams;t.each(c,function(e,t){"undefined"==typeof t?delete u[e]:u[e]=t})}}})}}(BEM,jQuery),function(e){if(!window.JSON){var t,n=Object.prototype.toString,i=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};window.JSON={stringify:t=function(r){if(null===r)return"null";if("undefined"==typeof r)return e;switch(n.call(r)){case"[object String]":return i.lastIndex=0,'"'+(i.test(r)?r.replace(i,function(e){var t=o[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}):r)+'"';case"[object Number]":case"[object Boolean]":return""+r;case"[object Array]":for(var a,s="[",l=0,c=r.length;c>l;)a=t(r[l]),s+=(l++?",":"")+("undefined"==typeof a?"null":a);return s+"]";case"[object Object]":if("[object Function]"===n.call(r.toJSON))return t(r.toJSON());var a,s="{",l=0;for(var u in r)r.hasOwnProperty(u)&&(a=t(r[u]),"undefined"!=typeof a&&(s+=(l++?",":"")+'"'+u+'":'+a));return s+"}";default:return e}}}}}(),function(e,t,n){function i(e,n){var i=e[0];t.each(s(i),function(a,s){r(s,i,a,n);var l=f[s.uniqId];l?l.domElem.index(i)<0&&(l.domElem=l.domElem.add(e),t.extend(l._params,s)):o(a,e,s)})}function o(e,i,o,a,l){"boolean"==typeof o&&(l=a,a=o,o=n);var c=i[0];o=r(o||s(c)[e],c,e);var u=o.uniqId;if(f[u])return f[u]._init();p[u]=p[u]?p[u].add(i):i;var d=c.parentNode;d&&11!==d.nodeType||t.unique(p[u]);var h=v[e]||w.decl(e,{},{live:!0});if(!(h._liveInitable=!!h._processLive())||a||o.live===!1){var m=new h(p[u],o,!!a);return delete p[u],l&&l.apply(m,Array.prototype.slice.call(arguments,4)),m}}function r(e,n,i,o){(e||(e={})).uniqId||(e.uniqId=(e.id?i+"-id-"+e.id:t.identify())+(o||t.identify()));var r=t.identify(n),a=m[r]||(m[r]={});return a[i]||(a[i]=e),e}function a(e,t,n){var i=e.find(t);return n?i:i.add(e.filter(t))}function s(e){var n=t.identify(e);return m[n]||(m[n]=l(e))}function l(e){var n=e.onclick||e.ondblclick;if(!n&&"body"==e.tagName.toLowerCase()){var i=t(e),o=i.attr("onclick")||i.attr("ondblclick");o&&(n=Function(o))}return n?n():{}}function c(e){delete m[t.identify(e)]}function u(e,t){1===e.domElem.length?e.destruct(!0):e.domElem=e.domElem.not(t)}var d=t(window),h=t(document),p={},f={},m={},g={},b={},v=e.blocks,_=e.INTERNAL,y=_.NAME_PATTERN,k=_.MOD_DELIM,M=_.ELEM_DELIM,E=_.buildModPostfix,B=_.buildClass;t.fn.bem=function(e,t){return o(e,this,t,!0)};var w=e.DOM=e.decl("i-bem__dom",{__constructor:function(e,n,i){var o=this;o.domElem=e,o._eventNameCache={},o._elemCache={},f[o._uniqId=n.uniqId||t.identify(o)]=o,o._needSpecialUnbind=!1,o.__base(null,n,i)},findBlocksInside:function(e,t){return this._findBlocks("find",e,t)},findBlockInside:function(e,t){return this._findBlocks("find",e,t,!0)},findBlocksOutside:function(e,t){return this._findBlocks("parents",e,t)},findBlockOutside:function(e,t){return this._findBlocks("closest",e,t)[0]||null},findBlocksOn:function(e,t){return this._findBlocks("",e,t)},findBlockOn:function(e,t){return this._findBlocks("",e,t,!0)},_findBlocks:function(e,i,r,a){r||(r=i,i=n);var s=i?"string"==typeof i?this.findElem(i):i:this.domElem,l="string"==typeof r,c=l?r:r.block||r.blockName,u="."+(l?B(c):B(c,r.modName,r.modVal))+(a?":first":""),d=s.filter(u);if(e&&(d=d.add(s[e](u))),a)return d[0]?o(c,d.eq(0),!0):null;var h=[],p={};return t.each(d,function(e,n){var i=o(c,t(n),!0);p[i._uniqId]||(p[i._uniqId]=!0,h.push(i))}),h},bindToDomElem:function(e,n,i){var o=this;return i?e.bind(o._buildEventName(n),function(e){return(e.data||(e.data={})).domElem=t(this),i.apply(o,arguments)}):t.each(n,function(t,n){o.bindToDomElem(e,t,n)}),o},bindToDoc:function(e,t){return this._needSpecialUnbind=!0,this.bindToDomElem(h,e,t)},bindToWin:function(e,t){var n,i,o=t;return"resize"===e&&(t=function(){var e=d.height(),t=d.width();(n!==e||i!==t)&&(n=e,i=t,o.apply(this,arguments))}),this._needSpecialUnbind=!0,this.bindToDomElem(d,e,t)},bindTo:function(e,n,i){return!n||t.isFunction(n)?(i=n,n=e,e=this.domElem):"string"==typeof e&&(e=this.elem(e)),this.bindToDomElem(e,n,i)},unbindFromDomElem:function(e,t){return e.unbind(this._buildEventName(t)),this},unbindFromDoc:function(e){return this.unbindFromDomElem(h,e)},unbindFromWin:function(e){return this.unbindFromDomElem(d,e)},unbindFrom:function(e,t){return t?"string"==typeof e&&(e=this.elem(e)):(t=e,e=this.domElem),this.unbindFromDomElem(e,t)},_buildEventName:function(e){var t=this;return e.indexOf(" ")>1?e.split(" ").map(function(e){return t._buildOneEventName(e)}).join(" "):t._buildOneEventName(e)},_buildOneEventName:function(e){var t=this,n=t._eventNameCache;if(e in n)return n[e];var i="."+t._uniqId;if(e.indexOf(".")<0)return n[e]=e+i;var o=".bem_"+t.__self._name;return n[e]=e.split(".").map(function(e,t){return 0==t?e+o:o+"_"+e}).join("")+i},trigger:function(e,t){return this.__base(e=this.buildEvent(e),t).domElem&&this._ctxTrigger(e,t),this},_ctxTrigger:function(e,n){var i=this,o=g[i.__self._buildCtxEventName(e.type)],r={};o&&i.domElem.each(function(){for(var a=this,s=o.counter;a&&s;){var l=t.identify(a,!0);if(l){if(r[l])break;var c=o.ctxs[l];c&&(t.each(c,function(t,o){o.fn.call(o.ctx||i,e,n)}),s--),r[l]=!0}a=a.parentNode}})},setMod:function(e,n,i){if(e&&"undefined"!=typeof i&&e.length>1){var o=this;return e.each(function(){var r=t(this);r.__bemElemName=e.__bemElemName,o.setMod(r,n,i)}),o}return this.__base(e,n,i)},_extractModVal:function(e,t,n){var i,o=(t||this.domElem)[0];return o&&(i=o.className.match(this.__self._buildModValRE(e,n||t))),i?i[2]:""},_extractMods:function(e,t){var n={},i=!e.length,o=0;return((t||this.domElem)[0].className.match(this.__self._buildModValRE("("+(i?y:e.join("|"))+")",t,"g"))||[]).forEach(function(e){var t=(e=e.trim()).lastIndexOf(k),i=e.substr(0,t-1).lastIndexOf(k);n[e.substr(i+1,t-i-1)]=e.substr(t+1),++o}),o<e.length&&e.forEach(function(e){e in n||(n[e]="")}),n},_afterSetMod:function(e,n,i,o,r){var a=this.__self,s=a._buildModClassPrefix(e,r),l=a._buildModValRE(e,r),c=""===n;(o||this.domElem).each(function(){var e=this.className;e.indexOf(s)>-1?this.className=e.replace(l,c?"":"$1"+s+n):c||t(this).addClass(s+n)}),r&&this.dropElemCache(r,e,i).dropElemCache(r,e,n)},findElem:function(e,t,n,i){arguments.length%2?(i=n,n=t,t=e,e=this.domElem):"string"==typeof e&&(e=this.findElem(e));var o=this.__self,r="."+t.split(" ").map(function(e){return B(o._name,e,n,i)}).join(",.");return a(e,r)},_elem:function(e,t,n){var i,o=e+E(t,n);return(i=this._elemCache[o])||(i=this._elemCache[o]=this.findElem(e,t,n),i.__bemElemName=e),i},elem:function(e,n,i){if(n&&"string"!=typeof n)return n.__bemElemName=e,n;if(e.indexOf(" ")<0)return this._elem(e,n,i);var o=t([]),r=this;return e.split(" ").forEach(function(e){o=o.add(r._elem(e,n,i))}),o},dropElemCache:function(e,t,n){if(e){var i=this,o=E(t,n);e.indexOf(" ")<0?delete i._elemCache[e+o]:e.split(" ").forEach(function(e){delete i._elemCache[e+o]})}else this._elemCache={};return this},elemParams:function(e){var t;return"string"==typeof e?(t=e,e=this.elem(e)):t=this.__self._extractElemNameFrom(e),l(e[0])[B(this.__self.getName(),t)]||{}},elemify:function(e,n){return(e=t(e)).__bemElemName=n,e},containsDomElem:function(e){var t=!1;return this.domElem.each(function(){return!(t=e.parents().andSelf().index(this)>-1)}),t},buildSelector:function(e,t,n){return this.__self.buildSelector(e,t,n)},destruct:function(e){var n=this,i=n.__self;n._isDestructing=!0,n._needSpecialUnbind&&i.doc.add(i.win).unbind("."+n._uniqId),n.dropElemCache().domElem.each(function(e,n){var i=s(n);t.each(i,function(e,t){var i=f[t.uniqId];i?i._isDestructing||u(i,n):delete p[t.uniqId]}),c(n)}),e||n.domElem.remove(),delete f[n.un()._uniqId],delete n.domElem,delete n._elemCache,n.__base()}},{scope:null,doc:h,win:d,_processLive:function(e){var t=this,n=t._liveInitable;if("live"in t){var i="undefined"==typeof n;i^e&&(n=t.live()!==!1,t.live=function(){})}return n},init:function(e,n,o){(!e||t.isFunction(e))&&(o=n,n=e,e=h);var r=t.identify();return a(e,".i-bem").each(function(){i(t(this),r)}),n&&this.afterCurrentEvent(function(){n.call(o||this,e)}),this._runAfterCurrentEventFns(),e},destruct:function(e,i,o){"boolean"!=typeof e&&(o=i,i=e,e=n),a(i,".i-bem",o).each(function(e,n){var i=s(this);t.each(i,function(e,t){if(t.uniqId){var i=f[t.uniqId];i?u(i,n):delete p[t.uniqId]}}),c(this)}),e||(o?i.empty():i.remove())},update:function(e,t,n,i){this.destruct(e,!0),this.init(e.html(t),n,i)},replace:function(e,n){this.destruct(!0,e),this.init(t(n).replaceAll(e))},append:function(e,n){this.init(t(n).appendTo(e))},prepend:function(e,n){this.init(t(n).prependTo(e))},before:function(e,n){this.init(t(n).insertBefore(e))},after:function(e,n){this.init(t(n).insertAfter(e))},_buildCtxEventName:function(e){return this._name+":"+e},_liveClassBind:function(e,n,i,o){var r=this;if(n.indexOf(" ")>-1)n.split(" ").forEach(function(t){r._liveClassBind(e,t,i,o)});else{var a=b[n],s=t.identify(i);a||(a=b[n]={},h.bind(n,r.changeThis(r._liveClassTrigger,r))),a=a[e]||(a[e]={uniqIds:{},fns:[]}),s in a.uniqIds||(a.fns.push({uniqId:s,fn:r._buildLiveEventFn(i,o)}),a.uniqIds[s]=a.fns.length-1)}return this},_liveClassUnbind:function(e,n,i){var o=b[n];if(o)if(i){if(o=o[e]){var r=t.identify(i);if(r in o.uniqIds){var a=o.uniqIds[r],s=o.fns.length-1;for(o.fns.splice(a,1);s>a;)o.uniqIds[o.fns[a++].uniqId]=a-1;delete o.uniqIds[r]}}}else delete o[e];return this},_liveClassTrigger:function(e){var n=b[e.type];if(n){var i=e.target,o=[];for(var r in n)n.hasOwnProperty(r)&&o.push(r);do for(var a=" "+i.className+" ",s=0;r=o[s++];)if(a.indexOf(" "+r+" ")>-1){for(var l,c=0,u=n[r].fns,d=!1;l=u[c++];)l.fn.call(t(i),e)===!1&&(d=!0);if(d&&e.preventDefault(),d||e.isPropagationStopped())return;o.splice(--s,1)}while(o.length&&(i=i.parentNode))}},_buildLiveEventFn:function(e,n){var i=this;return function(r){var a=[i._name,((r.data||(r.data={})).domElem=t(this)).closest(i.buildSelector()),!0],s=o.apply(null,n?a.concat([e,r]):a);return s&&!n&&e?e.apply(s,arguments):void 0}},liveInitOnEvent:function(e,t,n){return this.liveBindTo(e,t,n,!0)},liveBindTo:function(e,i,o,r){(!i||t.isFunction(i))&&(o=i,i=e,e=n),e&&"string"!=typeof e||(e={elem:e}),e.elemName&&(e.elem=e.elemName);var a=this;return e.elem&&e.elem.indexOf(" ")>0?(e.elem.split(" ").forEach(function(t){a._liveClassBind(B(a._name,t,e.modName,e.modVal),i,o,r)}),a):a._liveClassBind(B(a._name,e.elem,e.modName,e.modVal),i,o,r)},liveUnbindFrom:function(e,t,n){var i=this;return e.indexOf(" ")>1?(e.split(" ").forEach(function(e){i._liveClassUnbind(B(i._name,e),t,n)}),i):i._liveClassUnbind(B(i._name,e),t,n)},_liveInitOnBlockEvent:function(e,t,n,i){var o=this._name;return v[t].on(e,function(e){if(e.block.domElem){var t=arguments,r=e.block[i](o);n&&r.forEach(function(e){n.apply(e,t)})}}),this},liveInitOnBlockEvent:function(e,t,n){return this._liveInitOnBlockEvent(e,t,n,"findBlocksOn")},liveInitOnBlockInsideEvent:function(e,t,n){return this._liveInitOnBlockEvent(e,t,n,"findBlocksOutside")},liveInitOnBlockInit:function(e,t){return this.liveInitOnBlockEvent("init",e,t)},liveInitOnBlockInsideInit:function(e,t){return this.liveInitOnBlockInsideEvent("init",e,t)},on:function(e,t,n,i,o){return e.jquery?this._liveCtxBind(e,t,n,i,o):this.__base(e,t,n,i)},un:function(e,t,n,i){return e.jquery?this._liveCtxUnbind(e,t,n,i):this.__base(e,t,n)},liveCtxBind:function(e,t,n,i,o){return this._liveCtxBind(e,t,n,i,o)},_liveCtxBind:function(e,i,o,r,a){var s=this;if("string"==typeof i)if(t.isFunction(o)&&(a=r,r=o,o=n),i.indexOf(" ")>-1)i.split(" ").forEach(function(t){s._liveCtxBind(e,t,o,r,a)});else{var l=s._buildCtxEventName(i),c=g[l]||(g[l]={counter:0,ctxs:{}});e.each(function(){var e=t.identify(this),n=c.ctxs[e];n||(n=c.ctxs[e]={},++c.counter),n[t.identify(r)+(a?t.identify(a):"")]={fn:r,data:o,ctx:a}})}else t.each(i,function(t,n){s._liveCtxBind(e,t,n,o)});return s},liveCtxUnbind:function(e,t,n,i){return this._liveCtxUnbind(e,t,n,i)},_liveCtxUnbind:function(e,n,i,o){var r=this,a=g[n=r._buildCtxEventName(n)];return a&&(e.each(function(){var e,n=t.identify(this,!0);n&&(e=a.ctxs[n])&&(i&&delete e[t.identify(i)+(o?t.identify(o):"")],(!i||t.isEmptyObject(e))&&(a.counter--,delete a.ctxs[n]))}),a.counter||delete g[n]),r},_extractElemNameFrom:function(e){if(e.__bemElemName)return e.__bemElemName;var t=e[0].className.match(this._buildElemNameRE());return t?t[1]:n},extractParams:l,_buildModClassPrefix:function(e,t){return B(this._name)+(t?M+("string"==typeof t?t:this._extractElemNameFrom(t)):"")+k+e+k},_buildModValRE:function(e,t,n){return new RegExp("(\\s|^)"+this._buildModClassPrefix(e,t)+"("+y+")(?=\\s|$)",n)},_buildElemNameRE:function(){return new RegExp(this._name+M+"("+y+")(?:\\s|$)")},buildSelector:function(e,t,n){return"."+B(this._name,e,t,n)},getBlockByUniqId:function(e){return f[e]},getWindowSize:function(){return{width:d.width(),height:d.height()}}});t(function(){e.DOM.scope=t("body")})}(BEM,jQuery),function(){String.prototype.trim||(String.prototype.trim=function(){for(var e=this.replace(/^\s\s*/,""),t=/\s/,n=e.length;t.test(e.charAt(--n)););return e.slice(0,n+1)})}(),BEM.DOM.decl("i-global",{onSetMod:{js:function(){this.del(this.__self._params=$.extend({},this.params),"uniqId","name"),this.__self._params}},getDefaultParams:function(){return{"appcurl-host":"www.appcurl.com","api-airomo-host":"api.airomo.com","airomo-host":"www.airomo.com","appsociety-host":"apps.airomo.com","api-host":"api.airomo.com","app-api-host":"appapi.airomo.com","airomo-static-host":"static.airomo.com","page-url":"/","facebook-app-permissions":["email","user_status","read_friendlists","publish_actions","user_birthday","user_about_me"]}}},{param:function(e){return(this._params||{})[e]}}),$(function(){BEM.DOM.init()}),BEM.DOM.decl("b-page",{onSetMod:{js:function(){this.__base.apply(this,arguments),BEM.blocks["b-form-input"].on(this.findBlockInside("appcurl-search").domElem,"update-items",this._scrollToBottom)},mode:{serp:function(){BEM.blocks["b-form-input"].un(this.findBlockInside("appcurl-search").domElem,"update-items",this._scrollToBottom)},"":function(){BEM.blocks["b-form-input"].on(this.findBlockInside("appcurl-search").domElem,"update-items",this._scrollToBottom)}}},_scrollToBottom:function(){$("html, body").animate({scrollTop:$(".popup__switcher.why").offset().top},500)}}),function(e){BEM.decl("appcurl-api",{},{search:function(t,n,i){return i||(i=n,n={}),n.q=t,this._sendRequest("search",n,i),delete n.page,delete n.tags,delete n.categories,delete n.q,delete n.withFacets,delete n.withLikes,e.cookie("appcurl_search_params",e.param(n)),this},quickSearch:function(e,t,n){return n||(n=t,t={}),t.q=e,this._sendRequest("qs",t,n),this},getAppFeed:function(e,t,n){return n||(n=t,t={size:6}),t.appId=e,this._sendRequest("appFeeds",t,n),this},getCategories:function(e){var t=this;this._getCategories(function(n){var i={};return n.forEach(function(e){i[e.id]=e.name,e.subcategories&&e.subcategories.forEach(function(e){i[e.id]=e.name})}),e(i),t.trigger("getCategories",{categories:i}),t})},_getCategories:function(e){var t={result:[{name:"Books & Reference",id:1},{name:"Business",id:2},{name:"Educational",id:3},{name:"Entertainment",id:4},{name:"Finance",id:5},{name:"Games",id:6,subcategories:[{name:"Action",id:31},{name:"Adventure",id:32},{name:"Arcade",id:33},{name:"Board",id:34},{name:"Card",id:35},{name:"Casino",id:36},{name:"Dice",id:37},{name:"Educational",id:38},{name:"Family",id:39},{name:"Kids",id:40},{name:"Music",id:41},{name:"Puzzle",id:42},{name:"Racing",id:43},{name:"Role Playing",id:44},{name:"Simulation",id:45},{name:"Sports",id:46},{name:"Strategy",id:47},{name:"Trivia",id:48},{name:"Word",id:49},{name:"Misc.",id:50}]},{name:"Health & Fitness",id:7},{name:"Lifestyle",id:8},{name:"Media & Video",id:9},{name:"Medical",id:10},{name:"Music & Audio",id:11},{name:"Navigation",id:12},{name:"News & Magazines",id:13},{name:"Photography",id:14},{name:"Productivity",id:15},{name:"Social",id:17},{name:"Shopping",id:16},{name:"Travel & Local",id:19},{name:"Sports",id:18},{name:"Weather",id:21},{name:"Utilities",id:20},{name:"Personalization",id:23}],total:22};return e(t.result),this},_sendRequest:function(t,n,i){var o=this,r={search:"appSearch",qs:"appQs"},a=r[t]||t;n=e.extend({},n),AI[a](n,function(e,n){return e?(console.log("API request of ",a," resulted in  error: ",e,n),void 0):(o.trigger(t,{data:n}),i(n),void 0)},!0)}})}(jQuery);var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-27594594-1"]),_gaq.push(["_setDomainName","appcurl.com"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");
e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),function(e,t,n){(t[n]=t[n]||[]).push(function(){try{t.yaCounter22600246=new Ya.Metrika({id:22600246,webvisor:!0,clickmap:!0,trackLinks:!0,accurateTrackBounce:!0,trackHash:!0})}catch(e){}});var i=e.getElementsByTagName("script")[0],o=e.createElement("script"),r=function(){i.parentNode.insertBefore(o,i)};o.type="text/javascript",o.async=!0,o.src=("https:"==e.location.protocol?"https:":"http:")+"//mc.yandex.ru/metrika/watch.js","[object Opera]"==t.opera?e.addEventListener("DOMContentLoaded",r,!1):r()}(document,window,"yandex_metrika_callbacks"),BEM.DOM.decl("infopane",{onSetMod:{js:function(){this.__self.pane=this}}},{show:function(e,t,n){this.pane.hasMod("visibility")&&this.getNewPane();var i=this.pane;e="object"==typeof e?BEMHTML.apply(e):e,t?i.setMod("type",t):i.delMod("type"),i.elem("text").html(e),n&&setTimeout(function(){i.delMod("visibility")},n),i.setMod("visibility","visible")},getNewPane:function(){BEM.DOM.after(this.pane.domElem,BEMHTML.apply({block:"infopane"}))}}),function(e){"use strict";var t=e.document,n=e.setTimeout||n,i=e.clearTimeout||i,o=e.setInterval||o,r=e.History=e.History||{};if("undefined"!=typeof r.initHtml4)throw new Error("History.js HTML4 Support has already been loaded...");r.initHtml4=function(){return"undefined"!=typeof r.initHtml4.initialized?!1:(r.initHtml4.initialized=!0,r.enabled=!0,r.savedHashes=[],r.isLastHash=function(e){var t,n=r.getHashByIndex();return t=e===n},r.saveHash=function(e){return r.isLastHash(e)?!1:(r.savedHashes.push(e),!0)},r.getHashByIndex=function(e){var t=null;return t="undefined"==typeof e?r.savedHashes[r.savedHashes.length-1]:0>e?r.savedHashes[r.savedHashes.length+e]:r.savedHashes[e]},r.discardedHashes={},r.discardedStates={},r.discardState=function(e,t,n){var i,o=r.getHashByState(e);return i={discardedState:e,backState:n,forwardState:t},r.discardedStates[o]=i,!0},r.discardHash=function(e,t,n){var i={discardedHash:e,backState:n,forwardState:t};return r.discardedHashes[e]=i,!0},r.discardedState=function(e){var t,n=r.getHashByState(e);return t=r.discardedStates[n]||!1},r.discardedHash=function(e){var t=r.discardedHashes[e]||!1;return t},r.recycleState=function(e){var t=r.getHashByState(e);return r.discardedState(e)&&delete r.discardedStates[t],!0},r.emulated.hashChange&&(r.hashChangeInit=function(){r.checkerFunction=null;var n,i,a,s,l="";return r.isInternetExplorer()?(n="historyjs-iframe",i=t.createElement("iframe"),i.setAttribute("id",n),i.style.display="none",t.body.appendChild(i),i.contentWindow.document.open(),i.contentWindow.document.close(),a="",s=!1,r.checkerFunction=function(){if(s)return!1;s=!0;var t=r.getHash()||"",n=r.unescapeHash(i.contentWindow.document.location.hash)||"";return t!==l?(l=t,n!==t&&(a=n=t,i.contentWindow.document.open(),i.contentWindow.document.close(),i.contentWindow.document.location.hash=r.escapeHash(t)),r.Adapter.trigger(e,"hashchange")):n!==a&&(a=n,r.setHash(n,!1)),s=!1,!0}):r.checkerFunction=function(){var t=r.getHash();return t!==l&&(l=t,r.Adapter.trigger(e,"hashchange")),!0},r.intervalList.push(o(r.checkerFunction,r.options.hashChangeInterval)),!0},r.Adapter.onDomLoad(r.hashChangeInit)),r.emulated.pushState&&(r.onHashChange=function(n){var i,o=n&&n.newURL||t.location.href,a=r.getHashByUrl(o),s=null,l=null;return r.isLastHash(a)?(r.busy(!1),!1):(r.doubleCheckComplete(),r.saveHash(a),a&&r.isTraditionalAnchor(a)?(r.Adapter.trigger(e,"anchorchange"),r.busy(!1),!1):(s=r.extractState(r.getFullUrl(a||t.location.href,!1),!0),r.isLastSavedState(s)?(r.busy(!1),!1):(l=r.getHashByState(s),(i=r.discardedState(s))?(r.getHashByIndex(-2)===r.getHashByState(i.forwardState)?r.back(!1):r.forward(!1),!1):(r.pushState(s.data,s.title,s.url,!1),!0))))},r.Adapter.bind(e,"hashchange",r.onHashChange),r.pushState=function(n,i,o,a){if(r.getHashByUrl(o))throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(a!==!1&&r.busy())return r.pushQueue({scope:r,callback:r.pushState,args:arguments,queue:a}),!1;r.busy(!0);var s=r.createStateObject(n,i,o),l=r.getHashByState(s),c=r.getState(!1),u=r.getHashByState(c),d=r.getHash();return r.storeState(s),r.expectedStateId=s.id,r.recycleState(s),l===u?(r.busy(!1),!1):(l!==d&&l!==r.getShortUrl(t.location.href)&&r.setHash(l,!1),r.saveState(s),r.Adapter.trigger(e,"statechange"),r.busy(!1),!0)},r.replaceState=function(e,t,n,i){if(r.getHashByUrl(n))throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(i!==!1&&r.busy())return r.pushQueue({scope:r,callback:r.replaceState,args:arguments,queue:i}),!1;r.busy(!0);var o=r.createStateObject(e,t,n),a=r.getState(!1),s=r.getStateByIndex(-2);return r.discardState(a,o,s),r.pushState(o.data,o.title,o.url,!1),!0}),r.emulated.pushState&&r.getHash()&&!r.emulated.hashChange&&r.Adapter.onDomLoad(function(){r.Adapter.trigger(e,"hashchange")}),void 0)},"undefined"!=typeof r.init&&r.init()}(window),function(e,t){"use strict";var n=e.History=e.History||{},i=e.jQuery;if("undefined"!=typeof n.Adapter)throw new Error("History.js Adapter has already been loaded...");n.Adapter={bind:function(e,t,n){i(e).bind(t,n)},trigger:function(e,t,n){i(e).trigger(t,n)},extractEventData:function(e,n,i){var o=n&&n.originalEvent&&n.originalEvent[e]||i&&i[e]||t;return o},onDomLoad:function(e){i(e)}},"undefined"!=typeof n.init&&n.init()}(window),function(e,t,n){"use strict";var i=e.console||n,o=e.document,r=e.navigator,a=e.sessionStorage||!1,s=e.setTimeout,l=e.clearTimeout,c=e.setInterval,u=e.clearInterval,d=e.JSON,h=(e.alert,e.History=e.History||{}),p=e.history,f="#!",m=/\#!/;if("undefined"!=typeof h.init)throw new Error("History.js Core has already been loaded...");h.init=function(){return"undefined"==typeof h.Adapter?!1:("undefined"!=typeof h.initCore&&h.initCore(),"undefined"!=typeof h.initHtml4&&h.initHtml4(),!0)},h.initCore=function(){if("undefined"!=typeof h.initCore.initialized)return!1;if(h.initCore.initialized=!0,h.options=h.options||{},h.options.hashChangeInterval=h.options.hashChangeInterval||250,h.options.safariPollInterval=h.options.safariPollInterval||500,h.options.doubleCheckInterval=h.options.doubleCheckInterval||500,h.options.storeInterval=h.options.storeInterval||1e3,h.options.busyDelay=h.options.busyDelay||250,h.options.debug=!0,h.options.initialTitle=h.options.initialTitle||o.title,h.options.sessionStorage=h.options.sessionStorage||!1,h.intervalList=[],h.clearAllIntervals=function(){var e,t=h.intervalList;if("undefined"!=typeof t&&null!==t){for(e=0;e<t.length;e++)u(t[e]);h.intervalList=null}},h.debug=function(){h.options.debug&&h.log.apply(h,arguments)},h.log=function(){var e,t,n=!("undefined"==typeof i||"undefined"==typeof i.log||"undefined"==typeof i.log.apply);return n&&(t=Array.prototype.slice.call(arguments),e=t.shift(),"undefined"!=typeof i.debug?i.debug.apply(i,[e,t]):i.log.apply(i,[e,t])),!0},h.getInternetExplorerMajorVersion=function(){var e=h.getInternetExplorerMajorVersion.cached="undefined"!=typeof h.getInternetExplorerMajorVersion.cached?h.getInternetExplorerMajorVersion.cached:function(){for(var e=3,t=o.createElement("div"),n=t.getElementsByTagName("i");(t.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->")&&n[0];);return e>4?e:!1}();return e},h.isInternetExplorer=function(){var e=h.isInternetExplorer.cached="undefined"!=typeof h.isInternetExplorer.cached?h.isInternetExplorer.cached:Boolean(h.getInternetExplorerMajorVersion());return e},h.emulated={pushState:!Boolean(e.history&&e.history.pushState&&e.history.replaceState&&!(/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(r.userAgent)||/AppleWebKit\/5([0-2]|3[0-2])/i.test(r.userAgent)||/Bada\/([\d.]+)/i.test(r.userAgent))),hashChange:Boolean(!("onhashchange"in e||"onhashchange"in o)||h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<8)},h.enabled=!h.emulated.pushState,h.bugs={setHash:Boolean(!h.emulated.pushState&&"Apple Computer, Inc."===r.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(r.userAgent)),safariPoll:Boolean(!h.emulated.pushState&&"Apple Computer, Inc."===r.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(r.userAgent)),ieDoubleCheck:Boolean(h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<7)},h.isEmptyObject=function(e){for(var t in e)return!1;return!0},h.cloneObject=function(e){return e?t.extend({},e):{}},h.getRootUrl=function(){var e=o.location.protocol+"//"+(o.location.hostname||o.location.host);return o.location.port&&(e+=":"+o.location.port),e+="/"},h.getBaseHref=function(){var e=o.getElementsByTagName("base"),t=null,n="";return 1===e.length&&(t=e[0],n=t.href.replace(/[^\/]+$/,"")),n=n.replace(/\/+$/,""),n&&(n+="/"),n},h.getBaseUrl=function(){var e=h.getBaseHref()||h.getBasePageUrl()||h.getRootUrl();return e},h.getPageUrl=function(){var e,t=h.getState(!1,!1),n=(t||{}).url||o.location.href;return e=n.replace(/\/+$/,"").replace(/[^\/]+$/,function(e){return/\./.test(e)?e:e+"/"})},h.getBasePageUrl=function(){var e=o.location.href.replace(/[#\?].*/,"").replace(/[^\/]+$/,function(e){return/[^\/]$/.test(e)?"":e}).replace(/\/+$/,"")+"/";return e},h.getFullUrl=function(e,t){var n=e,i=e.substring(0,1);return t="undefined"==typeof t?!0:t,/[a-z]+\:\/\//.test(e)||(n="/"===i?h.getRootUrl()+e.replace(/^\/+/,""):"#"===i?h.getPageUrl().replace(/#.*/,"")+e:"?"===i?h.getPageUrl().replace(/[\?#].*/,"")+e:t?h.getBaseUrl()+e.replace(/^(\.\/)+/,""):h.getBasePageUrl()+e.replace(/^(\.\/)+/,"")),n.replace(/\#$/,"")},h.getShortUrl=function(e){var t=e,n=h.getBaseUrl(),i=h.getRootUrl();return h.emulated.pushState&&(t=t.replace(n,"/")),t=t.replace(i,"/"),h.isTraditionalAnchor(t)&&(t="/"+t),t=t.replace(/^(\.\/)+/g,"./").replace(/\#$/,"").replace(m,"").replace("//","/")},h.store={},h.idToState=h.idToState||{},h.stateToId=h.stateToId||{},h.urlToId=h.urlToId||{},h.storedStates=h.storedStates||[],h.savedStates=h.savedStates||[],h.normalizeStore=function(){h.store.idToState=h.store.idToState||{},h.store.urlToId=h.store.urlToId||{},h.store.stateToId=h.store.stateToId||{}},h.getState=function(e,t){"undefined"==typeof e&&(e=!0),"undefined"==typeof t&&(t=!0);var n=h.getLastSavedState();return!n&&t&&(n=h.createStateObject()),e&&(n=h.cloneObject(n),n.url=n.url),n},h.getIdByState=function(e){var t,n=h.extractId(e.url);if(!n)if(t=h.getStateString(e),"undefined"!=typeof h.stateToId[t])n=h.stateToId[t];else if("undefined"!=typeof h.store.stateToId[t])n=h.store.stateToId[t];else{for(;;)if(n=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),"undefined"==typeof h.idToState[n]&&"undefined"==typeof h.store.idToState[n])break;h.stateToId[t]=n,h.idToState[n]=e}return n},h.normalizeState=function(e){var t;return e&&"object"==typeof e||(e={}),"undefined"!=typeof e.normalized?e:(e.data&&"object"==typeof e.data||(e.data={}),t={},t.normalized=!0,t.title=e.title||"",t.url=h.getFullUrl(e.url||o.location.href),t.hash=h.getShortUrl(t.url),t.data=h.cloneObject(e.data),t.id=h.getIdByState(t),t.url=t.url.replace(/\??\&_suid.*/,""),t.hashedUrl=h.getFullUrl(h.getShortUrl(t.url)),(h.emulated.pushState||h.bugs.safariPoll)&&h.hasUrlDuplicate(t)&&(t.url=t.hashedUrl),t)},h.createStateObject=function(e,t,n){var i={data:e,title:t,url:n};return i=h.normalizeState(i)},h.getStateById=function(e){e=String(e);var t=h.idToState[e]||h.store.idToState[e]||n;return t},h.getStateString=function(e){var t,n,i;return t=h.normalizeState(e),n={data:t.data,title:e.title,url:e.url},i=d.stringify(n)},h.getStateId=function(e){var t,n;return t=h.normalizeState(e),n=t.id},h.getHashByState=function(e){var t,n;return t=h.normalizeState(e),n=t.hash},h.extractId=function(e){var t,n,i;return n=/(.*)\&_suid=([0-9]+)$/.exec(e),i=n?n[1]||e:e,t=n?String(n[2]||""):"",t||!1},h.isTraditionalAnchor=function(e){var t=!/[\/\?\.]/.test(e);return t},h.extractState=function(e,t){var n,i,o=null;return t=t||!1,n=h.extractId(e),n&&(o=h.getStateById(n)),o||(i=h.getFullUrl(e),n=h.getIdByUrl(i)||!1,n&&(o=h.getStateById(n)),o||!t||h.isTraditionalAnchor(e)||(o=h.createStateObject(null,null,i))),o},h.getIdByUrl=function(e){var t=h.urlToId[e]||h.store.urlToId[e]||n;return t},h.getLastSavedState=function(){return h.savedStates[h.savedStates.length-1]||n},h.getLastStoredState=function(){return h.storedStates[h.storedStates.length-1]||n},h.hasUrlDuplicate=function(e){var t,n=!1;return t=h.extractState(e.url),n=t&&t.id!==e.id},h.storeState=function(e){return h.urlToId[e.url]=e.id,h.storedStates.push(h.cloneObject(e)),e},h.isLastSavedState=function(e){var t,n,i,o=!1;return h.savedStates.length&&(t=e.id,n=h.getLastSavedState(),i=n.id,o=t===i),o},h.saveState=function(e){return h.isLastSavedState(e)?!1:(h.savedStates.push(h.cloneObject(e)),!0)},h.getStateByIndex=function(e){var t=null;return t="undefined"==typeof e?h.savedStates[h.savedStates.length-1]:0>e?h.savedStates[h.savedStates.length+e]:h.savedStates[e]},h.getHash=function(){return h.unescapeHash(o.location.hash)},h.unescapeString=function(t){for(var n,i=t;;){if(n=e.decodeURI(i),n===i)break;i=n}return i},h.unescapeHash=function(e){var t=h.normalizeHash(e);return t=h.unescapeString(t)},h.normalizeHash=function(e){var t=e.replace(/[^#]*#!?/,"").replace(/#.*/,"");return t},h.setHash=function(e,t){var n,i,r;return t!==!1&&h.busy()?(h.pushQueue({scope:h,callback:h.setHash,args:arguments,queue:t}),!1):(n=e,h.busy(!0),i=h.extractState(e,!0),i&&!h.emulated.pushState?h.pushState(i.data,i.title,i.url,!1):o.location.hash!==n&&(h.bugs.setHash?(r=h.getPageUrl(),h.pushState(null,null,r+f+n,!1)):h.setDocumentHash(f+n)),h)},h.setDocumentHash=function(e){o.location.hash=e.replace(/#/,"")},h.escapeHash=function(t){var n=h.normalizeHash(t);return n=e.encodeURI(n),h.bugs.hashEscape||(n=n.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),n},h.getHashByUrl=function(e){var t=String(e||"").replace(/([^#]*)(#(!\/)?)?([^#]*)#?(.*)/,"$4");return t=h.unescapeHash(t)},h.setTitle=function(e){var t,n=e.title;n||(t=h.getStateByIndex(0),t&&t.url===e.url&&(n=t.title||h.options.initialTitle));try{o.getElementsByTagName("title")[0].innerHTML=n}catch(i){}return o.title=n,h},h.queues=[],h.busy=function(e){if("undefined"!=typeof e?h.busy.flag=e:"undefined"==typeof h.busy.flag&&(h.busy.flag=!1),!h.busy.flag){l(h.busy.timeout);var t=function(){var e,n,i;if(!h.busy.flag)for(e=h.queues.length-1;e>=0;--e)n=h.queues[e],0!==n.length&&(i=n.shift(),h.fireQueueItem(i),h.busy.timeout=s(t,h.options.busyDelay))};h.busy.timeout=s(t,h.options.busyDelay)}return h.busy.flag},h.busy.flag=!1,h.fireQueueItem=function(e){return e.callback.apply(e.scope||h,e.args||[])},h.pushQueue=function(e){return h.queues[e.queue||0]=h.queues[e.queue||0]||[],h.queues[e.queue||0].push(e),h},h.queue=function(e,t){return"function"==typeof e&&(e={callback:e}),"undefined"!=typeof t&&(e.queue=t),h.busy()?h.pushQueue(e):h.fireQueueItem(e),h},h.clearQueue=function(){return h.busy.flag=!1,h.queues=[],h},h.stateChanged=!1,h.doubleChecker=!1,h.doubleCheckComplete=function(){return h.stateChanged=!0,h.doubleCheckClear(),h},h.doubleCheckClear=function(){return h.doubleChecker&&(l(h.doubleChecker),h.doubleChecker=!1),h},h.doubleCheck=function(e){return h.stateChanged=!1,h.doubleCheckClear(),h.bugs.ieDoubleCheck&&(h.doubleChecker=s(function(){return h.doubleCheckClear(),h.stateChanged||e(),!0},h.options.doubleCheckInterval)),h},h.safariStatePoll=function(){var t,n=h.extractState(o.location.href);if(!h.isLastSavedState(n))return t=n,t||(t=h.createStateObject()),h.Adapter.trigger(e,"popstate"),h},h.back=function(e){return e!==!1&&h.busy()?(h.pushQueue({scope:h,callback:h.back,args:arguments,queue:e}),!1):(h.busy(!0),h.doubleCheck(function(){h.back(!1)}),p.go(-1),!0)},h.forward=function(e){return e!==!1&&h.busy()?(h.pushQueue({scope:h,callback:h.forward,args:arguments,queue:e}),!1):(h.busy(!0),h.doubleCheck(function(){h.forward(!1)}),p.go(1),!0)},h.go=function(e,t){var n;if(e>0)for(n=1;e>=n;++n)h.forward(t);else{if(!(0>e))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(n=-1;n>=e;--n)h.back(t)}return h},h.emulated.pushState){var g=function(){};h.pushState=h.pushState||g,h.replaceState=h.replaceState||g}else h.onPopState=function(t,n){var i,r,a=!1,s=!1;return h.doubleCheckComplete(),(i=h.getHash())?(r=h.extractState(i||o.location.href,!0),r?h.replaceState(r.data,r.title,r.url,!1):(h.Adapter.trigger(e,"anchorchange"),h.busy(!1)),h.expectedStateId=!1,!1):(a=h.Adapter.extractEventData("state",t,n)||!1,s=a?h.getStateById(a):h.expectedStateId?h.getStateById(h.expectedStateId):h.extractState(o.location.href),s||(s=h.createStateObject(null,null,o.location.href)),h.expectedStateId=!1,h.isLastSavedState(s)?(h.busy(!1),!1):(h.storeState(s),h.saveState(s),h.Adapter.trigger(e,"statechange"),h.busy(!1),!0))},h.Adapter.bind(e,"popstate",h.onPopState),h.pushState=function(t,n,i,o){if(h.getHashByUrl(i)&&h.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(o!==!1&&h.busy())return h.pushQueue({scope:h,callback:h.pushState,args:arguments,queue:o}),!1;h.busy(!0);var r=h.createStateObject(t,n,i);return h.isLastSavedState(r)?h.busy(!1):(h.storeState(r),h.expectedStateId=r.id,p.pushState(r.id,r.title,r.url),h.Adapter.trigger(e,"popstate")),!0},h.replaceState=function(t,n,i,o){if(h.getHashByUrl(i)&&h.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(o!==!1&&h.busy())return h.pushQueue({scope:h,callback:h.replaceState,args:arguments,queue:o}),!1;h.busy(!0);var r=h.createStateObject(t,n,i);return h.isLastSavedState(r)?h.busy(!1):(h.storeState(r),h.expectedStateId=r.id,p.replaceState(r.id,r.title,r.url),h.Adapter.trigger(e,"popstate")),!0};if(a&&h.options.sessionStorage){try{h.store=d.parse(a.getItem("History.store"))||{}}catch(b){h.store={}}h.normalizeStore()}else h.store={},h.normalizeStore();h.Adapter.bind(e,"beforeunload",h.clearAllIntervals),h.Adapter.bind(e,"unload",h.clearAllIntervals),h.saveState(h.storeState(h.extractState(o.location.href,!0))),a&&h.options.sessionStorage&&(h.onUnload=function(){var e,t;try{e=d.parse(a.getItem("History.store"))||{}}catch(n){e={}}e.idToState=e.idToState||{},e.urlToId=e.urlToId||{},e.stateToId=e.stateToId||{};for(t in h.idToState)h.idToState.hasOwnProperty(t)&&(e.idToState[t]=h.idToState[t]);for(t in h.urlToId)h.urlToId.hasOwnProperty(t)&&(e.urlToId[t]=h.urlToId[t]);for(t in h.stateToId)h.stateToId.hasOwnProperty(t)&&(e.stateToId[t]=h.stateToId[t]);h.store=e,h.normalizeStore(),a.setItem("History.store",d.stringify(e))},h.intervalList.push(c(h.onUnload,h.options.storeInterval)),h.Adapter.bind(e,"beforeunload",h.onUnload),h.Adapter.bind(e,"unload",h.onUnload)),h.emulated.pushState||(h.bugs.safariPoll&&h.intervalList.push(c(h.safariStatePoll,h.options.safariPollInterval)),("Apple Computer, Inc."===r.vendor||"Mozilla"===(r.appCodeName||""))&&(h.Adapter.bind(e,"hashchange",function(){h.Adapter.trigger(e,"popstate")}),h.getHash()&&h.Adapter.onDomLoad(function(){h.Adapter.trigger(e,"hashchange")})))},h.init()}(window,jQuery),function(e){function t(e){return e.replace(/%.{2}/g,function(e){return i[e]||e})}function n(e,n){var i="";try{i=e(n)}catch(o){try{i=e(t(n))}catch(o){i=n}}return i}var i={"%D0":"%D0%A0","%C0":"%D0%90","%C1":"%D0%91","%C2":"%D0%92","%C3":"%D0%93","%C4":"%D0%94","%C5":"%D0%95","%A8":"%D0%81","%C6":"%D0%96","%C7":"%D0%97","%C8":"%D0%98","%C9":"%D0%99","%CA":"%D0%9A","%CB":"%D0%9B","%CC":"%D0%9C","%CD":"%D0%9D","%CE":"%D0%9E","%CF":"%D0%9F","%D1":"%D0%A1","%D2":"%D0%A2","%D3":"%D0%A3","%D4":"%D0%A4","%D5":"%D0%A5","%D6":"%D0%A6","%D7":"%D0%A7","%D8":"%D0%A8","%D9":"%D0%A9","%DA":"%D0%AA","%DB":"%D0%AB","%DC":"%D0%AC","%DD":"%D0%AD","%DE":"%D0%AE","%DF":"%D0%AF","%E0":"%D0%B0","%E1":"%D0%B1","%E2":"%D0%B2","%E3":"%D0%B3","%E4":"%D0%B4","%E5":"%D0%B5","%B8":"%D1%91","%E6":"%D0%B6","%E7":"%D0%B7","%E8":"%D0%B8","%E9":"%D0%B9","%EA":"%D0%BA","%EB":"%D0%BB","%EC":"%D0%BC","%ED":"%D0%BD","%EE":"%D0%BE","%EF":"%D0%BF","%F0":"%D1%80","%F1":"%D1%81","%F2":"%D1%82","%F3":"%D1%83","%F4":"%D1%84","%F5":"%D1%85","%F6":"%D1%86","%F7":"%D1%87","%F8":"%D1%88","%F9":"%D1%89","%FA":"%D1%8A","%FB":"%D1%8B","%FC":"%D1%8C","%FD":"%D1%8D","%FE":"%D1%8E","%FF":"%D1%8F"};e.extend({decodeURI:function(e){return n(decodeURI,e)},decodeURIComponent:function(e){return n(decodeURIComponent,e)}})}(jQuery),function(){var e;BEM.decl("i-location",{onSetMod:{js:function(){this._syncState(),BEM.DOM.win.bind("statechange",this.changeThis(this._onStateChange))}},_onStateChange:function(){this._syncState(),this._state.__needTrigger!==!1&&(delete this._state.__needTrigger,this.trigger("change",this._state))},_syncState:function(){var e=History.getState();return this._state=$.extend(e.data,{url:e.url,path:this.__self.parsePath(e.hash),params:this.__self.parseParams(e.hash)}),this},change:function(e){e.url=this.__self.normalizeURL(e.url),e.history=e.history!==!1,e.url&&delete e.params,e.title&&(document.title=e.title),e.params&&(e.url=this.__self.joinPath(this._state.path,this.__self.joinParams(this._state.params,e.params))),$.each(e,function(t){"url"===t&&!e[t]||"history"===t||"title"!==t&&(e.__needTrigger=!0)}),e.__needTrigger||(e.__needTrigger=!1),History[(e.history?"push":"replace")+"State"](e,e.title,e.url)},getState:function(){return this._state}},{get:function(){return e||(e=BEM.create("i-location"))},parsePath:function(e){return e.match(/([^\?&]*)/)[0]},parseParams:function(e){if(e=e.replace(/[^?]*\??/,""),!e)return{};var t=/(?:^|&|;)([^&=;]*)=?([^&;]*)/g,n={};return e.replace(t,function(e,t,i){t&&(n[t]=i.replace(/\+/g," ")),n[t]=$.decodeURIComponent(n[t])}),n},joinParams:function(e,t){return $.extend({},e,t)},joinPath:function(e,t){return this.normalizeURL(e+"?"+$.param(t))},normalizeURL:function(e){return(e||"").replace(/\+/g,"%20")}})}(),function(e){BEM.decl("i-location",{change:function(t){t.url=this.__self.normalizeURL(t.url),t.history=t.history!==!1,t.url&&delete t.params,t.title&&(document.title=t.title),t.params&&(t.url=this.__self.joinPath(this._state.path,this.__self.joinParams(this._state.params,t.params))),t.__needTrigger===!1||e.each(t,function(e){"url"===e&&!t[e]||"history"===e||"title"!==e&&(t.__needTrigger=!0)}),t.__needTrigger||(t.__needTrigger=!1),History[(t.history?"push":"replace")+"State"](t,t.title,t.url)}},{joinPath:function(t,n){return this.normalizeURL(t+"?"+e.param(n).replace(/%2C/g,","))}})}(jQuery),function(e){BEM.DOM.decl("dropdown",{onSetMod:{js:function(){this.bindTo("switcher","click",function(){this.toggleMod("state","shown")})},state:{shown:function(){if(this.hasMod("disabled"))return!1;this.trigger("shown");var t=e.browser.opera?"keypress":"keydown";this.afterCurrentEvent(function(){this.bindToDoc("leftclick",function(t){this.containsDomElem(e(t.target))||this._onOutClick(t)}).bindToDoc(t,function(e){27==e.keyCode&&this.hide()})})},"":function(){return this.trigger("hide"),this.unbindFromDoc("leftclick keypress")}}},show:function(){this.setMod("state","shown")},hide:function(){this.delMod("state")},_onOutClick:function(t){var n=e.Event("outside-click");this.trigger(n,{domEvent:t}),n.isDefaultPrevented()||this.hide()}})}(jQuery),function(e){var t=e.event.special.leftclick={setup:function(){e(this).bind("click",t.handler)},teardown:function(){e(this).unbind("click",t.handler)},handler:function(t){t.button||(t.type="leftclick",e.event.handle.apply(this,arguments),t.type="click")}}}(jQuery),function(){var e=[],t=[],n={};BEM.decl("airomo-api",{},{get:function(e,t,n,i){return this._get("get",e,t,n,i),this},me:function(e,t,n){return this.get(e,t,n),this},getFollowing:function(e,t,n,i){return"me"==e&&this._getAuthorized("get_following",e,t,n,i),"me"==e||this._get("get_following",e,t,n,i),this},getFollowers:function(e,t,n,i){return"me"==e&&this._getAuthorized("get_followers",e,t,n,i),"me"==e||this._get("get_followers",e,t,n,i),this},getFollow:function(e,t,n,i){var o=0,r={},a=function(e){o++,$.extend(r,e),2==a&&t&&t(r)};return this.getFollowing(e,a,n,i),this.getFollowers(e,a,n,i),this},_get:function(e,t,n,i,o){var r=this;this._getData("init",function(){r._getData(e,t,n,i,o)})},_getAuthorized:function(e,t,n,i,o){var r=this;this._get("get","me",function(){r._getData(e,t,n,i,o)},function(){i&&i()},o)},_getData:function(i,o,r,a,s){var l=this;if("string"!=typeof o&&(s=a,a=r,r=o,o="me"),"boolean"==typeof r&&(s=r,r=void 0),"boolean"==typeof a&&(s=a,a=void 0),!s&&e[i]&&e[i][o])return r&&r(e[i][o]),void 0;if(t[i]||(t[i]={}),t[i][o]||(t[i][o]=[]),t[i][o].push([r,a]),!n[i]||!n[i][o]){n[i]||(n[i]=[]),n[i][o]=!0,e[i]||(e[i]={});var c=function(e){for(var r;t[i][o].length;)r=t[i][o].shift()[0],r&&r(e);n[i][o]=!1},u=function(t){e[i][o]=t,c(t);var n={get_following:"getFollowing",get_followers:"getFollowers"},r=n[i]||i;"get"==i&&"me"==o&&(l.data||(l.data={}),l.data.user=t),"init"==i||BEM.channel("airomo").trigger(r,{data:t,userId:o,isMe:"me"==o?!0:!1})},d=function(e){for(var r;t[i][o].length;)r=t[i][o].shift()[1],r&&r(e);n[i][o]=!1};"init"==i?airomo.init(function(e){u(e)}):airomo.users[i](o,function(e){u(e)},function(e){d(e)})}}})}(),BEM.decl("auth",{onSetMod:{js:function(){this.__self.get(),BEM.channel("airomo").on("logout",function(){this.cache="unauthorized",BEM.channel("airomo").trigger("unauthorized",{data:"unauthorized"})})}}},{_callbackArray:[],get:function(e){if(this._cache)return e(this._cache),void 0;this._callbackArray.push(e);var t=this;BEM.blocks["airomo-api"].me(function(e){for(e.me=!0,t._cache=e;t._callbackArray.length;)t._callbackArray.shift()(e);BEM.channel("airomo").trigger("user",{user:e,me:!0})},function(){for(;t._callbackArray.length;)t._cache="unauthorized",t._callbackArray.shift()("unauthorized")})}}),function(){var e,t=!1,n=[];BEM.decl("airomo-api-v2",{},{apiInit:function(i){t?i.apply(i,e):n.push(i)}}),AI.init(function(){t=!0,e=arguments,n&&n.length&&(n.forEach(function(t){t.apply(t,e)}),n=null)})}(),BEM.DOM.decl("user",{onSetMod:{js:function(){var e=this;this.on("authorize",this.onAuthorize),this._checkAuthorization(),this._dropdown=this.findBlockOn("dropdown"),this.bindTo(this.elem("link","type","logout"),"click",function(){this._dropdown&&this._dropdown.delMod("state"),airomo.logout(function(){e.onLogout(),window.location.href="http://"+BEM.blocks["i-global"].param("airomo-host")+"/"})})}},onAuthorize:function(e,t){var n=t.user,i=this.findBlockInside("avatar");this.elem("username").removeAttr("href").removeClass("b-link").text(n.username),this.setMod("authorized","yes").delMod(this.elem("link","type","login"),"visibility").setMod(this.elem("link","type","profile"),"visibility","visible").setMod(this.elem("link","type","settings"),"visibility","visible").setMod(this.elem("link","type","logout"),"visibility","visible"),this._dropdown&&this._dropdown.delMod("disabled"),i.elem("img").attr({src:n.avatar,alt:n.username}),i.setMod(i.elem("img"),"visibility","visible").delMod("visibility")},onLogout:function(){var e=this.findBlockInside("avatar"),t=BEM.I18N?BEM.I18N("b-page","username"):"Join/Login";return e.delMod(e.elem("img"),"visibility"),this.elem("username").text(t),this.delMod(this.elem("link"),"visibility").setMod(this.elem("link","type","login"),"visibility","visible").trigger("logout"),this._dropdown&&this._dropdown.setMod("disabled","yes"),this},_checkAuthorization:function(){var e=this;BEM.blocks.auth.get(function(t){"unauthorized"==t?(e.delMod("authorized").onLogout().trigger("logout").__self._userInfo=void 0,BEM.channel("airomo").trigger("logout")):e.setMod("authorized","yes").trigger("authorize",{user:t}).__self._userInfo=t})}},{getUserInfo:function(){return this._userInfo}}),BEM.DOM.decl("user",{onSetMod:{js:function(){var e=this;this.on("authorize",this.onAuthorize),this._checkAuthorization(),this._dropdown=this.findBlockOn("dropdown"),this.bindTo(this.elem("link","type","logout"),"click",function(){this._dropdown&&this._dropdown.delMod("state"),airomo.logout(function(){e.onLogout(),window.location.href="http://"+BEM.blocks["i-global"].param("airomo-host")+"/"})})}},_checkAuthorization:function(){var e=this;BEM.blocks["airomo-api-v2"].apiInit(function(){var t=Array.prototype.slice.call(arguments);t[0]||("unauthorized"===t[1].user?(e.delMod("authorized").onLogout().trigger("logout").__self._userInfo=void 0,BEM.channel("airomo").trigger("logout")):e.setMod("authorized","yes").trigger("authorize",{user:t[1].user}).__self._userInfo=t[1].user)})}}),BEM.HTML.decl("b-link",{onBlock:function(e){e.tag("a").attr("href",e.param("url"));for(var t,n=["title","target"];t=n.pop();)e.param(t)&&e.attr(t,e.param(t))}}),BEM.DOM.decl("go-appcurl",{onSetMod:{js:function(){if(-1!=window.location.href.indexOf("explore")){var e=this;this.iLocation=BEM.blocks["i-location"].get(),this.link=this.findBlockOn("b-link"),this.updateLink(),this.iLocation.on("change",function(t,n){e.updateLink(n.params)})}}},updateLink:function(e){var t=e||this.iLocation.getState().params,n=t.type||"apps",i={};t.q&&(i.q=t.q,t.tags&&(i.tag=t.tags.split(",")[0]),t.categories&&(i.categories=t.categories),"games"==n&&(i.categories=6),t.platforms&&(i.platform=t.platforms),t.prices&&"all"!=t.prices&&(i.price=t.prices)),this.link.domElem.attr("href","http://"+BEM.blocks["i-global"].param("appcurl-host")+($.isEmptyObject(i)?"/":"/?"+$.param(i)))}}),BEM.DOM.decl("content",{onSetMod:{js:function(){return!0}}}),BEM.DOM.decl("appcurl-logo",{onSetMod:{js:function(){},type:{serp:function(){this.bindTo("click",this.goHome)},"":function(){this.unbindFrom("click")}}},showWhy:function(){},goHome:function(){var e=BEM.blocks["i-location"].get(),t=this.findBlockOutside("b-page");e.change({url:"/",title:"Appcurl : Discover the best Android and iPhone Apps with AppCurl"}),this.setMod("type","index"),t.delMod("mode"),t.findBlockInside("serp").delMod("visibility"),t.findBlockInside("appcurl-search").findBlockInside("b-form-input").val("")}}),BEM.DOM.decl("popup",{onSetMod:{js:function(){this.hasMod("popup","visibility")&&(this._isShown=!0),this.bindTo("switcher","click",this.toggle),this.bindTo("close","click",function(){this.hide()})}},onElemSetMod:{popup:{visibility:{visible:function(){this._isShown=!0,this.trigger("show")},"":function(){this._isShown=!1,this.trigger("hide")}}}},hide:function(){this.delMod(this.elem("popup"),"visibility")},show:function(){this.setMod(this.elem("popup"),"visibility","visible")},toggle:function(){this.isShown()?this.hide():this.show()},isShown:function(){return this._isShown}}),BEM.DOM.decl("why",{onSetMod:{js:function(){this.findBlockInside("popup").on("show hide",function(){this.findBlockInside("promo-video").domElem.attr("src","http://www.youtube.com/embed/iWPJfHPOq0w?rel=0")})}}}),BEM.DOM.decl("appcurl-search",{onSetMod:{js:function(){var e=this.findBlockInside("b-form-input"),t=BEM.blocks["i-location"].get(),n=t.getState().params.q;n&&n.replace(/%/g,"%25"),n&&e.val(decodeURIComponent(n)),this.bindTo("submit",function(){var n=e.val(),i=BEM.I18N&&BEM.I18N.lang();return i="en"==i?"":"uk"==i?"/ua":"/"+i,t.change({url:i+"/?q="+encodeURIComponent(n),title:n+"  Appcurl"}),e._getPopup().hide(),!1}),t.on("change",function(t,n){e.val(n.params.q)})}}}),BEM.decl("quick-search",{get:function(e,t){BEM.blocks["appcurl-api"].quickSearch(e,function(e){t.call(this,{items:e.result})})}}),function(){var e,t,n=function(){for(var t,n=0;t=e[n++];)t.val(t.elem("input").val())},i=function(e){try{return e.activeElement}catch(t){}};BEM.DOM.decl("b-form-input",{onSetMod:{js:function(){var o=this,r=o.elem("input"),a=i(o.__self.doc[0]),s=o.params.autoFocus&&!(a&&$(a).is("input, textarea"));o._val=r.val(),(a===r[0]||s)&&(o.setMod("focused","yes")._focused=!0),t||(e=[],t=o.channel("sys").on({tick:n,idle:function(){t.un("tick",n)},wakeup:function(){t.on("tick",n)}})),o._instanceIndex=e.push(o.bindTo(r,{focus:o._onFocus,blur:o._onBlur}))-1,o.params.shortcut&&o.bindToDoc("keydown",function(e){e.ctrlKey&&38==e.keyCode&&!$(e.target).is("input, textarea")&&o.setMod("focused","yes")
})},disabled:function(e,t){this.elem("input").attr("disabled","yes"==t)},focused:function(e,t){if(this.hasMod("disabled","yes"))return!1;var n="yes"==t;n?this._focused||this._focus():this._focused&&this._blur(),this.afterCurrentEvent(function(){this.trigger(n?"focus":"blur")})}},onElemSetMod:{message:{visibility:function(e,t,n){var i=this,o=i.getMod(e,"type");if(o){var r=!0;n||i.elem("message","type",o).each(function(){this!=e[0]&&i.hasMod($(this),"visibility","visible")&&(r=!1)}),r&&i.toggleMod("message-"+o,"yes","","visible"===n)}}}},val:function(e,t){if("undefined"==typeof e)return this._val;if(this._val!=e){var n=this.elem("input");n.val()!=e&&n.val(e),this._val=e,this.trigger("change",t)}return this},name:function(){return this.elem("input").attr("name")},_onFocus:function(){return this._focused=!0,this.setMod("focused","yes")},_onBlur:function(){return this._focused=!1,this.delMod("focused")},_focus:function(){var e=this.elem("input")[0];if(e.createTextRange&&!e.selectionStart){var t=e.createTextRange();t.move("character",e.value.length),t.select()}else e.focus()},_blur:function(){this.elem("input").blur()},destruct:function(){this.__base.apply(this,arguments),this.params.shortcut&&this.unbindFromDoc("keydown"),e.splice(this._instanceIndex,1);for(var t,n=this._instanceIndex;t=e[n++];)--t._instanceIndex}}),BEM.HTML.decl("b-form-input",{onBlock:function(e){var t=e.param("id")||e.generateId();e.tag("span").tParam("id",t).tParam("has-clear","yes"===e.mod("has-clear")).afterContent({elem:"box",tag:"span",content:{elem:"input",attrs:{value:e.param("value"),name:e.param("name"),id:t}}}).js(!0)},onElem:{input:function(e){e.tag(e.mod("type")||"input")},label:function(e){e.tag("label").attr("for",e.tParam("id"))},box:function(e){e.tParam("has-clear")&&e.afterContent({elem:"clear",tag:"span"})},hint:function(e){e.tag("label").attr("for",e.tParam("id"))}}})}(),function(){var e,t=0,n=!1,i=0,o=BEM.channel("sys"),r=50;BEM.decl("i-system",{},{start:function(){$(document).bind("mousemove keydown",function(){i=0,n&&(n=!1,o.trigger("wakeup"))}),this._tick()},_tick:function(){var a=this;o.trigger("tick",{counter:t++}),!n&&(i+=r)>3e3&&(n=!0,o.trigger("idle")),e=setTimeout(function(){a._tick()},r)}}).start()}(),BEM.DOM.decl("b-form-input",{onSetMod:{js:function(){this.__base.apply(this,arguments),(this._hasHint=!!this.elem("hint")[0])&&this.on("change",this._updateHint)._updateHint()},focused:function(){this.__base.apply(this,arguments),this._hasHint&&this._updateHint()}},_updateHint:function(){this.toggleMod(this.elem("hint-wrap"),"visibility","visible",!(this._focused||this.val()))}}),function(){var e={};BEM.decl("i-request",{onSetMod:{js:function(){this._preventCache=!1}},get:function(e,t,n,i){$.isFunction(n)||(i=n,n=this.params.onError),this._get(e,t,n,$.extend({},this.params,i))},_get:function(t,n,i,o){var r=this._buildCacheKey(t,o),a=e[o.cacheGroup];o.cache&&a&&r in a.data?n.call(this.params.callbackCtx,a.data[r]):this._do(t,n,i,o)},_do:function(){},_onSuccess:function(e,t,n,i){i.cache&&!this._preventCache&&this.putToCache(i,e,n),this._preventCache=!1},_buildCacheKey:function(e){return"string"==typeof e?e:$.param(e)},putToCache:function(t,n,i){var o=e[t.cacheGroup]||(e[t.cacheGroup]={keys:[],data:{}});o.keys.length>=t.cacheSize&&delete o.data[o.keys.shift()];var r=this._buildCacheKey(n,t);o.data[r]=i,o.keys.push(r)},dropCache:function(){delete e[this.params.cacheGroup]},getDefaultParams:function(){return{cache:!1,cacheGroup:"default",cacheSize:100,callbackCtx:this}}})}(),BEM.decl({block:"i-request_type_ajax",baseBlock:"i-request"},{onSetMod:{js:function(){this.__base(),this._requestNumber=this._number=this._preventNumber=this._retryCount=0}},_get:function(e,t,n,i){this._number++,this._requestNumber++,this._retryCount=i.retryCount,this.__base.apply(this,arguments)},_do:function(e,t,n,i){var o=this;if(o._number>o._preventNumber){var r=arguments,a={data:i.data?$.extend({},i.data,e):e},s=o._wrapCallback(function(n,r,a){o._onSuccess(o._buildCacheKey(e,i),e,n[0],i),o._allowCallback(r,a)&&t.apply(i.callbackCtx,n)}),l=o._wrapCallback(function(e,t,a){o._allowCallback(t,a)&&(o._retryCount-->0?setTimeout(function(){o._do.apply(o,r)},i.retryInterval):n&&n.apply(i.callbackCtx,e))});$.each(["url","dataType","timeout","type","jsonp","jsonpCallback"].concat(i.paramsToSettings||[]),function(e,t){a[t]=i[t]}),$.ajax(a).done(s).fail(l)}},_wrapCallback:function(e){var t=this._requestNumber,n=this._number;return function(i){null!==i&&e(arguments,t,n)}},_allowCallback:function(e,t){return t>this._preventNumber&&this._requestNumber==e},_buildCacheKey:function(e,t){return"string"==typeof e?e:this.__base(e)+t.url},abort:function(){this._preventNumber=++this._number},preventCallbacks:function(){this.abort()},getDefaultParams:function(){return $.extend(this.__base(),{cache:!0,type:"GET",dataType:"jsonp",timeout:2e4,retryCount:0,retryInterval:2e3})}}),function(e){var t,n=BEM.HTML,i=BEM.DOM;e(function(){e(window).bind("focus",function(){t=document.activeElement})}),i.decl({name:"b-form-input",modName:"autocomplete",modVal:"yes"},{onSetMod:{js:function(){var t=this;t.params.foot&&(t.foot=t.params.foot),t._preventRequest=!0,t.__base.apply(t,arguments),t._userVal=t.val();var n=t._focused;n&&t.delMod("focused"),t.elem("input").attr("autocomplete","off"),t._preventRequest=!1,n&&t.setMod("focused","yes"),t._items=[],t._curItemIndex=-1,t._doRequest=e.debounce(t._doRequest,t.params.debounceDelay)},focused:{yes:function(){this.__base();var e=this.params.showListOnFocus?this._onChange():this._onChange;this.on("change",e)},"":function(){this.__base(),this.un("change",this._onChange)._preventHide||this._getPopup().hide()}}},getDataprovider:function(){return this._dataprovider||(this._dataprovider=BEM.create(this.params.dataprovider.name||this.__self.getName()+"__dataprovider",e.extend(this.params.dataprovider,{callbackCtx:this})))},_onChange:function(){return t===this.elem("input")[0]?t=null:this._preventRequest||this._doRequest(),this._onChange},_onKeyDown:function(e){if(38==e.keyCode||40==e.keyCode){e.preventDefault();var t=this._items.length;if(t){var n=e.keyCode-39,i=this._curItemIndex,o=0;do i+=n,i=0>i?t-1:i>=t?0:i;while(this._onEnterItem(this._items[i],!0)===!1&&++o<t)}}},_onKeyPress:function(e){13==e.keyCode&&this._curItemIndex>-1&&this._isCurItemEnteredByKeyboard&&(e.preventDefault(),this._onSelectItem(this._items[this._curItemIndex],!0))},_getPopup:function(){var t=this;if(!t._popup){var i=e.browser.opera?"keypress":"keydown",o=t.__self.getName(),r=[{elem:"items",tag:"ul",mix:[{block:o,elem:"popup-items"}]},{block:"b-form-input",elem:"shadow",tag:"i"}];t._hasPopupFade()&&r.push({block:o,elem:"fade"}),t._popup=e(n.build({block:"i-popup",mix:[{block:o,elem:"popup",mods:t.params.popupMods}],content:r})).bem("i-popup").on({show:function(){t.bindTo("keypress",t._onKeyPress).bindTo(i,t._onKeyDown).bindToWin("resize",t._updatePopupPos)},"outside-click":function(n,i){t.containsDomElem(e(i.domEvent.target))&&n.preventDefault()},hide:function(){t.unbindFrom("keypress "+i).unbindFromWin("resize")._curItemIndex=-1}}),e.each({mouseover:t._onEnterItem,mouseout:t._onLeaveItem,mousedown:t._onSelectItem},function(e,n){BEM.blocks["b-autocomplete-item"].on(t._popup.domElem,e,function(e){n.call(t,e.block)})})}return t._popup},_hasPopupFade:function(){return"yes"==(this.params.popupMods||{}).fade},_updatePopupPos:function(){var e=this.elem("box"),t=e.offset();t.top+=e.outerHeight(),this._hasPopupFade()&&(t.width=e.outerWidth()),this._getPopup().show(t)},_onEnterItem:function(e,t){if(e.hasMod("enterable","no"))return!1;var n=this._items,i=this._curItemIndex;i>-1&&n[i].delMod("hovered"),i=this._getItemIndex(e),i>-1&&n[i].setMod("hovered","yes"),this._curItemIndex=i,this._isCurItemEnteredByKeyboard=!!t,t&&this.params.updateOnEnter&&(this._preventRequest=!0,this.val(e.enter()!==!1?e.val():this._userVal,{source:"autocomplete",itemIndex:this._curItemIndex}).del("_preventRequest"))},_onLeaveItem:function(e){var t=this._curItemIndex;t>-1&&t==this._getItemIndex(e)&&(this._items[t].delMod("hovered"),this._curItemIndex=-1)},_onSelectItem:function(e,t){if(e.hasMod("enterable","no"))return this.afterCurrentEvent(function(){this.setMod("focused","yes")});var n=e.select(t||!1)!==!1;this._preventRequest=!0,n&&this.val(this._userVal=e.val(),{source:"autocomplete",itemIndex:this._curItemIndex})._getPopup().hide(),t?this.del("_preventRequest"):(n||(this._preventHide=!0),this.afterCurrentEvent(function(){this.setMod("focused","yes").del("_preventRequest","_preventHide")})),n&&this.trigger("select",{item:e,byKeyboard:t})},_getItemIndex:function(t){return e.inArray(t,this._items)},_doRequest:function(){var t=this;t._userVal=t.val(),t.trigger("data-requested").getDataprovider().get(t.val(),function(n){t.trigger("data-received",n);var o=t._getPopup(),r=n.items||n;t.foot&&r.length&&-1==e.inArray(t.foot,r)&&r.push(t.foot),r.length?(t._curItemIndex=-1,i.update(o.elem("items"),t._buildItemsHtml(r),function(){t._updatePopupPos(),t._items=o.findBlocksInside("b-autocomplete-item"),t.trigger("update-items")})):o.hide()})},_buildItemsHtml:function(t){return n.build(e.map(t,function(t){return{block:"b-autocomplete-item",data:t,mods:{type:e.isArray(t)?t[0]:"text"}}}))},setFoot:function(e){return this.foot=e},getDefaultParams:function(){return e.extend(this.__base(),{updateOnEnter:!0,debounceDelay:50,showListOnFocus:!0})}})}(jQuery),BEM.DOM.decl({name:"b-form-input",modName:"autocomplete",modVal:"yes"},{_buildItemsHtml:function(e){return BEM.HTML.build($.map(e,function(e){return{block:"b-autocomplete-item",data:e,mods:{type:"quick-search"}}}))}}),BEM.decl({name:"b-form-input__dataprovider",baseBlock:"i-request_type_ajax"},{get:function(e,t){return this.__base({part:e},function(e){t.call(this,{items:e[1],metainfo:e[2]})})}}),function(e){function t(){return r.length?r.shift():o?o.clone():o=i()}function n(e){r.push(e)}function i(){return e((a.safari||a.webkit)&&navigator.userAgent.toLowerCase().indexOf("mobile")>-1?"<div/>":"<iframe"+(a.msie&&a.version<9?' frameborder="0"':"")+"/>")}var o,r=[],a=e.browser;BEM.DOM.decl("i-popup",{onSetMod:{visibility:{visible:function(){var e=this._getUnder(),t=e.parent();this.hasMod(e,"type","paranja")?t.is("body")||e.appendTo("body"):t[0]!==this.domElem[0]&&e.prependTo(this.domElem),this._inBody||(this._inBody=!!this.domElem.appendTo("body")),this.trigger("show")},"":function(){var e=this._getUnder();this.hasMod(e,"type","paranja")&&e.remove(),this._putUnder(),this.trigger("hide")}}},_getUnder:function(){return this._under||(this._under=t().attr("class",this._underClass||(this._underClass=this.findElem("under").remove().attr("class"))))},_putUnder:function(){n(this._under),delete this._under},show:function(e){return e&&this.domElem.css(e),this.setMod("visibility","visible")},hide:function(){return this.delMod("animate").delMod("visibility")}},{live:!0})}(jQuery),BEM.HTML.decl("i-popup",{onBlock:function(e){e.mod("autoclosable","yes").js(!0).wrapContent({elem:"content"}).afterContent({elem:"under",mods:e.param("underMods"),mix:e.param("underMix")}).param("zIndex")&&e.attr("style","z-index:"+(32700+e.param("zIndex")))}}),function(e){var t=e.browser.opera&&e.browser.version<12.1?"keypress":"keydown";BEM.DOM.decl({name:"i-popup",modName:"autoclosable",modVal:"yes"},{onSetMod:{visibility:{visible:function(){this.afterCurrentEvent(function(){if(this.hasMod("visibility","visible")){var n=this._under;this.bindToDoc("leftclick",function(t){this.containsDomElem(e(t.target))||this._onOutClick(t)}).bindToDoc(t,function(e){27==e.keyCode&&this.hide()}),n&&n.is("iframe")&&this.hasMod(n,"type","paranja")&&this.bindToDomElem(e([n[0].contentWindow,n[0].contentWindow.document]),"leftclick",this.hide)}}),this.__base.apply(this,arguments)},"":function(){return this.unbindFromDoc("leftclick "+t).__base.apply(this,arguments)}}},_onOutClick:function(t){var n=e.Event("outside-click");this.trigger(n,{domEvent:t}),n.isDefaultPrevented()||this.hide()}})}(jQuery),BEM.decl("util",{},{getLocationSearchParamByName:function(e){var t=RegExp(e+"="+"(.+?)(&|$)").exec(location.search);return t&&t[1]?decodeURI(t[1]):void 0},getLocationHashParamByName:function(e){var t=RegExp(e+"="+"(.+?)(&|$)").exec(location.hash);return t&&t[1]?decodeURI(t[1]):void 0},getUrlParamByName:function(e){var t=[],n=this.getLocationSearchParamByName(e),i=this.getLocationHashParamByName(e);return n&&t.push(n),i&&t.push(i),t},parseParam:function(e){return"?"==e[0]&&(e=e.substr(1)),paramsObj={},e.split("&").forEach(function(e){var t=e.split("=");paramsObj[t[0]]=t[1]}),paramsObj},shuffleArray:function(e){var t,n,i,o=[].concat(e),r=o.length;if(0===r)return!1;for(;--r;)t=Math.floor(Math.random()*(r+1)),n=o[r],i=o[t],o[r]=i,o[t]=n;return o},capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},cleverSubstring:function(e,t,n){var i="";return e.length>t+n?e.substring(0,t-1)+i:e},isValidMail:function(e){var t=/^[-a-z0-9!#$%&'*+/=?^_`{|}~]+(\.[-a-z0-9!#$%&'*+/=?^_`{|}~]+)*@([a-z0-9]([-a-z0-9]{0,61}[a-z0-9])?\.)*(aero|arpa|asia|biz|cat|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel|[a-z][a-z])$/;return t.test(e)},escapeHTML:function(){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return function(t){return t?String(t).replace(/&(?!\w+;)|[<>"']/g,function(t){return e[t]||t}):""}}()}),BEM.DOM.decl("b-autocomplete-item",{val:function(){return this.params.val||this.elem("text").text()||this.domElem.text()},enter:function(){},select:function(){}},{live:function(){this.liveBindTo("mouseover mouseout mousedown",function(e){this.trigger(e.type)})}}),BEM.HTML.decl("b-autocomplete-item",{onBlock:function(e){var t,n,i=e.param("data");$.isArray(i)?($.isPlainObject(t=i.concat().pop())&&e.params($.extend(e.params(),t)),n=BEM.blocks.util.escapeHTML(i[1])):n=BEM.blocks.util.escapeHTML(i),$.isArray(e.param("search_cgi"))&&e.js({cgi:e.param("search_cgi")}),e.tag("li").mod("pers",e.param("pers")?"yes":!1).content(n).js(!0)}}),BEM.HTML.decl({block:"b-autocomplete-item",modName:"type",modVal:"hl"},{onBlock:function(e){e.content($.map(e.param("data").slice(1),function(e){return $.isArray(e)?{tag:"span",elem:"highlight",content:e[0]}:e}))}}),BEM.HTML.decl({block:"b-autocomplete-item",modName:"type",modVal:"fact"},{onBlock:function(e){var t=e.param("data").slice(1);e.content([{tag:"span",elem:"text",content:BEM.blocks.util.escapeHTML(t[0])},{tag:"span",elem:"fact",content:["  ",BEM.blocks.util.escapeHTML(t[1])]}])}}),BEM.DOM.decl({block:"b-autocomplete-item",modName:"type",modVal:"nav"},{enter:function(){return!1},select:function(e){return e&&$('<form style="display:none" action="'+this.val()+'" target="_blank"/>').appendTo("body").submit().remove(),{needEvent:!0}}}),BEM.HTML.decl({block:"b-autocomplete-item",modName:"type",modVal:"nav"},{onBlock:function(e){var t=e.param("data"),n=4==e.param("suggestVersion"),i=t[4]||t[3],o=(i.match(/^\w[\w-]*:\/\//g)?"":"http://")+i;e.js({val:o}).content({elem:"link",url:o,title:n?t[3]:t[2],description:n?t[2]:t[1]})},onElem:{link:function(e){e.tag("a").attrs({href:e.param("url"),target:"_blank"}).content([{elem:"link-url",tag:"span",content:BEM.blocks.util.escapeHTML(e.param("title"))},{elem:"link-info",tag:"span",content:"&nbsp;&mdash; "+BEM.blocks.util.escapeHTML(e.param("description"))}])}}}),BEM.HTML.decl({block:"b-autocomplete-item",modName:"type",modVal:"nah"},{onBlock:function(e){e.content(e.param("data")[1])}}),BEM.DOM.decl({block:"b-autocomplete-item",modName:"type",modVal:"foot"},{select:function(){return!1}}),BEM.HTML.decl({block:"b-autocomplete-item",modName:"type",modVal:"foot"},{onBlock:function(e){e.mod("enterable","no").content($.map(e.param("data").slice(1),function(e){return $.isArray(e)?{tag:"span",elem:"foot",content:e[0]}:e}))}}),BEM.DOM.decl({block:"b-autocomplete-item",modName:"type",modVal:"href"},{url:function(){return this.findBlockInside("b-link").domElem.attr("href")},enter:function(){return!1},select:function(e){return e&&(location.href=this.url()),!1}}),BEM.HTML.decl({block:"b-autocomplete-item",modName:"type",modVal:"href"},{onBlock:function(e){var t=e.param("data").slice(1);e.content({block:"b-link",content:t[0],url:t[1]})}}),BEM.DOM.decl({block:"b-autocomplete-item",modName:"type",modVal:"quick-search"},{enter:function(){return!1},select:function(e){return e&&document.location.replace(this.val()),!1}}),BEM.HTML.decl({block:"b-autocomplete-item",modName:"type",modVal:"quick-search"},{onBlock:function(e){var t=e.param("data"),n=t.id,i="http://"+BEM.blocks["i-global"].param("airomo-host")+"/apps/"+n;e.js({val:i}).content({elem:"link",url:i,title:t.title,icon:t.icon})},onElem:{link:function(e){e.tag("a").attrs({href:e.param("url")}).content([{elem:"icon",tag:"img",attrs:{src:BEM.blocks.util.escapeHTML(e.param("icon"))}},{elem:"link-url",mix:[{block:"b-link"}],tag:"span",content:BEM.blocks.util.escapeHTML(e.param("title"))}])}}}),BEM.DOM.decl({name:"b-form-input",modName:"has-clear",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.on("change",this._updateClear)._updateClear()}},_onClearClick:function(){this.trigger("clear"),this.removeInsets&&this.removeInsets(),this.val("").setMod("focused","yes")},_updateClear:function(){return this.toggleMod(this.elem("clear"),"visibility","visible","",!!this._val)}},{live:function(){return this.__base(),this.liveBindTo("clear","leftclick",function(){this._onClearClick()}),!1}}),BEM.DOM.decl("b-form-button",{onSetMod:{js:function(){var e=this.isDisabled();(this._href=this.domElem.attr("href"))&&e&&this.domElem.removeAttr("href"),this.elem("input").attr("disabled",e)},focused:{yes:function(){if(this.isDisabled())return!1;var e=this;e.bindTo("keydown",this._onKeyDown).elem("input").focus(),e._unloadInited||(e._unloadInited=$(window).bind("unload",function(){e.delMod("focused")}))},"":function(){this.unbindFrom("keydown").elem("input").blur()}},disabled:function(e,t){var n="yes"==t;this.elem("input").attr("disabled",n),this._href&&(n?this.domElem.removeAttr("href"):this.domElem.attr("href",this._href)),n&&this.domElem.keyup()},pressed:function(e,t){this.isDisabled()||this.trigger("yes"==t?"press":"release")},hovered:{"":function(){this.delMod("pressed")}},"*":function(e){return this.isDisabled()&&"hovered pressed".indexOf(e)>-1?!1:void 0}},isDisabled:function(){return this.hasMod("disabled","yes")},url:function(e){return"undefined"==typeof e?this._href:(this._href=e,this.isDisabled()||this.domElem.attr("href",e),this)},_onKeyDown:function(e){var t=e.keyCode;13!=t&&32!=t||this._keyDowned||(this._keyDowned=!0,this.setMod("pressed","yes").bindTo("keyup",function(){this.delMod("pressed").unbindFrom("keyup"),delete this._keyDowned,32==t&&this.domElem.attr("href")&&(document.location=this.domElem.attr("href"))}))},_onClick:function(e){this.isDisabled()?e.preventDefault():this.afterCurrentEvent(function(){this.trigger("click")})}},{live:function(){var e={mouseover:{name:"hovered",val:"yes"},mouseout:{name:"hovered"},mousedown:{name:"pressed",val:"yes"},mouseup:{name:"pressed"},focusin:{name:"focused",val:"yes"},focusout:{name:"focused"}};this.liveBindTo("leftclick",function(e){this._onClick(e)}).liveBindTo("mouseover mouseout mouseup focusin focusout",function(t){var n=e[t.type];this.setMod(n.name,n.val||"")}).liveBindTo("mousedown",function(t){var n=e[t.type];1==t.which&&this.setMod(n.name,n.val||"")})}}),BEM.HTML.decl("b-form-button",{onBlock:function(e){e.tag(e.param("url")?"a":"span").attrs({href:e.param("url"),target:e.param("target")}).mods({size:e.mod("size"),theme:e.mod("theme")}).content([{elem:"left",tag:"i"},{elem:"content",tag:"span",content:{elem:"text",tag:"span",content:e.content()}}],!0).afterContent(e.param("type")?{elem:"input",attrs:{value:"",type:e.param("type"),disabled:e.mod("disabled")&&"disabled"}}:{elem:"click"}).js(!0)},onElem:{input:function(e){e.tag("input")},click:function(e){e.tag("i")}}}),BEM.HTML.decl("progress",{onBlock:function(e){e.content([{elem:"caption",content:e.content()},{elem:"canvas",content:{elem:"bar"}}],!0)}}),BEM.DOM.decl("appcurl-lang-switcher",{onSetMod:{js:function(){this.setMod("enabled","no"),this.bindTo(this.elem("option","pos","first"),"click",function(){this.toggleMod("enabled","yes","no")})}}}),BEM.DOM.decl("serp",{onSetMod:{js:function(){var e=this,t=BEM.blocks["i-location"].get(),n=t.getState().params,i=n.q;BEM.blocks["appcurl-api"].getCategories(function(o){e._categories=o,i&&e.renderSerp(i,n),t.on("change",function(t,n){n.params.q&&e.renderSerp(n.params.q,n.params)})})}},renderSerp:function(e,t){e=e||t.q||"";var n=this,i=this.findBlockOutside("b-page"),o=i.findBlockInside("progress"),r=10,a=+t.p||1,s={tags:t.tag,platforms:t.platform,price:t.price,categories:t.categories,rating:t.rating,order:t.order,stores:t.stores},l=$.extend({page:a,withFacets:!0,withLikes:!0},s),c=$.cookie("appcurl_search_params");c&&(l=$.extend(BEM.blocks.util.parseParam(c.replace(/\+/g," ").replace(/%2C/g,",")),l)),c&&BEM.blocks["i-location"].get().change({params:l,history:!1,__needTrigger:!1}),i.setMod("mode","serp"),i.findBlockInside("appcurl-logo").setMod("type","serp"),o.setMod("state","active"),this.setMod("visibility","visible"),BEM.blocks["appcurl-api"].search(e,l,function(t){o.delMod("state");var i=[];return n.renderStatistics(e,t.total,t.totalByTitle),t.total?(t.result.forEach(function(t){i.push(n._getAppBemJson(t,e))}),BEM.DOM.update(n.elem("apps"),BEM.HTML.build(i)),n.renderPaginator(e,t.result.length?t.total:void 0,r,a),void 0):($.cookie("appcurl_search_params",$.param($.extend(BEM.blocks.util.parseParam(c),{page:1}))),n.renderEmptyResult(e),n.renderPaginator(),void 0)})},renderStatistics:function(e,t,n){var i=t?[t+" "+(1==t?BEM.I18N("serp","app"):BEM.I18N("serp","apps"))+BEM.I18N("serp","found and"),{tag:"span",content:n+" "+BEM.I18N("serp","apps")}," "+BEM.I18N("serp","with")+" ",{tag:"strong",content:BEM.blocks.util.escapeHTML(e)}," "+BEM.I18N("serp","in the title.")]:"";BEM.DOM.update(this.elem("statistics"),BEM.HTML.build(i))},renderEmptyResult:function(e){var t=[{block:"app",mods:{type:"empty"},content:{elem:"description",content:[{content:BEM.I18N("serp","your search")+BEM.blocks.util.escapeHTML(e)+BEM.I18N("serp","did not match any apps")},{content:BEM.I18N("serp","suggestions")},{tag:"ul",content:[{tag:"li",content:BEM.I18N("serp","make sure all words are spelled correctly")},{tag:"li",content:BEM.I18N("serp","try different or more general keywords")},{tag:"li",content:BEM.I18N("serp","try wild card search")},{tag:"li",content:BEM.I18N("serp","try keywords in phrase within quotes")}]},{content:[BEM.I18N("serp","still not sure what you are looking for"),{block:"b-link",url:"http://"+BEM.blocks["i-global"].param("appcurl-host")+"/explore/",content:"Explore Interface"}]}]}}];BEM.DOM.update(this.elem("apps"),BEM.HTML.build(t))},renderPaginator:function(e,t,n,i){var o=this.findBlockInside("paginator");return!t||n>=t?(o.delMod("visibility"),void 0):(BEM.DOM.update(o.domElem,BEM.blocks.paginator.getPaginatorHtml(e,t,n,i)),o.setMod("visibility","visible"),void 0)},_getAppBemJson:function(e,t){var n=this,i=[],o=e.categories,r=function(e){return{block:"b-link",url:"http://"+BEM.blocks["i-global"].param("appcurl-host")+"/explore/?categories="+e,mix:[{block:"app",elem:"category"}],content:BEM.I18N("serp-filter",n._categories[e])||n._categories[e]}};if(2==o.length&&o.indexOf("6")>-1){o.splice(o.indexOf("6"),1);var a=o[0];i=[r(6)," | ",r(a)]}else o.forEach(function(e,t){i.push(r(e)),t<o.length-1&&i.push(", ")});var s=2==e.store?"&utm_source=airomo&utm_medium=airomo_web&utm_campaign=airomo_web":"",l=new RegExp(t,"ig"),c=e.description.replace(l,function(e){return BEM.HTML.build({block:"highlight",tag:"span",content:e})}),u=$("<div>").html(e.title).text(),d=e.hasFeeds?{block:"b-dropdowna",mix:[{block:"feed",mods:{target:"app"},js:{appId:e.id}}],content:[{elem:"switcher",content:{block:"b-link",mods:{pseudo:"yes"},mix:[{block:"feed",elem:"button"}],content:BEM.I18N("serp","feed")}},{block:"b-popupa",mods:{direction:"down"},content:[{elem:"tail"},{elem:"content",content:{block:"b-menu",mods:{layout:"vert"},mix:[{block:"b-dropdowna",elem:"menu"}]}}]}]}:"",h=e.store>1?{block:"b-link",url:e.nativeUrl+s,mix:[{block:"app",elem:"android-store",mods:{store:2==e.store?"google-play":3==e.store?"amazon":"nook"}}]}:"";return{block:"app",js:{appId:e.id},content:[{elem:"left",content:[{block:"b-link",url:"http://"+BEM.blocks["i-global"].param("airomo-host")+"/apps/"+e.id,content:{block:"app",elem:"icon",tag:"img",attrs:{src:e.icon},alt:u}},{block:"rating",mods:{type:"readonly",rating:BEM.blocks.rating.getNormalizedRating(e.rating)},attrs:{title:e.rating}}]},{block:"b-link",url:e.nativeUrl+s,mix:[{block:"app",elem:"store",mods:{platform:1==e.platform?"iphone":"android",price:e.price?"paid":"free"}}]},{elem:"price",content:e.price?"$"+e.price:BEM.I18N("serp-filter","free")},h,{block:"b-link",url:"http://"+BEM.blocks["i-global"].param("airomo-host")+"/apps/"+e.id,mix:[{block:"app",elem:"title"}],content:u},BEM.HTML.build(i),{elem:"description",content:c},d,{elem:"popularity-index",tag:"span",content:e.pi.toFixed(1)},{block:"app-social",content:[{elem:"likes",tag:"span",content:{elem:"number",tag:"span",content:e.likes.totalLikes}},{elem:"comments",tag:"span",content:{elem:"number",tag:"span",content:e.reviewCounts}}]}]}}}),BEM.DOM.decl("feed",{_getFeedBemJson:function(e){var t=this,n=[];return e.forEach(function(e,i){var o=e.type,r=["like","share","review","comment","question","first_sync","install_apps"],a="";if(r.indexOf(o)>-1){var s={first_sync:"firstSync",install_apps:"installApps"};o=s[o]||o,a=t["get"+BEM.blocks.util.capitalize(o)+"FeedItemBemJson"](e,i,o)}else t.getCommentFeedItemBemJson(e,i,o);n.push(a)}),n},getLikeFeedItemBemJson:function(e,t){var n=this._getCommonItemBemJson(e,t);return n.content.push({elem:"item-date",content:this._getFeedItemDate(e.date)},{block:"b-link",mix:[{block:"feed",elem:"item-icon-link"}],url:this.getAppLink(e.appId),content:{block:"feed",elem:"item-icon",tag:"img",attrs:{src:this._getIcon(e)}}},{elem:"item-info",content:{elem:"item-content",content:["I like ",{block:"b-link",url:this.getAppLink(e.appId),content:e.appName}]}}),n},getShareFeedItemBemJson:function(e,t){var n=this._getCommonItemBemJson(e,t);return n.content.push({elem:"item-date",content:this._getFeedItemDate(e.date)},{block:"b-link",mix:[{block:"feed",elem:"item-icon-link"}],url:this.getAppLink(e.appId),content:{block:"feed",elem:"item-icon",tag:"img",attrs:{src:this._getIcon(e)}}},{elem:"item-info",content:{elem:"item-content",content:["I shared ",{block:"b-link",url:this.getAppLink(e.appId),content:e.appName}," with my friends"]}}),n},getReviewFeedItemBemJson:function(e,t){var n=this._getCommonItemBemJson(e,t);return n.content.push({elem:"item-row",mix:[{block:"clearfix"}],content:[{block:"rating",mods:{size:"s",type:"readonly",rating:BEM.blocks.rating.getNormalizedRating(e.rating)},attrs:{title:e.rating}},{elem:"item-date",content:this._getFeedItemDate(e.date)}]},{block:"b-link",mix:[{block:"feed",elem:"item-icon-link"}],url:this.getAppLink(e.appId),content:{block:"feed",elem:"item-icon",tag:"img",attrs:{src:this._getIcon(e)}}},{elem:"item-info",content:[{block:"b-link",mix:[{block:"feed",elem:"item-title"}],url:this.getAppLink(e.appId),content:e.appName},{elem:"item-content",content:BEM.blocks.util.escapeHTML(e.comment)}]}),n},getCommentFeedItemBemJson:function(e,t,n){var i=this._getCommonItemBemJson(e,t),o="";return e.appId&&(o={block:"b-link",mix:[{block:"feed",elem:"item-icon-link"}],url:this.getAppLink(e.appId),content:{block:"feed",elem:"item-icon",tag:"img",attrs:{src:this._getIcon(e)}}}),i.content.push({elem:"item-date",content:this._getFeedItemDate(e.date)},o,{elem:"item-info",content:[{block:"b-link",mix:[{block:"feed",elem:"item-title"}],url:this.getAppLink(e.appId),content:e.appName},{elem:"item-content",content:"comment"==n||"question"==n?BEM.blocks.util.escapeHTML(e.comment):e.comment}]}),i},getQuestionFeedItemBemJson:function(e,t){return this.getCommentFeedItemBemJson(e,t)},getFirstSyncFeedItemBemJson:function(e,t){var n=e.apps&&e.apps.length?" with "+e.apps.length+" apps":"";return e.comment="Added a new "+(e.platform&&2==e.platform?"Android":"Apple")+" device"+n,this.getCommentFeedItemBemJson(e,t)},getInstallAppsFeedItemBemJson:function(e,t){e.comment=["Installed "];for(var n,i=this,o=e.apps||[],r=5,a=function(e,t){t.push({block:"b-link",mix:[{block:"feed",elem:"item-title"}],url:i.getAppLink(e.id),content:e.title})},s=Math.min(o.length,r),t=0;s>t;t++)n=o[t],t>0&&e.comment.push(", "),a(n,e.comment);if(1===o.length-s)n=o[s],e.comment.push(", "),a(n,e.comment);else if(s<o.length){for(var l=[],t=s;t<o.length;t++)n=o[t],l.push(", "),a(n,l);e.comment.push({block:"more",js:!0,tag:"span",content:[{elem:"and",content:[" and ",{block:"b-link",mods:{pseudo:"yes"},content:o.length-s+" more apps"}],tag:"span",mix:[{block:"b-link",modName:"pseudo",modVal:"yes"}]},{elem:"hidden",tag:"span",mods:{visibility:"hidden"},content:BEM.HTML.build(l)}]})}return this.getCommentFeedItemBemJson(e,t)},getEmptyUserFeedBemJson:function(){return{block:"feed",elem:"no-feed"}},getEmptyPublicFeedBemJson:function(e){var t=BEM.blocks.util.escapeHTML;return{block:"feed",elem:"no-feed",content:[{content:t(e.username)+" has no public activity yet."},{content:"Follow "+t(e.username)+" to get notified."}]}},_getCommonItemBemJson:function(e,t){return{block:"feed",elem:"item",mods:{type:e.type,pos:t%2?"even":"odd"},mix:[{block:"clearfix"}],content:[]}},_getFeedItemDate:function(e){var t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return e=new Date(e),e.getDate()+" "+t[e.getMonth()]+" "+e.getFullYear()},getAppLink:function(e){return"http://"+BEM.blocks["i-global"].param("airomo-host")+"/apps/"+e}}),BEM.DOM.decl({block:"b-form-button",modName:"theme"},{onSetMod:{js:function(){this.__base(),this.hasMod("theme","following")&&this.onFollowing(),this.hasMod("theme","follow")&&this.onFollow(),this.hasMod("theme","block")&&this.onBlock(),this.hasMod("theme","unblock")&&this.onUnblock(),(this.hasMod("theme","block")||this.hasMod("theme","unblock"))&&(this.on("block",this.onTriggerBlock),this.on("unblock",this.onTriggerUnblock))},theme:{follow:function(){this.onFollow()},following:function(){this.onFollowing()},block:function(){this.onBlock()},unblock:function(){this.onUnblock()}},hovered:{yes:function(){this.hasMod("theme","following")&&this.elem("text").text("Unfollow"),this.hasMod("theme","block")&&this.elem("text").text("Unblock"),this.hasMod("theme","unblock")&&this.elem("text").text("Block")},"":function(){this.hasMod("theme","following")&&this.elem("text").text("Following"),this.hasMod("theme","block")&&this.elem("text").text("Block"),this.hasMod("theme","unblock")&&this.elem("text").text("Unblock")}}},onFollow:function(){var e=this;this.unbindFrom("click.following"),this.bindTo("click.following",function(){airomo.users.follow(this.params.userId,function(){e.setMod("theme","following"),e.elem("text").text("Following")})})},onFollowing:function(){var e=this;this.unbindFrom("click.following"),this.bindTo("click.following",function(){this.params.userId,airomo.users.unfollow(this.params.userId,function(){e.setMod("theme","follow"),e.elem("text").text("Follow")})})},onBlock:function(){var e=this;this.unbindFrom("click.block"),this.bindTo("click.block",function(){var t=e.params.userId;airomo.users.blockUser(t,function(){e.setMod("theme","unblock"),e.elem("text").text("Unblock"),e.trigger("unblock",{userId:t})})})},onUnblock:function(){var e=this;this.unbindFrom("click.unblock"),this.bindTo("click.unblock",function(){var t=e.params.userId;airomo.users.unBlockUser(t,function(){e.setMod("theme","block"),e.elem("text").text("Block"),e.trigger("block",{userId:t})})})},onTriggerBlock:function(e,t){var n=this.params.userId;n==t.userId&&this.hasMod("theme","unblock")&&(this.setMod("theme","block"),this.elem("text").text("Block"))},onTriggerUnblock:function(e,t){var n=this.params.userId;
n==t.userId&&this.hasMod("theme","block")&&(this.setMod("theme","unblock"),this.elem("text").text("Unblock"))}}),BEM.DOM.decl("rating",{},{getNormalizedRating:function(e){return Math.floor(e)+""+(Math.round(10*(e%1))>=5?"5":"0")}}),BEM.DOM.decl("more",{onSetMod:{js:function(){var e=this,t=this.findBlockInside({block:"b-link",modName:"pseudo",modVal:"yes"});t.on("click",function(){e.delMod(e.elem("hidden"),"visibility"),e.setMod(e.elem("and"),"visibility","hidden")})}}}),BEM.DOM.decl({block:"feed",modName:"target",modVal:"app"},{_getIcon:function(e){return e.userIcon}}),BEM.DOM.decl({block:"feed",modName:"target",modVal:"app"},{onSetMod:{js:{inited:function(){var e=this;this.bindTo(this.elem("button"),"click",function(){BEM.blocks["appcurl-api"].getAppFeed(e.params.appId,function(t){e.renderFeed(t)})})}}},renderFeed:function(e){var t=this._getFeedBemJson(e);BEM.DOM.update(this.findBlockInside("b-dropdowna").getPopup().findBlockInside("b-menu").domElem,BEM.HTML.build(t))}}),BEM.DOM.decl("paginator",{onSetMod:{js:function(){var e=BEM.blocks["i-location"].get();BEM.blocks["b-link"].on(this.domElem,"click",function(t){var n=t.block;e.change({params:{p:n.params.page}})})}}},{getPaginatorHtml:function(e,t,n,i){var o={block:"paginator",elem:"inner",content:[]},r=10,i=i||1,a=parseInt(t/n),s={block:"paginator",elem:"more",tag:"span",content:""};t%n&&a++,a>30&&(a=30),i>1&&o.content.push({block:"b-link",js:{page:i-1},mods:{pseudo:"yes"},mix:[{block:"paginator",elem:"btn",mods:{type:"back"}}],url:"?q="+e+"&p="+(i-1),content:BEM.I18N("paginator","previous")}),i>6&&a>r&&o.content.push(s);for(var l=i>5?i-5:1;a>=l&&i-5+r>=l;l++)o.content.push({block:"b-link",js:{page:l},mods:{pseudo:"yes"},mix:[{block:"paginator",elem:"page",mods:{state:l==i?"current":void 0}}],url:"?q="+e+(l>1?"&p="+l:""),content:l});return a>i&&a>r&&o.content.push(s),a>i&&o.content.push({block:"b-link",js:{page:i+1},mods:{pseudo:"yes"},mix:[{block:"paginator",elem:"btn",mods:{type:"next"}}],url:"?q="+e+"&p="+(i+1),content:BEM.I18N("paginator","next")}),BEM.HTML.build(o)}}),BEM.DOM.decl({name:"b-link",modName:"pseudo",modVal:"yes"},{_onClick:function(e){e.preventDefault(),this.hasMod("disabled","yes")||this.afterCurrentEvent(function(){this.trigger("click")})}},{live:function(){this.__base.apply(this,arguments),this.liveBindTo({modName:"pseudo",modVal:"yes"},"leftclick",function(e){this._onClick(e)})}}),BEM.HTML.decl({name:"b-link",modName:"pseudo",modVal:"yes"},{onBlock:function(e){e.tag(e.param("url")?"a":"span"),e.wrapContent({elem:"inner"})},onElem:{inner:function(e){e.tag("span")}}}),function(e){BEM.DOM.decl("b-dropdowna",{onSetMod:{js:function(){this._getSwitcher().on("click",this._toggle,this)},disabled:function(e,t){this._getSwitcher().setMod(e,t),"yes"==t&&this.getPopup().hide()}},_getSwitcher:function(){return this._switcher||(this._switcher=this.findBlockInside("b-"+(this.getMod(this.elem("switcher"),"type")||"link")))},_toggle:function(){this.getPopup().toggle(this.elem("switcher"))},getPopup:function(){return this._popup||(this._popup=this.findBlockInside("b-popupa")).on("outside-click",function(t,n){this._getSwitcher().containsDomElem(e(n.domEvent.target))&&t.preventDefault()},this)},destruct:function(){var e=this._popup;e&&e.destruct.apply(e,arguments),this.__base.apply(this,arguments)}},{live:function(){this.liveInitOnEvent("switcher","leftclick",function(){})}})}(jQuery),BEM.HTML.decl("b-dropdowna",{onBlock:function(e){e.js(!0)}}),function(e){var t=["down-right","down","down-left","up","up-right","up-left","right-down","right","right-up","left-down","left","left-up"];BEM.DOM.decl("b-popupa",{onSetMod:{js:function(){this._owner=null,this._isShowed=!1,this._direction=this.getMod("direction")||"down",this._lastDirection=null,this._hasTail=!!this.elem("tail").length,this._hasTail||Object.keys(this.params).forEach(function(e){0===e.indexOf("tail")&&(this.params[e]=0)},this)}},show:function(e){return this._isShowed&&this._owner===e||(this._owner=e,this._getUnder().show({left:-1e4,top:-1e4}),this.pos(),this._getUnder().setMod("animate","yes")),this},hide:function(){return this._isShowed&&this._getUnder().hide(),this},toggle:function(e){return this.isShowed()?this.hide():this.show(e)},_pos:function(){var e=this._calcParams(this._owner);return this._hasTail&&this.elem("tail").css(e.tailOffsets),this.setMod("direction",e.direction)._getUnder().show(e.offsets),this},pos:function(){return this._isShowed?this._pos():this},isShowed:function(){return this._isShowed},setDirection:function(e){this._direction!=e&&(this._direction=e,this.isShowed()&&this.pos())},setContent:function(e,t,n){return BEM.DOM.update(this.elem("content"),e,t,n),this.isShowed()?this.pos():this},_isOwnerNode:function(){return!(!this._owner||!this._owner.jquery)},_calcDimensions:function(){var e=this._getUnder().domElem,t=this._getUnder()._getUnder(),n=this.__self.win,i=this._owner,o=this._isOwnerNode(),r=o?i.offset():i,a=o?i.outerWidth():0,s=o?i.outerHeight():0,l=n.scrollLeft(),c=n.scrollTop(),u=this.__self.getWindowSize(),d=parseInt(this.elem("content").css("border-top-width"),10);return{ownerWidth:a,ownerHeight:s,ownerLeft:r.left,ownerTop:r.top,ownerRight:r.left+a,ownerBottom:r.top+s,ownerHorizMiddle:r.left+a/2,ownerVertMiddle:r.top+s/2,posWidth:e.outerWidth(),posHeight:e.outerHeight(),underWidth:t.outerWidth(),underHeight:t.outerHeight(),borderWidth:isNaN(d)?0:d,windowLeft:l,windowRight:l+u.width,windowTop:c,windowBottom:c+u.height}},_calcParams:function(){var t=this._calcDimensions();if(this.hasMod("adjustable","no"))return this.calcDirectionParams(this._direction,t);var n={},i=this.params.directions,o=e.inArray(this._direction,i);o>-1||(o=0);var r,a,s=o;do{if(r=i[o],a=n[r]=this.calcDirectionParams(r,t),!a.factor)return this._lastDirection=r,a;++o==i.length&&(o=0)}while(o!==s);return n[this._lastDirection||i[0]]},calcDirectionParams:function(e,t){var n,i=this.params,o={top:0,left:0},r={marginLeft:0,marginTop:0},a=e.split("-")[0],s=this._hasTail&&t.ownerWidth<i.tailWidthVertical?(i.tailWidthVertical-t.ownerWidth)/2:0,l=this._hasTail&&t.ownerHeight<i.tailHeightHorizontal?(i.tailHeightHorizontal-t.ownerHeight)/2:0;switch(e){case"up":case"down":o.left=t.ownerHorizMiddle-t.posWidth/2,o.top="down"==e?t.ownerBottom+i.tailHeightVertical:t.ownerTop-t.posHeight-i.tailHeightVertical,r.marginLeft=t.posWidth/2-i.tailWidthVertical/2,r.marginTop="down"==e?0-i.tailHeightVertical:0;break;case"up-left":case"up-right":case"down-left":case"down-right":o.left="down-right"==e||"up-right"==e?t.ownerLeft-s:t.ownerRight-t.posWidth+s,o.top="down"==a?t.ownerBottom+i.tailHeightVertical:t.ownerTop-t.posHeight-i.tailHeightVertical,r.marginLeft=t.ownerWidth>t.posWidth?t.posWidth/2-i.tailWidthVertical/2:t.ownerHorizMiddle-o.left-i.tailWidthVertical/2,r.marginTop="down"==a?t.borderWidth-i.tailHeightVertical:0-t.borderWidth;break;case"left-down":case"right-down":o.left="left-down"==e?t.ownerLeft-t.posWidth-i.tailWidthHorizontal:t.ownerRight+i.tailWidthHorizontal,o.top=t.ownerTop-l,r.marginLeft="left-down"==e?0-t.borderWidth:t.borderWidth-i.tailWidthHorizontal,r.marginTop=t.ownerHeight<t.posHeight?t.ownerVertMiddle-o.top-i.tailHeightHorizontal/2:t.posHeight/2-i.tailHeightHorizontal/2;break;case"left":case"right":o.left="left"==e?t.ownerLeft-t.posWidth-i.tailWidthHorizontal:t.ownerRight+i.tailWidthHorizontal,o.top=t.ownerVertMiddle-t.posHeight/2,r.marginLeft="left"==e?0-t.borderWidth:t.borderWidth-i.tailWidthHorizontal,r.marginTop=t.posHeight/2-i.tailHeightHorizontal/2;break;case"left-up":case"right-up":o.left="left-up"==e?t.ownerLeft-t.posWidth-i.tailWidthHorizontal:t.ownerRight+i.tailWidthHorizontal,o.top=t.ownerBottom-t.posHeight+l,r.marginLeft="left"==a?0-t.borderWidth:t.borderWidth-i.tailWidthHorizontal,r.marginTop=t.ownerHeight>t.posHeight?t.posHeight/2-i.tailHeightHorizontal/2:t.ownerVertMiddle-o.top-i.tailHeightHorizontal/2}return n=this.calcInWindowFactor(o,t),{direction:a,factor:n,offsets:o,tailOffsets:r}},calcInWindowFactor:function(e,t){var n=0;return t.windowTop>e.top&&(n+=t.windowTop-e.top),e.top+t.underHeight>t.windowBottom&&(n+=e.top+t.underHeight-t.windowBottom),t.windowLeft>e.left&&(n+=t.windowLeft-e.left),e.left+t.underWidth>t.windowRight&&(n+=e.left+t.underWidth-t.windowRight),n},getDefaultParams:function(){return{tailOffset:19,tailWidthHorizontal:9,tailWidthVertical:19,tailHeightHorizontal:19,tailHeightVertical:10,shadowSize:7,directions:t}},destruct:function(){var e=this._under;e?this._destructing||(this._destructing=!0,this.hide(),BEM.DOM.destruct(!1,e.domElem),this.__base(!0)):this.__base.apply(this,arguments)},_getUnder:function(){if(!this._under){var t=e(BEM.HTML.build({block:"i-popup",zIndex:this.params.zIndex,mods:{autoclosable:this.getMod("autoclosable")||"yes",fixed:this.hasMod("direction","fixed")&&"yes"},underMods:this.params.underMods,underMix:[{block:"b-popupa",elem:"under"}]}));(this._under=this.findBlockOn(t,"i-popup")).on({show:this._onUnderShowed,hide:this._onUnderHidden,"outside-click":this._onUnderOutsideClicked},this).elem("content").append(this.domElem)}return this._under},_onUnderShowed:function(){this._isShowed=!0,this.bindToWin("resize",this.pos)._isOwnerNode()&&this.bindToDomElem(this._owner.parents().add(this.__self.win),"scroll",this.pos),this.trigger("show")},_onUnderHidden:function(){this._isShowed=!1,this.unbindFromWin("resize")._isOwnerNode()&&this.unbindFromDomElem(this._owner.parents().add(this.__self.win),"scroll"),this.trigger("hide")},_onUnderOutsideClicked:function(){this.trigger.apply(this,arguments)}},{live:function(){this.liveBindTo("close","leftclick",function(){this.hide()})}}),BEM.HTML.decl("b-popupa",{onBlock:function(t){var n=!1;e.each(t.param("content"),function(e,t){return!(n="close"==t.elem)}),t.mods({theme:"ffffff",direction:"down","has-close":n&&"yes"}).js(!0).afterContent({elem:"shadow"})},onElem:{content:function(e){e.wrap({elem:"wrap-cell",tag:"td"}).wrap({tag:"tr"}).wrap({elem:"wrap",tag:"table"})},close:function(e){e.tag("i")},shadow:function(e){e.tag("i")},tail:function(e){e.tag("i").wrapContent({elem:"tail-i",tag:"i"})}}})}(jQuery),BEM.DOM.decl("b-popupa",{calcDirectionParams:function(e,t){var n,i=this.params.sideSpacing,o=this.params,r={top:0,left:0},a={marginLeft:0,marginTop:0},s=e.split("-")[0],l=this._hasTail&&t.ownerWidth<o.tailWidthVertical?(o.tailWidthVertical-t.ownerWidth)/2:0,c=this._hasTail&&t.ownerHeight<o.tailHeightHorizontal?(o.tailHeightHorizontal-t.ownerHeight)/2:0;switch(e){case"up":case"down":r.left=t.ownerHorizMiddle-t.posWidth/2,r.top="down"==e?t.ownerBottom+o.tailHeightVertical:t.ownerTop-t.posHeight-o.tailHeightVertical,a.marginLeft=t.posWidth/2-o.tailWidthVertical/2,a.marginTop="down"==e?0-o.tailHeightVertical:0;break;case"up-left":case"up-right":case"down-left":case"down-right":r.left="down-right"==e||"up-right"==e?t.ownerLeft-l:t.ownerRight-t.posWidth+l,i&&r.left<i&&(r.left=i),i&&t.windowRight-r.left-t.posWidth<i&&(r.left=t.windowRight-t.posWidth-i),r.top="down"==s?t.ownerBottom+o.tailHeightVertical:t.ownerTop-t.posHeight-o.tailHeightVertical,a.marginLeft=t.ownerWidth>t.posWidth?t.posWidth/2-o.tailWidthVertical/2:t.ownerHorizMiddle-r.left-o.tailWidthVertical/2,a.marginTop="down"==s?t.borderWidth-o.tailHeightVertical:0-t.borderWidth;break;case"left-down":case"right-down":r.left="left-down"==e?t.ownerLeft-t.posWidth-o.tailWidthHorizontal:t.ownerRight+o.tailWidthHorizontal,r.top=t.ownerTop-c,a.marginLeft="left-down"==e?0-t.borderWidth:t.borderWidth-o.tailWidthHorizontal,a.marginTop=t.ownerHeight<t.posHeight?t.ownerVertMiddle-r.top-o.tailHeightHorizontal/2:t.posHeight/2-o.tailHeightHorizontal/2;break;case"left":case"right":r.left="left"==e?t.ownerLeft-t.posWidth-o.tailWidthHorizontal:t.ownerRight+o.tailWidthHorizontal,r.top=t.ownerVertMiddle-t.posHeight/2,a.marginLeft="left"==e?0-t.borderWidth:t.borderWidth-o.tailWidthHorizontal,a.marginTop=t.posHeight/2-o.tailHeightHorizontal/2;break;case"left-up":case"right-up":r.left="left-up"==e?t.ownerLeft-t.posWidth-o.tailWidthHorizontal:t.ownerRight+o.tailWidthHorizontal,r.top=t.ownerBottom-t.posHeight+c,a.marginLeft="left"==s?0-t.borderWidth:t.borderWidth-o.tailWidthHorizontal,a.marginTop=t.ownerHeight>t.posHeight?t.posHeight/2-o.tailHeightHorizontal/2:t.ownerVertMiddle-r.top-o.tailHeightHorizontal/2}return n=this.calcInWindowFactor(r,t),{direction:s,factor:n,offsets:r,tailOffsets:a}}}),BEM.DOM.decl("serp-filter",{onSetMod:{js:function(){var e=this,t=BEM.blocks["i-location"].get();this._uniq=0,BEM.blocks["appcurl-api"].on("search",function(t,n){return n=n.data,n&&n.total?(e.renderStoresFilter(n.platformFacet,n.total).renderCostFilter(n.priceFacet,n.total).renderGamesCategoriesFilter(n.categoryFacet,n.total).renderCategoriesFilter(n.categoryFacet,n.total).renderRatingFilter(n.ratingFacet,n.total).setMod("visibility","visible"),void 0):(e.delMod("visibility"),void 0)}),BEM.blocks.radio.on(this.domElem,"change",function(e,n){var i={p:t.getState().params.p&&1};i[n.name]="all"==n.value?"":n.value,t.change({params:i})}),BEM.blocks["b-form-checkbox"].on(this.domElem,"change",function(e){var n=e.block,i=n.isChecked(),o=n.params,r=o.name,a=o.value,s="",l=t.getState().params,c=l[r],u=c?c.split(","):[],d=u.indexOf(a.toString()),h={p:t.getState().params.p&&1};i&&d>-1||!i&&-1==d||(!i&&d>-1?(u.splice(d,1),s=u.join(",")):(u.push(a),s=u.join(",")),h[r]=s,t.change({params:h}))})}},renderStoresFilter:function(e,t){if(!e)return this;var n=this,i=BEM.blocks["i-location"].get().getState().params,o=(i.platform,i.stores),r=[],a=o&&(~o.indexOf("2")||~o.indexOf("3")||~o.indexOf("4"));return r.push(this.buildRadioBemJson("stores","all",BEM.I18N("serp-filter","all"),t,o?void 0:"checked")),r.push(this.buildRadioBemJson("stores",1,"iTunes",e[1],1==o?"checked":void 0)),r.push(this.buildRadioBemJson("stores","2,3,4","Android",e[2],a?"checked":void 0)),a&&e[2]>1&&["Google Play","Amazon App Store","Nook"].forEach(function(e,t){storeId=t+2,r.push(n.buildCheckboxBemJson("stores",storeId,e,"",o==storeId?"checked":void 0))}),BEM.DOM.update(n.elem("filter","type","stores"),BEM.HTML.build(r)),this},renderCostFilter:function(e,t){if(!e)return this;var n=this,i=BEM.blocks["i-location"].get().getState().params.price,o=[];o.push(this.buildRadioBemJson("price","all",BEM.I18N("serp-filter","all"),t,i?void 0:"checked"));for(var r in e){var a=BEM.I18N("serp-filter",r)||r;o.push(this.buildRadioBemJson("price",r,a,e[r],i==r?"checked":void 0))}return BEM.DOM.update(n.elem("filter","type","price"),BEM.HTML.build(o)),this},renderCategoriesFilter:function(e,t){if(!e)return BEM.DOM.update(this.elem("filter","type","categories"),BEM.HTML.build(this.buildRadioBemJson("categories","all","All",t,i?void 0:"checked"))),this;var n=this,i=BEM.blocks["i-location"].get().getState().params.categories,o=[];return i&&(i=i.split(",").filter(function(e){return 30>e}).join(",")),BEM.blocks["appcurl-api"].getCategories(function(r){o.push(n.buildRadioBemJson("categories","all",BEM.I18N("serp-filter","all"),t,i?void 0:"checked")),e.forEach(function(e){var t=BEM.I18N("serp-filter",r[e.id])||r[e.id];e.id<30&&6!=e.id&&o.push(n.buildCheckboxBemJson("categories",e.id,t,e.c))}),BEM.DOM.update(n.elem("filter","type","categories"),BEM.HTML.build(o))}),this},renderGamesCategoriesFilter:function(e,t){if(!e)return BEM.DOM.update(this.elem("filter","type","categories"),BEM.HTML.build(this.buildRadioBemJson("categories","all","All",t,i?void 0:"checked"))),this;var n=this,i=BEM.blocks["i-location"].get().getState().params.categories,o=[];i&&(i=i.split(",").filter(function(e){return e>30}).join(","));var r=e.filter(function(e){return 6==e.id}),a=r[0]?r[0].c:0;return BEM.blocks["appcurl-api"].getCategories(function(t){o.push(n.buildRadioBemJson("categories","6",BEM.I18N("serp-filter","all"),a,i&&6!=i?void 0:"checked")),e.forEach(function(e){var i=BEM.I18N("serp-filter",t[e.id])||t[e.id];e.id>30&&o.push(n.buildCheckboxBemJson("categories",e.id,i,e.c))}),BEM.DOM.update(n.elem("filter","type","games-categories"),BEM.HTML.build(o))}),this},renderRatingFilter:function(e,t){if(!e)return this;var n=BEM.blocks["i-location"].get().getState().params.rating,i=[];i.push(this.buildRadioBemJson("rating","all",BEM.I18N("serp-filter","all"),t,n?void 0:"checked"));var o=[],r=this;for(var a in e)o[a]=e[a];return o.forEach(function(e,t){i.push(r.buildRatingCheckboxBemJson(t,e))}),BEM.DOM.update(this.elem("filter","type","rating"),BEM.HTML.build(i)),this},buildRadioBemJson:function(e,t,n,i,o){return this._uniq++,{block:"radio",js:!0,content:[{elem:"input",tag:"input",attrs:{type:"radio",name:e,value:t,checked:o,id:"serpFilterRadio"+this._uniq}},{elem:"label",tag:"label",attrs:{"for":"serpFilterRadio"+this._uniq},content:[n,{elem:"total",tag:"span",content:i}]}]}},buildCheckboxBemJson:function(e,t,n,i){var o=BEM.blocks["i-location"].get().getState().params[e],r=o?o.split(","):[];return{block:"b-form-checkbox",js:{name:e,value:t},mods:{theme:"grey-m",size:"m",checked:r.indexOf(t.toString())>-1?"yes":void 0},checkboxAttrs:{id:e+"-"+t},content:{elem:"label",content:[{elem:"total",tag:"span",content:i},n]}}},buildRatingCheckboxBemJson:function(e,t){return this.buildCheckboxBemJson("rating",e,{block:"rating",mods:{type:"readonly",rating:10*e},attrs:{title:e}},t)}}),BEM.DOM.decl("b-form-checkbox",{onSetMod:{js:function(){var e=this,t=e.elem("checkbox");try{var n=e.__self.doc[0].activeElement}catch(i){}e.setMod("checked",t.attr("checked")?"yes":""),n===t[0]&&e.setMod("focused","yes")},focused:{yes:function(){return this.isDisabled()?!1:(this.elem("checkbox").focus(),void 0)},"":function(){this.elem("checkbox").blur()}},checked:function(e,t){this.elem("checkbox").attr("checked","yes"==t),this.elem("tick").attr("alt","yes"==t?" v":""),this.afterCurrentEvent(function(){this.trigger("change")})},disabled:function(e,t){this.elem("checkbox").attr("disabled","yes"==t)}},isDisabled:function(){return this.hasMod("disabled","yes")},isChecked:function(){return this.hasMod("checked","yes")},toggle:function(){this.toggleMod("checked","yes","")},val:function(e){var t=this.elem("checkbox");return void 0==e?t.val():t.val(e)},_onClick:function(e){e.button||this.isDisabled()||this.setMod("focused","yes")},_onChange:function(e){e.target.checked?this.setMod("checked","yes"):this.delMod("checked")}},{live:function(){return this.liveBindTo("checkbox","click",function(e){this._onClick(e)}).liveBindTo("checkbox","change",function(e){this._onChange(e)}).liveBindTo("checkbox","focusin focusout",function(e){this.setMod("focused","focusin"==e.type?"yes":"")}),!1}}),BEM.HTML.decl("b-form-checkbox",{onBlock:function(e){var t=e.param("checkboxAttrs")||{};e.js(!0).mix(e.mod("size")?"":[{block:"b-form-checkbox",mods:{size:"m"}}]).tag("span").tParam("checkboxAttrs",$.extend(t||{},{id:e.param("id")||t.id||$.identify(),checked:e.mod("checked")?"checked":void 0,disabled:e.mod("disabled")?"disabled":void 0})).beforeContent({elem:"inner",content:[{elem:"checkbox",attrs:e.tParam("checkboxAttrs")},{elem:"bg"}]})},onElem:{label:function(e){e.tag("label").attr("for",e.tParam("checkboxAttrs").id)},checkbox:function(e){e.tag("input").attrs($.extend(e.attrs(),{type:"checkbox"}))},bg:function(e){e.tag("i").content({elem:"tick"})},tick:function(e){e.tag("i")},inner:function(e){e.tag("span")}}}),BEM.DOM.decl("radio",{onSetMod:{js:function(){this.isChecked()?this.setMod("checked","yes"):this.delMod("checked"),this.bindTo(this.elem("input"),"change",function(e){var t=e.data.domElem,n=this.isChecked();n?this.setMod("checked","yes"):this.delMod("checked"),this.trigger("change",{name:t.attr("name"),value:t.val(),isChecked:this.isChecked()})})}},val:function(){return this.elem("input").val()},isChecked:function(){return!!this.elem("input").attr("checked")}}),BEM.DOM.decl("serp-hint",{onSetMod:{js:function(){var e=this;this._uniq=0,BEM.blocks["appcurl-api"].getCategories(function(t){e.categories=t}),BEM.blocks["appcurl-api"].on("search",function(t,n){e.delMod("visibility"),n=n.data,n.collation&&e.renderCollation(n.collation),n.collation||e.renderCategoryHint()||e.renderGeneric(n.total)});var t=BEM.blocks["i-location"].get();BEM.blocks["b-link"].on(this.domElem,"click",function(e){var n=e.block.params.query;t.change({url:"/?q="+n,title:n+"  Appcurl"})})}},renderCollation:function(e){BEM.DOM.init(this.elem("content").html(BEM.HTML.build([BEM.I18N("serp-hint","did you mean"),{block:"b-link",js:{query:encodeURIComponent(e)},url:"/?q="+encodeURIComponent(e),mods:{pseudo:"yes"},content:e},"?"]))),this.setMod("visibility","visible")},renderCategoryHint:function(){var e=BEM.blocks["i-location"].get(),t=e.getState().params.q.toLowerCase(),n="";for(var i in this.categories)if(this.categories[i].toLowerCase()==t){n=i;break}return n?(this.elem("content").html(BEM.HTML.build([BEM.I18N("serp-hint","your query marches one of the app categories"),{block:"b-link",url:"http://"+BEM.blocks["i-global"].param("appcurl-host")+"/explore/?categories="+n,content:BEM.blocks.util.capitalize(t)},"."])),this.setMod("visibility","visible"),!0):!1},renderGeneric:function(e){if(!(250>e)){var t=BEM.HTML.build([{content:BEM.I18N("serp-hint","your query seems too generic")},{content:BEM.I18N("serp-hint","narrow your search by adding more words to your query and/or by selecting result bins below")}]);BEM.DOM.update(this.elem("content"),t),this.setMod("visibility","visible")}}}),BEM.DOM.decl("serp-sort",{onSetMod:{js:function(){var e=this;this._uniq=0,BEM.blocks["appcurl-api"].on("search",function(t,n){e.delMod("visibility"),n=n.data,e.renderReorder(),n.total&&e.setMod("visibility","visible")});var t=BEM.blocks["i-location"].get();BEM.blocks.radio.on(this.domElem,"change",function(e,n){"order"==n.name&&t.change({params:{order:n.value,p:t.getState().params.p&&1}})})}},renderReorder:function(){BEM.DOM.update(this.elem("content"),this._getReorderHtml())},_getReorderHtml:function(){var e=BEM.blocks["i-location"].get().getState().params.order;return BEM.HTML.build([this._buildRadioBemJson("order","score desc",BEM.I18N("serp-sort","relevance"),!e||"score desc"==e&&"checked"),this._buildRadioBemJson("order","pi desc",BEM.I18N("serp-sort","popularity"),e&&"pi desc"==e&&"checked"),this._buildRadioBemJson("order","alpha asc",BEM.I18N("serp-sort","alphabetical"),e&&"alpha asc"==e&&"checked"),this._buildRadioBemJson("order","rating desc",BEM.I18N("serp-sort","rating"),e&&"rating desc"==e&&"checked")])},_buildRadioBemJson:function(e,t,n,i){return this._uniq++,{block:"radio",js:!0,content:[{elem:"input",tag:"input",attrs:{type:"radio",name:e,value:t,checked:i,id:e+this._uniq}},{elem:"label",tag:"label",attrs:{"for":e+this._uniq},content:n}]}}}),BEM.DOM.decl("explore-view",{onSetMod:{js:function(){var e=this;this.iLocation=BEM.blocks["i-location"].get(),BEM.blocks["appcurl-api"].on("search",function(t,n){n=n.data,n.total?e.update(n):e.delMod("visibility")})}},update:function(e){var t=this.iLocation.getState().params,n=(t.type||"apps",{});n.q=t.q,t.tag&&(n.tags=t.tag),t.categories&&(n.categories=t.categories),t.platform&&(n.platforms=t.platform),t.price&&(n.prices=t.price);var i,o="http://"+BEM.blocks["i-global"].param("appcurl-host")+"/explore"+($.isEmptyObject(n)?"/":"/?"+$.param(n)),r=[];e.categoryFacet.forEach(function(e){6==e.id&&(i=e.c)}),i&&r.push(this.getExploreViewItemBemJson("Games with "+this.getLinkHtml(o+"&type=games",t.q))),(e.categoryFacet.length>1||!i&&e.categoryFacet.length)&&r.push(this.getExploreViewItemBemJson("Apps with "+this.getLinkHtml(o,t.q))),this.elem("content").html(BEM.HTML.build(r)),this.setMod("visibility","visible")},getExploreViewItemBemJson:function(e){return{block:"explore-view",elem:"item",content:e}},getLinkHtml:function(e,t){return BEM.HTML.build({block:"b-link",url:e,content:BEM.blocks.util.escapeHTML(t)})}}),function(){BEM.DOM.decl("tags",{onSetMod:{js:function(){var e=this;BEM.blocks["appcurl-api"].on("search",function(t,n){var i=n.data.tagsFacet;return i&&i.length?(BEM.DOM.update(e.elem("content"),BEM.HTML.build(e.buildTagsBemJson(i))),e.setMod("visibility","visible"),void 0):(e.delMod("visibility"),void 0)})}},buildTagsBemJson:function(e){for(var t=[],n=15,i=BEM.blocks.tags._getTagsFromUrl(),o=0;o<e.length&&n>o;o++){var r=e[o];t.push({block:"tags",elem:"tag",js:{value:r},mods:{state:i.indexOf(r)>-1?"current":void 0},content:r})}return t}},{live:function(){var e=BEM.blocks["i-location"].get(),t=this;return this.liveBindTo("tag","leftclick",function(n){var i=n.data.domElem,o=this.elemParams(i).value;this.toggleMod(i,"state","current");var r=t._getTagsFromUrl();r.indexOf(o)<0?r.push(o):r.splice(r.indexOf(o),1),e.change({params:{tag:r.join(","),p:e.getState().params.p&&1}})}),!1},_getTagsFromUrl:function(){var e=BEM.blocks["i-location"].get(),t=e.getState().params,n=t.tag;return n?n.split(","):[]}})}(jQuery),BEM.DOM.decl("appcurl-footer",{onSetMod:{js:{inited:function(){var e=this,t=this.findBlockOutside("b-page");this.bindTo("expand-button","click",function(){var n=e.hasMod("visibility","visible");e.setMod("visibility",n?"hidden":"visible"),t.toggleMod("footer","expanded"),n||$("html, body").animate({scrollTop:e.elem("content").offset().top},0)})}}}}),function(e,t){function n(){p&&f&&console.log.apply(console,arguments)}function i(e){return"string"==typeof e&&(e={block:e}),e.block+(e.elem?c+e.elem:"")+(e.modName?l+e.modName+l+e.modVal:"")}function o(e){var t={};return e.split(c).forEach(function(e,n){var i=[n?"elem":"block","mod","val"];e.split(l).forEach(function(e,n){t[i[n]]=e})}),t}function r(e){return e?h.push(e):!1}function a(){return h.length&&h.pop()}function s(){this._lang="",this._prj="lego",this._keyset="",this._key=""}if("function"==typeof t.I18N&&t.I18N._proto)return t.I18N;"undefined"==typeof i18n&&(i18n={}),BEM=t;var l="_",c="__",u="ru",d={},h=[],p=!1,f="undefined"!=typeof console&&"function"==typeof console.log;s.prototype={lang:function(e){return this._lang=e,this},project:function(e){return this._prj=e,this},keyset:function(e,t){return t&&r(this._keyset),this._keyset=i(e),this},key:function(e){return this._key=e,this},decl:function(e){var t=o(this._keyset),n="i-tanker"===t.block?"tanker":this._prj,i=t.elem||this._keyset,r=this._key;n=i18n[n]||(i18n[n]={}),i=n[i]||(n[i]={}),i[r]="function"==typeof e?e:function(){return e};var a=d[this._lang]||(d[this._lang]={}),s=a[this._keyset]||(a[this._keyset]={});s[r]=e},val:function(e,t){var i=d[this._lang]&&d[this._lang][this._keyset],o="keyset: "+this._keyset+" key: "+this._key+" (lang: "+this._lang+")";if(!i)return n("[I18N_NO_KEYSET] %s",o),"";i=i[this._key];var r=typeof i;return"undefined"===r?(n("[I18N_NO_VALUE] %s",o),""):"string"===r?i:(t||(t=this),i.call(t,e))},_cache:function(){return d}},t.I18N=function(e){var t=function(e,n,i){return t.keyset(e).key(n,i)};return t._proto=e,t.project=function(e){return this._proto.project(e),this},t.keyset=function(e){return this._proto.keyset(e,!0),this},t.key=function(e,n){var i,o,r=this._proto;return r.lang(this._lang).key(e),i=r.val.call(r,n,t),o=a(),o&&r.keyset(o,!1),i},t.decl=function(e,t,n){var i,o=this._proto;n||(n={}),n.lang&&o.lang(n.lang),o.keyset(e);for(i in t)t.hasOwnProperty(i)&&o.key(i).decl(t[i]);return this},t.lang=function(e){return"undefined"!=typeof e&&(this._lang=e),this._lang},t.debug=function(e){p=!!e},t.lang(u),t}(new s)}(this,"undefined"==typeof BEM?{}:BEM),BEM.I18N.decl("appcurl-footer",{"more options":"More options","opyright at airomo.com":"Copyright at airomo.com","about us":"ABOUT US","appcurl apps":"APPCURL APPS",links:"LINKS","social media":"SOCIAL MEDIA","about us content":function(){return"Appcurl is an app built over the airomo cloud. Airomo cloud is the mobile cloud platform from <a class='b-link' href='http://www.airomo.com/company/'>Airomo Inc.</a>, the mobile lifestyle management company."},"google play":"Google Play","amazon app store":"Amazon app store","nook app store":"Nook app store","apple app store":"Apple app store","facebook app store":"Facebook app store","submit apps":"Submit apps","appcurl blogs":"Appcurl blogs","how to guides":"How to guides","airomo privacy policy":"Airomo Privacy policy"},{lang:"ru"}),BEM.I18N.decl("appcurl-search",{"search mobile apps":" , ...",search:""},{lang:"ru"}),BEM.I18N.decl("appcurl-static-links",{explore:"",apps:"",games:"",users:""},{lang:"ru"}),BEM.I18N.decl("b-dropdowna",{more:"",or:""},{lang:"ru"}),BEM.I18N.decl("b-page",{"page title":"Appcurl    Android  iPhone   AppCurl      !",username:"",login:"","my profile":" ",settings:"","log out":""},{lang:"ru"}),BEM.I18N.decl("explore-view",{"explore view":"Explore View for "},{lang:"ru"}),BEM.I18N.decl("option",{en:"English",ru:"",uk:"",zh:"",pt:"Portugus",jp:"",kr:"",es:"Espaol"},{lang:"ru"}),BEM.I18N.decl("paginator",{next:"",previous:""},{lang:"ru"}),BEM.I18N.decl("popup",{"why appcurl":" Appcurl?","what is appcurl text":"Appcurl -        ,      ,  .  Appcurl     , ,      ,        Android  iPhone . Appcurl     ,      ,    ,      , ,   .  Appcurl,      ,      ,       ,      .","appcurl unibased text":"Appcurl  . Appcurl    - . Appcurl ,       ,   ,           .","example usage":function(){}},{lang:"ru"}),BEM.I18N.decl("progress",{searching:"..."},{lang:"ru"}),BEM.I18N.decl("serp",{app:"",apps:"","found and":"   ","with":"","in the title.":" ","your search":"   - ","did not match any apps":" -   .",suggestions:":","make sure all words are spelled correctly":"     .","try different or more general keywords":"    .","try wild card search":"     ( *     )","try keywords in phrase within quotes":"        (: -      -   .",help:"","still not sure what you are looking for":"     ?  ",feed:" "},{lang:"ru"}),BEM.I18N.decl("serp-filter",{all:"",cost:"",platforms:"",categories:"",rating:"","result filter":" ","Books & Reference":"  ",Business:"",Education:"",Entertainment:"",Finance:"",Games:"","Health & Fitness":"  ",Lifestyle:" ","Media & Video":"  ",Medical:"","Music & Audio":"  ",Navigation:"","News & Magazines":"  ",Photography:"",Productivity:"",Shopping:"",Social:"",Sports:"","Travel & Local":"",Utilities:"",Weather:"",Personalization:"",free:"",paid:""},{lang:"ru"}),BEM.I18N.decl("serp-hint",{"your query seems too generic":"    .","narrow your search by adding more words to your query and/or by selecting result bins below":"      ()   .","your query marches one of the app categories":"       .       ","did you mean":"    ",hint:""},{lang:"ru"}),BEM.I18N.decl("serp-sort",{relevance:"",popularity:"",alphabetical:"",rating:"","sort by":" "},{lang:"ru"}),BEM.I18N.decl("store-badges",{"it all starts here":"  .","ios app coming soon":"  iOs,  "},{lang:"ru"}),BEM.I18N.decl("tags",{"result bins":""},{lang:"ru"}),BEM.I18N.lang("ru");
