/*borschik:include:../../bem-bl/blocks-common/i-jquery/__cookie/i-jquery__cookie.js*/;
/*borschik:include:../../bem-bl/blocks-common/i-jquery/__inherit/i-jquery__inherit.js*/;
/*borschik:include:../../bem-bl/blocks-common/i-jquery/__identify/i-jquery__identify.js*/;
/*borschik:include:../../bem-bl/blocks-common/i-jquery/__is-empty-object/i-jquery__is-empty-object.js*/;
/*borschik:include:../../bem-bl/blocks-common/i-jquery/__debounce/i-jquery__debounce.js*/;
/*borschik:include:../../bem-bl/blocks-common/i-jquery/__observable/i-jquery__observable.js*/;
/*borschik:include:../../bem-bl/blocks-common/i-bem/i-bem.js*/;
/*borschik:include:../../bem-bl/blocks-common/i-ecma/__object/i-ecma__object.js*/;
/*borschik:include:../../bem-bl/blocks-common/i-ecma/__array/i-ecma__array.js*/;
/*borschik:include:../../bem-bl/blocks-common/i-ecma/__function/i-ecma__function.js*/;
/*borschik:include:../../bem-bl/blocks-common/i-bem/__internal/i-bem__internal.js*/;
/*borschik:include:../../y-bl/common.blocks/i-bem/__html/i-bem__html.js*/;
/*borschik:include:../../bem-bl/blocks-common/i-ecma/__json/i-ecma__json.js*/;
/*borschik:include:../../bem-bl/blocks-common/i-bem/__dom/i-bem__dom.js*/;
/*borschik:include:../../bem-bl/blocks-common/i-ecma/__string/i-ecma__string.js*/;
/*borschik:include:../../y-bl/common.blocks/i-global/i-global.js*/;
/*borschik:include:../../bem-bl/blocks-common/i-bem/__dom/_init/i-bem__dom_init_auto.js*/;
/*borschik:include:blocks/b-page/b-page.js*/;
/*borschik:include:../../airupt-bl/common.blocks/appcurl-api/appcurl-api.js*/;
/*borschik:include:../../blocks-desktop/google-analytics/google-analytics.js*/;
/*borschik:include:../../blocks-desktop/yandex-metrika/yandex-metrika.js*/;
/*borschik:include:../../airupt-bl/desktop.blocks/infopane/infopane.js*/;
/*borschik:include:../../airupt-bl/common.blocks/i-jquery/__history/_html4/i-jquery__history_html4_yes.js*/;
/*borschik:include:../../airupt-bl/common.blocks/i-jquery/__history/i-jquery__history.js*/;
/*borschik:include:../../bem-bl/blocks-common/i-jquery/__decodeuri/i-jquery__decodeuri.js*/;
/*borschik:include:../../airupt-bl/common.blocks/i-location/i-location.js*/;
/*borschik:include:../../airupt-bl/desktop.blocks/i-location/i-location.js*/;
/*borschik:include:../../blocks-desktop/b-page/_ajax/b-page_ajax_yes.js*/;
/*borschik:include:../../airupt-bl/desktop.blocks/dropdown/dropdown.js*/;
/*borschik:include:../../bem-bl/blocks-common/i-jquery/__leftclick/i-jquery__leftclick.js*/;
/*borschik:include:../../airupt-bl/common.blocks/airomo-api/airomo-api.js*/;
/*borschik:include:../../airupt-bl/desktop.blocks/auth/auth.js*/;
/*borschik:include:../../blocks-desktop/airomo-api-v2/airomo-api-v2.js*/;
/*borschik:include:../../airupt-bl/desktop.blocks/user/user.js*/;
/*borschik:include:../../blocks-desktop/user/user.js*/;
/*borschik:include:../../y-bl/desktop.blocks/b-link/b-link.js*/;
/*borschik:include:../../airupt-bl/desktop.blocks/go-appcurl/go-appcurl.js*/;
/*borschik:include:../../blocks-desktop/content/content.js*/;
/*borschik:include:../../blocks-desktop/appcurl-logo/appcurl-logo.js*/;
/*borschik:include:../../airupt-bl/desktop.blocks/popup/popup.js*/;
/*borschik:include:../../blocks-desktop/why/why.js*/;
/*borschik:include:../../blocks-desktop/appcurl-search/appcurl-search.js*/;
/*borschik:include:../../airupt-bl/desktop.blocks/quick-search/quick-search.js*/;
/*borschik:include:../../y-bl/desktop.blocks/b-form-input/b-form-input.js*/;
/*borschik:include:../../bem-bl/blocks-common/i-system/i-system.js*/;
/*borschik:include:../../y-bl/desktop.blocks/b-form-input/__hint/b-form-input__hint.js*/;
/*borschik:include:../../y-bl/common.blocks/i-request/i-request.js*/;
/*borschik:include:../../y-bl/common.blocks/i-request/_type/i-request_type_ajax.js*/;
/*borschik:include:../../y-bl/desktop.blocks/b-form-input/_autocomplete/b-form-input_autocomplete_yes.js*/;
/*borschik:include:../../airupt-bl/desktop.blocks/b-form-input/_autocomplete/b-form-input_autocomplete_yes.js*/;
/*borschik:include:../../y-bl/desktop.blocks/b-form-input/__dataprovider/b-form-input__dataprovider.js*/;
/*borschik:include:../../y-bl/desktop.blocks/i-popup/i-popup.js*/;
/*borschik:include:../../y-bl/desktop.blocks/i-popup/_autoclosable/i-popup_autoclosable_yes.js*/;
/*borschik:include:../../airupt-bl/common.blocks/util/util.js*/;
/*borschik:include:../../y-bl/desktop.blocks/b-autocomplete-item/b-autocomplete-item.js*/;
/*borschik:include:../../y-bl/desktop.blocks/b-autocomplete-item/_type/b-autocomplete-item_type_hl.js*/;
/*borschik:include:../../y-bl/desktop.blocks/b-autocomplete-item/_type/b-autocomplete-item_type_fact.js*/;
/*borschik:include:../../y-bl/desktop.blocks/b-autocomplete-item/_type/b-autocomplete-item_type_nav.js*/;
/*borschik:include:../../y-bl/desktop.blocks/b-autocomplete-item/_type/b-autocomplete-item_type_nah.js*/;
/*borschik:include:../../y-bl/desktop.blocks/b-autocomplete-item/_type/b-autocomplete-item_type_foot.js*/;
/*borschik:include:../../y-bl/desktop.blocks/b-autocomplete-item/_type/b-autocomplete-item_type_href.js*/;
/*borschik:include:../../airupt-bl/desktop.blocks/b-autocomplete-item/_type/b-autocomplete-item_type_quick-search.js*/;
/*borschik:include:../../y-bl/desktop.blocks/b-form-input/_has-clear/b-form-input_has-clear_yes.js*/;
/*borschik:include:../../y-bl/desktop.blocks/b-form-button/b-form-button.js*/;
/*borschik:include:../../airupt-bl/desktop.blocks/progress/progress.js*/;
/*borschik:include:../../blocks-desktop/appcurl-lang-switcher/appcurl-lang-switcher.js*/;
/*borschik:include:../../blocks-desktop/serp/serp.js*/;
/*borschik:include:../../airupt-bl/desktop.blocks/feed/feed.js*/;
/*borschik:include:../../airupt-bl/desktop.blocks/b-form-button/_theme/b-form-button_theme.js*/;
/*borschik:include:../../airupt-bl/desktop.blocks/rating/rating.js*/;
/*borschik:include:../../airupt-bl/desktop.blocks/more/more.js*/;
/*borschik:include:../../airupt-bl/desktop.blocks/feed/_target/feed_target_app.js*/;
/*borschik:include:../../blocks-desktop/feed/_target/feed_target_app.js*/;
/*borschik:include:../../blocks-desktop/paginator/paginator.js*/;
/*borschik:include:../../bem-bl/blocks-desktop/b-link/_pseudo/b-link_pseudo_yes.js*/;
/*borschik:include:../../y-bl/desktop.blocks/b-link/_pseudo/b-link_pseudo_yes.js*/;
/*borschik:include:../../y-bl/desktop.blocks/b-dropdowna/b-dropdowna.js*/;
/*borschik:include:../../y-bl/desktop.blocks/b-popupa/b-popupa.js*/;
/*borschik:include:../../blocks-desktop/b-popupa/b-popupa.js*/;
/*borschik:include:../../blocks-desktop/serp-filter/serp-filter.js*/;
/*borschik:include:../../y-bl/desktop.blocks/b-form-checkbox/b-form-checkbox.js*/;
/*borschik:include:../../airupt-bl/desktop.blocks/radio/radio.js*/;
/*borschik:include:../../blocks-desktop/serp-hint/serp-hint.js*/;
/*borschik:include:../../blocks-desktop/serp-sort/serp-sort.js*/;
/*borschik:include:blocks/explore-view/explore-view.js*/;
/*borschik:include:../../blocks-desktop/tags/tags.js*/;
/*borschik:include:../../blocks-desktop/appcurl-footer/appcurl-footer.js*/;


/* global BEM, i18n */
(function(global_, bem_, undefined) {

// Check if BEM.I18N was already initialized
if(typeof bem_.I18N === 'function' && bem_.I18N._proto) {
    return bem_.I18N;
}

/**
 * Support tanker-like syntax of keys in `i-bem__i18n`
 * @example
 *  i18n['prj']['keyset']['key'](params)
 */
if(typeof i18n === 'undefined') {
    /* jshint -W020 */
    i18n = {};
    /* jshint +W020 */
}

/* jshint -W020 */
BEM = bem_;
/* jshint +W020 */

var MOD_DELIM = '_',
    ELEM_DELIM = '__',
    DEFAULT_LANG = 'ru',
    cache = {},
    // {String[]} A stack used for restoring context of dynamic keysets
    stack = [],
    debug = false,
    // @see http://whattheheadsaid.com/2011/04/internet-explorer-9s-problematic-console-object
    hasConsole = typeof console !== 'undefined' && typeof console.log === 'function';

function log() {
    if(debug && hasConsole) {
        console.log.apply(console, arguments);
    }
}

function bemName(decl) {
    typeof decl === 'string' && (decl = { block: decl });

    return decl.block +
        (decl.elem ? (ELEM_DELIM + decl.elem) : '') +
        (decl.modName ? MOD_DELIM + decl.modName + MOD_DELIM + decl.modVal : '');
}

function bemParse(name) {
    var bemitem = {};

    name.split(ELEM_DELIM).forEach(function(item, i) {
        var keys = [ i ? 'elem' : 'block', 'mod', 'val' ];

        item.split(MOD_DELIM).forEach(function(part, j) {
            bemitem[keys[j]] = part;
        });
    });

    return bemitem;
}

function _pushStack(name) {
    if(!name) return false;
    return stack.push(name);
}

function _popStack() {
    return stack.length && stack.pop();
}


/**
 * @constructor
 */
function _i18n() {
    this._lang = '';
    this._prj = 'lego'; // FIXME: bem-bl?
    this._keyset = '';
    this._key = '';
}

_i18n.prototype = {

    lang : function(name) {
        this._lang = name;
        return this;
    },

    project : function(name) {
        this._prj = name;
        return this;
    },

    keyset : function(name, saveCtx) {
        saveCtx && _pushStack(this._keyset);

        this._keyset = bemName(name);
        return this;
    },

    key : function(name) {
        this._key = name;
        return this;
    },

    /**
     * FIXME: Move legacy-syntax support into separat method
     * @param {Object|Function} v
     */
    decl : function(v) {
        var bemitem = bemParse(this._keyset),
            // tanker legacy syntax
            prj = bemitem.block === 'i-tanker' ? 'tanker' : this._prj,
            keyset = bemitem.elem || this._keyset,
            key = this._key;

        prj = i18n[prj] || (i18n[prj] = {});
        keyset = prj[keyset] || (prj[keyset] = {});
        keyset[key] = typeof v === 'function' ? v : (function(p) { return (v); });

        // `BEM.I18N` syntax
        var l = cache[this._lang] || (cache[this._lang] = {}),
            k = l[this._keyset] || (l[this._keyset] = {});

        k[key] = v;
    },

    val : function(params, ctx) {
        var value = cache[this._lang] && cache[this._lang][this._keyset],
            debugString = 'keyset: ' + this._keyset + ' key: ' + this._key + ' (lang: ' + this._lang + ')';

        if(!value) {
            log('[I18N_NO_KEYSET] %s', debugString);
            return '';
        }

        value = value[this._key];

        var valtype = typeof value;
        if(valtype === 'undefined') {
            log("[I18N_NO_VALUE] %s", debugString);
            return '';
        }

        if(valtype === 'string') {
            return value;
        }

        ctx || (ctx = this);
        // TODO: try/catch
        return value.call(ctx, params);
    },

    _cache : function() { return cache; }

};

/**
 * @namespace
 * @lends BEM.I18N
 */
bem_.I18N = (function(base) {

    /**
     * Shortcut to get key value
     *
     * @param {String|Object} keyset
     * @param {String} key
     * @param {Object} [params]
     * @returns {String}
     */
    var klass = function(keyset, key, params) {
        return klass.keyset(keyset).key(key, params);
    };

    klass._proto = base;

    /**
     * @param {String} name
     * @returns {BEM.I18N}
     */
    klass.project = function(name) {
        this._proto.project(name);
        return this;
    };

    /**
     * @param {String} name
     * @returns {BEM.I18N}
     */
    klass.keyset = function(name) {
        this._proto.keyset(name, true);
        return this;
    };

    /**
     * @param {String} name Key name
     * @param {Object} params
     * @returns {String}
     */
    klass.key = function(name, params) {
        var proto = this._proto,
            result,
            ksetRestored;

        proto.lang(this._lang).key(name);

        // TODO: kiss
        result = proto.val.call(proto, params, klass);

        // restoring keyset's context
        // NOTE: should not save current ctx, `saveCtx = false`
        ksetRestored = _popStack();
        ksetRestored && proto.keyset(ksetRestored, false);

        return result;
    };

    /**
     * Declaration of translations
     *
     * @param {String|Object} bemitem
     * @param {Object} keysets
     * @param {Object} [params] declaration params
     * @returns {BEM.I18N}
     */
    klass.decl = function(bemitem, keysets, params) {
        var proto = this._proto,
            k;

        params || (params = {});
        params.lang && proto.lang(params.lang);

        proto.keyset(bemitem);

        for(k in keysets) {
            if(keysets.hasOwnProperty(k)) {
                proto.key(k).decl(keysets[k]);
            }
        }

        return this;
    };

    /**
     * Get/set current language
     *
     * @param {String} [lang]
     * @returns {String}
     */
    klass.lang = function(lang) {
        typeof lang !== 'undefined' && (this._lang = lang);
        return this._lang;
    };

    klass.debug = function(flag) {
        debug = !!flag;
    };

    klass.lang(DEFAULT_LANG);

    return klass;

}(new _i18n()));

})(this, typeof BEM === 'undefined' ? {} : BEM);


BEM.I18N.decl('appcurl-footer', {"more options": 'More options',"сopyright at airomo.com": 'Copyright at airomo.com',"about us": 'ABOUT US',"appcurl apps": 'APPCURL APPS',"links": 'LINKS',"social media": 'SOCIAL MEDIA',"about us content": function(params) { return 'Appcurl is an app built over the airomo cloud. Airomo cloud is the mobile cloud platform from ' + "<a class=\'b-link\' href=\'http:\/\/www.airomo.com\/company\/\'>" + 'Airomo Inc.' + "</a>" + ', the mobile lifestyle management company.' },"google play": 'Google Play',"amazon app store": 'Amazon app store',"nook app store": 'Nook app store',"apple app store": 'Apple app store',"facebook app store": 'Facebook app store',"submit apps": 'Submit apps',"appcurl blogs": 'Appcurl blogs',"how to guides": 'How to guides',"airomo privacy policy": 'Airomo Privacy policy'}, {
"lang": "en"
});

BEM.I18N.decl('appcurl-search', {"search mobile apps": 'Search for apps, games...',"search": 'Search'}, {
"lang": "en"
});

BEM.I18N.decl('appcurl-static-links', {"explore": 'Explore',"apps": 'apps',"games": 'games',"users": 'users'}, {
"lang": "en"
});

BEM.I18N.decl('b-dropdowna', {"more": 'more',"or": 'or'}, {
"lang": "en"
});

BEM.I18N.decl('b-page', {"page title": 'Search for apps with Appcurl: tablet apps, kindle fire apps, nook apps and more',"username": 'Join\/Login',"login": 'Login',"my profile": 'My Profile',"settings": 'Settings',"log out": 'Log out'}, {
"lang": "en"
});

BEM.I18N.decl('explore-view', {"explore view": 'Explore View for '}, {
"lang": "en"
});

BEM.I18N.decl('option', {"en": 'English',"ru": 'Русский',"uk": 'Українська',"zh": '中文',"pt": 'Português',"jp": '日本語',"kr": '한국어',"es": 'Español'}, {
"lang": "en"
});

BEM.I18N.decl('paginator', {"next": 'Next',"previous": 'Prev'}, {
"lang": "en"
});

BEM.I18N.decl('popup', {"why appcurl": 'Why Appcurl?',"what is appcurl text": 'The Appcurl app discovery solution allow users to search, explore and find the best tablet apps, android\/iphone apps and kindle fire apps. Appcurl seamlessly combines user\'s mobile, online and social habits to determine and deliver the most accurate and relevant search results. Appcurl provides three interfaces to discover apps; a powerful mobile app search engine, engaging Explore Interface and a social navigation interface, to allow users to discover the most relevant tablet\/phone\/ipad apps or games.',"appcurl unibased text": 'Appcurl is totally unbiased. Appcurl does not promote or sell any apps. Appcurl believes the true experts of mobile applications are the user’s themselves, it encourages users to get loud with their app experience and influence the world around them.',"example usage": 'Example Usage: With appcurl, users can search for apps specifically for a platform; for instance only kindle fire apps or google play apps or ipad apps. The search results can be filtered by various controls including, cost (eg : free kindle fire apps), tags (eg : kids education, stock trading etc.) or by any random keywords (eg: iphone 3gs apps, free galaxy games download or ipad 2 games etc.).'}, {
"lang": "en"
});

BEM.I18N.decl('progress', {"searching": 'Searching...'}, {
"lang": "en"
});

BEM.I18N.decl('serp', {"app": 'app',"apps": 'apps',"found and": ' found and ',"with": 'with',"in the title.": 'in the title.',"your search": 'Your search – ',"did not match any apps": ' – did not match any apps.',"suggestions": 'Suggestions:',"make sure all words are spelled correctly": 'Make sure all words are spelled correctly.',"try different or more general keywords": 'Try different or more general keywords.',"try wild card search": 'Try wild card search (example: math* will find apps matching both maths and mathematics)',"try keywords in phrase within quotes": 'Try keywords in phrase within quotes (example: “Winnie the pooh” will find apps matching the whole phrase. Not Winnie or Pooh only.)',"help": 'Help',"still not sure what you are looking for": 'Still not sure what you are looking for? Try the ',"feed": 'Feed'}, {
"lang": "en"
});

BEM.I18N.decl('serp-filter', {"all": 'All',"cost": 'Cost',"platforms": 'Platforms',"categories": 'Categories',"rating": 'Rating',"result filter": 'Result Filter',"Books & Reference": 'Books & Reference',"Business": 'Business',"Education": 'Education',"Entertainment": 'Entertainment',"Finance": 'Finance',"Games": 'Games',"Health & Fitness": 'Health & Fitness',"Lifestyle": 'Lifestyle',"Media & Video": 'Media & Video',"Medical": 'Medical',"Music & Audio": 'Music & Audio',"Navigation": 'Navigation',"News & Magazines": 'News & Magazines',"Photography": 'Photography',"Productivity": 'Productivity',"Shopping": 'Shopping',"Social": 'Social',"Sports": 'Sports',"Travel & Local": 'Travel & Local',"Utilities": 'Utilities',"Weather": 'Weather',"Personalization": 'Personalization',"free": 'Free',"paid": 'Paid'}, {
"lang": "en"
});

BEM.I18N.decl('serp-hint', {"your query seems too generic": 'Your query seems too generic.',"your query marches one of the app categories": 'Your query marches one of the app categories. You can directly browse the apps under ',"narrow your search by adding more words to your query and/or by selecting result bins below": 'Narrow your search by adding more words to your query and\/or by selecting result bins below.',"did you mean": 'Did you mean ',"hint": 'Hint'}, {
"lang": "en"
});

BEM.I18N.decl('serp-sort', {"relevance": 'Relevance',"popularity": 'Popularity',"alphabetical": 'Alphabetical',"rating": 'Star rating',"sort by": 'Sort by'}, {
"lang": "en"
});

BEM.I18N.decl('store-badges', {"it all starts here": 'It all starts here.',"ios app coming soon": 'iOS app coming soon'}, {
"lang": "en"
});

BEM.I18N.decl('tags', {"result bins": 'Result bins'}, {
"lang": "en"
});

BEM.I18N.lang('en');
