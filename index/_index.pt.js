jQuery.cookie=function(e,t,i){if("undefined"==typeof t){var n=null;if(document.cookie&&""!=document.cookie)for(var o=document.cookie.split(";"),r=0;r<o.length;r++){var a=jQuery.trim(o[r]);if(a.substring(0,e.length+1)==e+"="){n=decodeURIComponent(a.substring(e.length+1));break}}return n}i=i||{},null===t&&(t="",i.expires=-1);var s="";if(i.expires&&("number"==typeof i.expires||i.expires.toUTCString)){var l;"number"==typeof i.expires?(l=new Date,l.setTime(l.getTime()+1e3*60*60*24*i.expires)):l=i.expires,s="; expires="+l.toUTCString()}var c=i.path?"; path="+i.path:"",u=i.domain?"; domain="+i.domain:"",d=i.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(t),s,c,u,d].join("")},function(e){function t(t,n,o){var a=!1;if(r){var s=[];e.each(l,function(){o.hasOwnProperty(this)&&(a=!0)&&s.push({name:this,val:o[this]})}),a&&(e.each(o,function(e){s.push({name:e,val:this})}),o=s)}e.each(o,function(o,r){if(a&&(o=r.name,r=r.val),e.isFunction(r)&&(!i||r.toString().indexOf(".__base")>-1)){var s=t[o]||function(){};n[o]=function(){var e=this.__base;this.__base=s;var t=r.apply(this,arguments);return this.__base=e,t}}else n[o]=r})}var i=function(){}.toString().indexOf("_")>-1,n=function(){},o=Object.create||function(e){var t=function(){};return t.prototype=e,new t},r=!0,a={toString:""};for(var s in a)a.hasOwnProperty(s)&&(r=!1);var l=r?["toString","valueOf"]:null;e.inherit=function(){var i=arguments,r=e.isFunction(i[0]),a=r?i[0]:n,s=i[r?1:0]||{},l=i[r?2:1],c=s.__constructor||r&&a.prototype.__constructor?function(){return this.__constructor.apply(this,arguments)}:function(){};if(!r)return c.prototype=s,c.prototype.__self=c.prototype.constructor=c,e.extend(c,l);e.extend(c,a);var u=a.prototype,d=c.prototype=o(u);return d.__self=d.constructor=c,t(u,d,s),l&&t(a,c,l),c},e.inheritSelf=function(e,i,n){var o=e.prototype;return t(o,o,i),n&&t(e,e,n),e}}(jQuery),function(e){var t=0,i="__"+ +new Date,n=function(){return"uniq"+ ++t};e.identify=function(e,t){if(!e)return n();var o="uniqueID"in e?"uniqueID":i;return t||o in e?e[o]:e[o]=n()}}(jQuery),function(e){e.isEmptyObject||(e.isEmptyObject=function(e){for(var t in e)return!1;return!0})}(jQuery),function(e){e.extend({debounce:function(e,t,i,n){3==arguments.length&&"boolean"!=typeof i&&(n=i,i=!1);var o;return function(){var r=arguments;n=n||this,i&&!o&&e.apply(n,r),clearTimeout(o),o=setTimeout(function(){i||e.apply(n,r),o=null},t)}},throttle:function(e,t,i){var n,o,r;return function(){o=arguments,r=!0,i=i||this,n||function(){r?(e.apply(i,o),r=!1,n=setTimeout(arguments.callee,t)):n=null}()}}})}(jQuery),function(e){var t="__"+ +new Date+"storage",i=function(t,i){return e.identify(t)+(i?e.identify(i):"")},n={buildEventName:function(e){return e},on:function(n,o,r,a,s){if("string"==typeof n){e.isFunction(o)&&(a=r,r=o,o=void 0);for(var l,c=i(r,a),u=this[t]||(this[t]={}),d=n.split(" "),h=0;n=d[h++];)if(n=this.buildEventName(n),l=u[n]||(u[n]={ids:{},list:{}}),!(c in l.ids)){var p=l.list,f={fn:r,data:o,ctx:a,special:s};p.last?(p.last.next=f,f.prev=p.last):p.first=f,l.ids[c]=p.last=f}}else{var m=this;e.each(n,function(e,t){m.on(e,t,o,s)})}return this},onFirst:function(e,t,i,n){return this.on(e,t,i,n,{one:!0})},un:function(n,o,r){if("string"==typeof n||"undefined"==typeof n){var a=this[t];if(a)if(n){for(var s,l=n.split(" "),c=0;n=l[c++];)if(n=this.buildEventName(n),s=a[n])if(o){var u=i(o,r),d=s.ids;if(u in d){var h=s.list,p=d[u],f=p.prev,m=p.next;f?f.next=m:p===h.first&&(h.first=m),m?m.prev=f:p===h.last&&(h.last=f),delete d[u]}}else delete this[t][n]}else delete this[t]}else{var g=this;e.each(n,function(e,t){g.un(e,t,r)})}return this},trigger:function(i,n){var o,r=this,a=r[t];if("string"==typeof i?i=e.Event(r.buildEventName(o=i)):i.type=r.buildEventName(o=i.type),i.target||(i.target=r),a&&(a=a[i.type]))for(var s,l=a.list.first;l;)i.data=l.data,s=l.fn.call(l.ctx||r,i,n),"undefined"!=typeof s&&(i.result=s,s===!1&&(i.preventDefault(),i.stopPropagation())),l.special&&l.special.one&&r.un(o,l.fn,l.ctx),l=l.next;return this}};e.observable=e.inherit(n,n)}(jQuery),function(e,t){function i(e,t,i){return(e?"__elem_"+e:"")+"__mod"+(t?"_"+t:"")+(i?"_"+i:"")}function n(t,n,o){e.isFunction(t)?n[i(o,"*","*")]=t:e.each(t,function(t,r){e.isFunction(r)?n[i(o,t,"*")]=r:e.each(r,function(e,r){n[i(o,t,e)]=r})})}function o(e,t){return t?Array.isArray(t)?function(i){for(var n=0,o=t.length;o>n;)if(i.hasMod(e,t[n++]))return!0;return!1}:function(i){return i.hasMod(e,t)}:function(t){return t.hasMod(e)}}var r=[],a={},s={};this.BEM=e.inherit(e.observable,{__constructor:function(e,t,i){var n=this;n._modCache=e||{},n._processingMods={},n._params=t,n.params=null,i!==!1?n._init():n.afterCurrentEvent(function(){n._init()})},_init:function(){return this._initing||this.hasMod("js","inited")||(this._initing=!0,this.params||(this.params=e.extend(this.getDefaultParams(),this._params),delete this._params),this.setMod("js","inited"),delete this._initing,this.hasMod("js","inited")&&this.trigger("init")),this},changeThis:function(e,t){return e.bind(t||this)},afterCurrentEvent:function(e,t){this.__self.afterCurrentEvent(this.changeThis(e,t))},trigger:function(e,t){return this.__base(e=this.buildEvent(e),t).__self.trigger(e,t),this},buildEvent:function(t){return"string"==typeof t&&(t=e.Event(t)),t.block=this,t},hasMod:function(e,i,n){var o=arguments.length,r=!1;1==o?(n="",i=e,e=t,r=!0):2==o&&("string"==typeof e?(n=i,i=e,e=t):(n="",r=!0));var a=this.getMod(e,i)===n;return r?!a:a},getMod:function(e,t){var i=typeof e;if("string"===i||"undefined"===i){t=e||t;var n=this._modCache;return t in n?n[t]:n[t]=this._extractModVal(t)}return this._getElemMod(t,e)},_getElemMod:function(e,t,i){return this._extractModVal(e,t,i)},getMods:function(e){var i=e&&"string"!=typeof e,n=this,o=[].slice.call(arguments,i?1:0),r=n._extractMods(o,i?e:t);return i||(o.length?o.forEach(function(e){n._modCache[e]=r[e]}):n._modCache=r),r},setMod:function(i,n,o){"undefined"==typeof o&&(o=n,n=i,i=t);var r=this;if(!i||i[0]){var a=(i&&i[0]?e.identify(i[0]):"")+"_"+n;if(this._processingMods[a])return r;var s,l=i?r._getElemMod(n,i,s=r.__self._extractElemNameFrom(i)):r.getMod(n);if(l===o)return r;this._processingMods[a]=!0;var c=!0,u=[n,o,l];i&&u.unshift(i),[["*","*"],[n,"*"],[n,o]].forEach(function(e){c=r._callModFn(s,e[0],e[1],u)!==!1&&c}),!i&&c&&(r._modCache[n]=o),c&&r._afterSetMod(n,o,l,i,s),delete this._processingMods[a]}return r},_afterSetMod:function(){},toggleMod:function(e,i,n,o,r){"string"==typeof e&&(r=o,o=n,n=i,i=e,e=t),"undefined"==typeof o?o="":"boolean"==typeof o&&(r=o,o="");var a=this.getMod(e,i);return(a==n||a==o)&&this.setMod(e,i,"boolean"==typeof r?r?n:o:this.hasMod(e,i,n)?o:n),this},delMod:function(e,i){return i||(i=e,e=t),this.setMod(e,i,"")},_callModFn:function(e,n,o,r){var a=i(e,n,o);return this[a]?this[a].apply(this,r):t},_extractModVal:function(){return""},_extractMods:function(){return{}},channel:function(e,t){return this.__self.channel(e,t)},getDefaultParams:function(){return{}},del:function(e){var t=[].slice.call(arguments);return"string"==typeof e&&t.unshift(this),this.__self.del.apply(this.__self,t),this},destruct:function(){}},{_name:"i-bem",blocks:a,decl:function(i,r,s){if("string"==typeof i?i={block:i}:i.name&&(i.block=i.name),i.baseBlock&&!a[i.baseBlock])throw'baseBlock "'+i.baseBlock+'" for "'+i.block+'" is undefined';r||(r={}),r.onSetMod&&(n(r.onSetMod,r),delete r.onSetMod),r.onElemSetMod&&(e.each(r.onElemSetMod,function(e,t){n(t,r,e)}),delete r.onElemSetMod);var l=a[i.baseBlock||i.block]||this;if(i.modName){var c=o(i.modName,i.modVal);e.each(r,function(i,n){e.isFunction(n)&&(r[i]=function(){var e;if(c(this))e=n;else{var o=l.prototype[i];o&&o!==r[i]&&(e=this.__base)}return e?e.apply(this,arguments):t})})}if(s&&"boolean"==typeof s.live){var u=s.live;s.live=function(){return u}}var d;return i.block==l._name?(d=e.inheritSelf(l,r,s))._processLive(!0):(d=a[i.block]=e.inherit(l,r,s))._name=i.block,d},_processLive:function(){return!1},create:function(e,t){return"string"==typeof e&&(e={block:e}),new a[e.block](e.mods,t)},getName:function(){return this._name},_extractElemNameFrom:function(){},afterCurrentEvent:function(e,t){1==r.push({fn:e,ctx:t})&&setTimeout(this._runAfterCurrentEventFns,0)},_runAfterCurrentEventFns:function(){var e=r.length;if(e)for(var t,i=r.splice(0,e);t=i.shift();)t.fn.call(t.ctx||this)},changeThis:function(e,t){return e.bind(t||this)},del:function(e){var t="string"==typeof e,i=t?0:1,n=arguments.length;for(t&&(e=this);n>i;)delete e[arguments[i++]];return this},channel:function(i,n){return"boolean"==typeof i&&(n=i,i=t),i||(i="default"),n?(s[i]&&(s[i].un(),delete s[i]),void 0):s[i]||(s[i]=new e.observable)}})}(jQuery),function(){Object.keys||(Object.keys=function(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i);return t})}(),function(){var e=Array.prototype,t=Object.prototype.toString,i={indexOf:function(e,t){t=+(t||0);var i=this,n=i.length;if(n>0&&n>t)for(t=0>t?Math.ceil(t):Math.floor(t),-n>t&&(t=0),0>t&&(t+=n);n>t;){if(t in i&&i[t]===e)return t;++t}return-1},forEach:function(e,t){for(var i=-1,n=this,o=n.length;++i<o;)i in n&&(t?e.call(t,n[i],i,n):e(n[i],i,n))},map:function(e,t){for(var i=-1,n=this,o=n.length,r=new Array(o);++i<o;)i in n&&(r[i]=t?e.call(t,n[i],i,n):e(n[i],i,n));return r},filter:function(e,t){for(var i=-1,n=this,o=n.length,r=[];++i<o;)i in n&&(t?e.call(t,n[i],i,n):e(n[i],i,n))&&r.push(n[i]);return r},reduce:function(e,t){var i,n=-1,o=this,r=o.length;if(arguments.length<2){for(;++n<r;)if(n in o){i=o[n];break}}else i=t;for(;++n<r;)n in o&&(i=e(i,o[n],n,o));return i},some:function(e,t){for(var i=-1,n=this,o=n.length;++i<o;)if(i in n&&(t?e.call(t,n[i],i,n):e(n[i],i,n)))return!0;return!1},every:function(e,t){for(var i=-1,n=this,o=n.length;++i<o;)if(i in n&&!(t?e.call(t,n[i],i,n):e(n[i],i,n)))return!1;return!0}};for(var n in i)e[n]||(e[n]=i[n]);Array.isArray||(Array.isArray=function(e){return"[object Array]"===t.call(e)})}(),function(){var e=Array.prototype.slice;Function.prototype.bind||(Function.prototype.bind=function(t){var i=this,n=e.call(arguments,1);return function(){return i.apply(t,n.concat(e.call(arguments)))}})}(),function(e,t,i){function n(e,t,i){i.push(a,e,a,t)}function o(e,t,i,o){o.push(e),i&&n(t,i,o)}function r(e,t,r,a,l){o(e,i,i,l),l.push(s,t),a&&n(r,a,l)}var a="_",s="__",l="[a-zA-Z0-9-]+";e.INTERNAL={NAME_PATTERN:l,MOD_DELIM:a,ELEM_DELIM:s,buildModPostfix:function(e,t,i){var o=i||[];return n(e,t,o),i?o:o.join("")},buildClass:function(e,t,n,a,s){var l=typeof n;if("string"==l?"string"!=typeof a&&"number"!=typeof a&&(s=a,a=n,n=t,t=i):"undefined"!=l?(s=n,n=i):t&&"string"!=typeof t&&(s=t,t=i),!(t||n||s))return e;var c=s||[];return t?r(e,t,n,a,c):o(e,n,a,c),s?c:c.join("")},buildClasses:function(e,n,a,s){n&&"string"!=typeof n&&(s=a,a=n,n=i);var l=s||[];return n?r(e,n,i,i,l):o(e,i,i,l),a&&t.each(a,function(t,i){i&&(l.push(" "),n?r(e,n,t,i,l):o(e,t,i,l))}),s?l:l.join("")}}}(BEM,jQuery),function(e,t,i){function n(e,t,i){(e[t]||(e[t]=[])).unshift(i)}function o(e,t){return t.modName?function(i){(i._curBlock.mods||{})[t.modName]===t.modVal&&e(i)}:e}function r(e,i){var n,o=t.isArray(i);return t.isArray(e)?o?n=e.concat(i):(n=e).push(i):o?(n=i).unshift(e):n=[e,i],n}function a(e){return e.replace(f,function(e){return p[e]})}var s=e.INTERNAL,l=s.ELEM_DELIM,c={area:1,base:1,br:1,col:1,command:1,embed:1,hr:1,img:1,input:1,keygen:1,link:1,meta:1,param:1,source:1,wbr:1},u=s.buildClass,d=s.buildClasses,h={},p={"'":"\\'",'"':"'","&":"&amp;","<":"&lt;",">":"&gt;"},f=/['"&<>]/g;e.HTML={decl:function(e,i){"string"==typeof e&&(e={block:e}),e.name&&(e.block=e.name);var r=h[e.block]||(h[e.block]={});i.onBlock&&n(r,"_block",o(i.onBlock,e)),i.onElem&&(t.isFunction(i.onElem)?n(r,"_elem",o(i.onElem,e)):t.each(i.onElem,function(t,i){n(r,"_elem"+("*"===t?"":l+t),o(i,e))}))},build:function(e){var t=new this.Ctx(e);return t._buildAll(),t._flush()},Ctx:t.inherit({__constructor:function(e){this._buffer=[],this._params=e,this._tParams=null,this._tParamsChanges=null,this._curBlock=i},pos:function(){return this._params._pos},isFirst:function(){return 1===this._params._pos},isLast:function(){var e=this._params;return e._pos===e._siblingsCount},params:function(e){var t=this;return"undefined"==typeof e?t._params:(t._params=e,t)},param:function(e,i,n,o){var r=this,a=r._params;return"undefined"==typeof i?a[e]:(!n&&e in a?o&&(a[e]=t.extend(i,a[e])):a[e]=i,r)},attrs:function(e,t){return this.param("attrs",e,t,!0)},attr:function(e,t,i){var n=this;if("undefined"==typeof t)return(n._params.attrs||{})[e];var o=n._params.attrs;return o?(i||!(e in o))&&(o[e]=t):(n._params.attrs={})[e]=t,n},tag:function(e,t){return this.param("tag",e,t)},cls:function(e,t){return this.param("cls",e,t)},mods:function(e,t){return this.param("mods",e,t,!0)},mod:function(e,t,i){var n=this;if("undefined"==typeof t)return(n._params.mods||{})[e];var o=n._params.mods;return o?(i||!(e in o))&&(o[e]=t):(n._params.mods={})[e]=t,n},mix:function(e,t){var i=this,n=i._params;return"undefined"==typeof e?n.mix:(n.mix=!t&&"mix"in n?n.mix.concat(e):e,i)},js:function(e){return this.param("js",e)},content:function(e,t){return this.param("content",e,t)},wrapContent:function(e){var t=this,i=t._params;return e.content=i.content,i.content=e,t},beforeContent:function(e){var t=this,i=t._params;return i.content=r(e,i.content),t},afterContent:function(e){var t=this,i=t._params;return i.content=r(i.content,e),t},wrap:function(e){var t=this,i=t._params;return e.block||(e._curBlock=t._curBlock),e.content=i._wrapper?i._wrapper:i,i._wrapper=e,t},tParam:function(e,t){var i=this,n=i._tParams||(i._tParams={});if("undefined"==typeof t)return n[e];var o=i._tParamsChanges||(i._tParamsChanges={});return e in o||(o[e]=n[e]),n[e]=t,i},generateId:function(){return t.identify()},stop:function(){this._params._isStopped=!0},_buildAll:function(){var e=this,i=e._buffer,n=e._params,o=typeof n;if("string"==o||"number"==o)i.push(n);else if(t.isArray(n))for(var r,a,s=0,l=n.length;l>s;)e._params=r=n[s++],a=typeof r,"string"==a||"number"==a?i.push(r):r&&(r._pos=s,r._siblingsCount=l,e._buildByDecl());else n&&(e._params._pos=e._params._siblingsCount=1,e._buildByDecl())},_build:function(){var e,i=this,n=i._buffer,o=i._params,r=o.tag||"div",s=o.block||o.elem,l=s&&(o.block||i._curBlock.block),h=!1;o.js&&((e={})[u(l,o.elem)]=o.js===!0?{}:o.js,h=!o.elem),n.push("<",r),(s||o.cls)&&(n.push(' class="'),s&&(d(l,o.elem,o.mods,n),o.mix&&t.each(o.mix,function(t,i){i&&(n.push(" "),d(i.block,i.elem,i.mods,n),i.js&&((e||(e={}))[u(i.block,i.elem)]=i.js===!0?{}:i.js,h||(h=!i.elem)))})),o.cls&&n.push(s?" ":"",o.cls),h&&n.push(" i-bem"),n.push('"')),e&&n.push(' onclick="return ',a(JSON.stringify(e)),'"'),o.attrs&&t.each(o.attrs,function(e,t){"undefined"!=typeof t&&null!==t&&t!==!1&&n.push(" ",e,'="',t.toString().replace(/"/g,"&quot;"),'"')}),c[r]?n.push("/>"):(n.push(">"),"undefined"!=typeof o.content&&(i._params=o.content,i._buildAll()),n.push("</",r,">"))},_flush:function(){var e=this._buffer.join("");return delete this._buffer,e},_buildByDecl:function(){var e=this,i=e._curBlock,n=e._params;if(n._curBlock&&(e._curBlock=n._curBlock),n.block&&(e._curBlock=n),!n._wrapper){if(n.block||n.elem){var o=h[e._curBlock.block];if(o){var r;if(n.elem?(r=o["_elem"+l+n.elem],o._elem&&(r=r?r.concat(o._elem):o._elem)):r=o._block,r)for(var a,s=0;(a=r[s++])&&(a(e),!n._isStopped););}}if(n._wrapper)return n._curBlock=e._curBlock,e._params=n._wrapper,e._buildAll()}var c=e._tParamsChanges;if(e._tParamsChanges=null,e._build(),e._curBlock=i,c){var u=e._tParams;t.each(c,function(e,t){"undefined"==typeof t?delete u[e]:u[e]=t})}}})}}(BEM,jQuery),function(e){if(!window.JSON){var t,i=Object.prototype.toString,n=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};window.JSON={stringify:t=function(r){if(null===r)return"null";if("undefined"==typeof r)return e;switch(i.call(r)){case"[object String]":return n.lastIndex=0,'"'+(n.test(r)?r.replace(n,function(e){var t=o[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}):r)+'"';case"[object Number]":case"[object Boolean]":return""+r;case"[object Array]":for(var a,s="[",l=0,c=r.length;c>l;)a=t(r[l]),s+=(l++?",":"")+("undefined"==typeof a?"null":a);return s+"]";case"[object Object]":if("[object Function]"===i.call(r.toJSON))return t(r.toJSON());var a,s="{",l=0;for(var u in r)r.hasOwnProperty(u)&&(a=t(r[u]),"undefined"!=typeof a&&(s+=(l++?",":"")+'"'+u+'":'+a));return s+"}";default:return e}}}}}(),function(e,t,i){function n(e,i){var n=e[0];t.each(s(n),function(a,s){r(s,n,a,i);var l=f[s.uniqId];l?l.domElem.index(n)<0&&(l.domElem=l.domElem.add(e),t.extend(l._params,s)):o(a,e,s)})}function o(e,n,o,a,l){"boolean"==typeof o&&(l=a,a=o,o=i);var c=n[0];o=r(o||s(c)[e],c,e);var u=o.uniqId;if(f[u])return f[u]._init();p[u]=p[u]?p[u].add(n):n;var d=c.parentNode;d&&11!==d.nodeType||t.unique(p[u]);var h=v[e]||w.decl(e,{},{live:!0});if(!(h._liveInitable=!!h._processLive())||a||o.live===!1){var m=new h(p[u],o,!!a);return delete p[u],l&&l.apply(m,Array.prototype.slice.call(arguments,4)),m}}function r(e,i,n,o){(e||(e={})).uniqId||(e.uniqId=(e.id?n+"-id-"+e.id:t.identify())+(o||t.identify()));var r=t.identify(i),a=m[r]||(m[r]={});return a[n]||(a[n]=e),e}function a(e,t,i){var n=e.find(t);return i?n:n.add(e.filter(t))}function s(e){var i=t.identify(e);return m[i]||(m[i]=l(e))}function l(e){var i=e.onclick||e.ondblclick;if(!i&&"body"==e.tagName.toLowerCase()){var n=t(e),o=n.attr("onclick")||n.attr("ondblclick");o&&(i=Function(o))}return i?i():{}}function c(e){delete m[t.identify(e)]}function u(e,t){1===e.domElem.length?e.destruct(!0):e.domElem=e.domElem.not(t)}var d=t(window),h=t(document),p={},f={},m={},g={},b={},v=e.blocks,_=e.INTERNAL,y=_.NAME_PATTERN,k=_.MOD_DELIM,M=_.ELEM_DELIM,E=_.buildModPostfix,B=_.buildClass;t.fn.bem=function(e,t){return o(e,this,t,!0)};var w=e.DOM=e.decl("i-bem__dom",{__constructor:function(e,i,n){var o=this;o.domElem=e,o._eventNameCache={},o._elemCache={},f[o._uniqId=i.uniqId||t.identify(o)]=o,o._needSpecialUnbind=!1,o.__base(null,i,n)},findBlocksInside:function(e,t){return this._findBlocks("find",e,t)},findBlockInside:function(e,t){return this._findBlocks("find",e,t,!0)},findBlocksOutside:function(e,t){return this._findBlocks("parents",e,t)},findBlockOutside:function(e,t){return this._findBlocks("closest",e,t)[0]||null},findBlocksOn:function(e,t){return this._findBlocks("",e,t)},findBlockOn:function(e,t){return this._findBlocks("",e,t,!0)},_findBlocks:function(e,n,r,a){r||(r=n,n=i);var s=n?"string"==typeof n?this.findElem(n):n:this.domElem,l="string"==typeof r,c=l?r:r.block||r.blockName,u="."+(l?B(c):B(c,r.modName,r.modVal))+(a?":first":""),d=s.filter(u);if(e&&(d=d.add(s[e](u))),a)return d[0]?o(c,d.eq(0),!0):null;var h=[],p={};return t.each(d,function(e,i){var n=o(c,t(i),!0);p[n._uniqId]||(p[n._uniqId]=!0,h.push(n))}),h},bindToDomElem:function(e,i,n){var o=this;return n?e.bind(o._buildEventName(i),function(e){return(e.data||(e.data={})).domElem=t(this),n.apply(o,arguments)}):t.each(i,function(t,i){o.bindToDomElem(e,t,i)}),o},bindToDoc:function(e,t){return this._needSpecialUnbind=!0,this.bindToDomElem(h,e,t)},bindToWin:function(e,t){var i,n,o=t;return"resize"===e&&(t=function(){var e=d.height(),t=d.width();(i!==e||n!==t)&&(i=e,n=t,o.apply(this,arguments))}),this._needSpecialUnbind=!0,this.bindToDomElem(d,e,t)},bindTo:function(e,i,n){return!i||t.isFunction(i)?(n=i,i=e,e=this.domElem):"string"==typeof e&&(e=this.elem(e)),this.bindToDomElem(e,i,n)},unbindFromDomElem:function(e,t){return e.unbind(this._buildEventName(t)),this},unbindFromDoc:function(e){return this.unbindFromDomElem(h,e)},unbindFromWin:function(e){return this.unbindFromDomElem(d,e)},unbindFrom:function(e,t){return t?"string"==typeof e&&(e=this.elem(e)):(t=e,e=this.domElem),this.unbindFromDomElem(e,t)},_buildEventName:function(e){var t=this;return e.indexOf(" ")>1?e.split(" ").map(function(e){return t._buildOneEventName(e)}).join(" "):t._buildOneEventName(e)},_buildOneEventName:function(e){var t=this,i=t._eventNameCache;if(e in i)return i[e];var n="."+t._uniqId;if(e.indexOf(".")<0)return i[e]=e+n;var o=".bem_"+t.__self._name;return i[e]=e.split(".").map(function(e,t){return 0==t?e+o:o+"_"+e}).join("")+n},trigger:function(e,t){return this.__base(e=this.buildEvent(e),t).domElem&&this._ctxTrigger(e,t),this},_ctxTrigger:function(e,i){var n=this,o=g[n.__self._buildCtxEventName(e.type)],r={};o&&n.domElem.each(function(){for(var a=this,s=o.counter;a&&s;){var l=t.identify(a,!0);if(l){if(r[l])break;var c=o.ctxs[l];c&&(t.each(c,function(t,o){o.fn.call(o.ctx||n,e,i)}),s--),r[l]=!0}a=a.parentNode}})},setMod:function(e,i,n){if(e&&"undefined"!=typeof n&&e.length>1){var o=this;return e.each(function(){var r=t(this);r.__bemElemName=e.__bemElemName,o.setMod(r,i,n)}),o}return this.__base(e,i,n)},_extractModVal:function(e,t,i){var n,o=(t||this.domElem)[0];return o&&(n=o.className.match(this.__self._buildModValRE(e,i||t))),n?n[2]:""},_extractMods:function(e,t){var i={},n=!e.length,o=0;return((t||this.domElem)[0].className.match(this.__self._buildModValRE("("+(n?y:e.join("|"))+")",t,"g"))||[]).forEach(function(e){var t=(e=e.trim()).lastIndexOf(k),n=e.substr(0,t-1).lastIndexOf(k);i[e.substr(n+1,t-n-1)]=e.substr(t+1),++o}),o<e.length&&e.forEach(function(e){e in i||(i[e]="")}),i},_afterSetMod:function(e,i,n,o,r){var a=this.__self,s=a._buildModClassPrefix(e,r),l=a._buildModValRE(e,r),c=""===i;(o||this.domElem).each(function(){var e=this.className;e.indexOf(s)>-1?this.className=e.replace(l,c?"":"$1"+s+i):c||t(this).addClass(s+i)}),r&&this.dropElemCache(r,e,n).dropElemCache(r,e,i)},findElem:function(e,t,i,n){arguments.length%2?(n=i,i=t,t=e,e=this.domElem):"string"==typeof e&&(e=this.findElem(e));var o=this.__self,r="."+t.split(" ").map(function(e){return B(o._name,e,i,n)}).join(",.");return a(e,r)},_elem:function(e,t,i){var n,o=e+E(t,i);return(n=this._elemCache[o])||(n=this._elemCache[o]=this.findElem(e,t,i),n.__bemElemName=e),n},elem:function(e,i,n){if(i&&"string"!=typeof i)return i.__bemElemName=e,i;if(e.indexOf(" ")<0)return this._elem(e,i,n);var o=t([]),r=this;return e.split(" ").forEach(function(e){o=o.add(r._elem(e,i,n))}),o},dropElemCache:function(e,t,i){if(e){var n=this,o=E(t,i);e.indexOf(" ")<0?delete n._elemCache[e+o]:e.split(" ").forEach(function(e){delete n._elemCache[e+o]})}else this._elemCache={};return this},elemParams:function(e){var t;return"string"==typeof e?(t=e,e=this.elem(e)):t=this.__self._extractElemNameFrom(e),l(e[0])[B(this.__self.getName(),t)]||{}},elemify:function(e,i){return(e=t(e)).__bemElemName=i,e},containsDomElem:function(e){var t=!1;return this.domElem.each(function(){return!(t=e.parents().andSelf().index(this)>-1)}),t},buildSelector:function(e,t,i){return this.__self.buildSelector(e,t,i)},destruct:function(e){var i=this,n=i.__self;i._isDestructing=!0,i._needSpecialUnbind&&n.doc.add(n.win).unbind("."+i._uniqId),i.dropElemCache().domElem.each(function(e,i){var n=s(i);t.each(n,function(e,t){var n=f[t.uniqId];n?n._isDestructing||u(n,i):delete p[t.uniqId]}),c(i)}),e||i.domElem.remove(),delete f[i.un()._uniqId],delete i.domElem,delete i._elemCache,i.__base()}},{scope:null,doc:h,win:d,_processLive:function(e){var t=this,i=t._liveInitable;if("live"in t){var n="undefined"==typeof i;n^e&&(i=t.live()!==!1,t.live=function(){})}return i},init:function(e,i,o){(!e||t.isFunction(e))&&(o=i,i=e,e=h);var r=t.identify();return a(e,".i-bem").each(function(){n(t(this),r)}),i&&this.afterCurrentEvent(function(){i.call(o||this,e)}),this._runAfterCurrentEventFns(),e},destruct:function(e,n,o){"boolean"!=typeof e&&(o=n,n=e,e=i),a(n,".i-bem",o).each(function(e,i){var n=s(this);t.each(n,function(e,t){if(t.uniqId){var n=f[t.uniqId];n?u(n,i):delete p[t.uniqId]}}),c(this)}),e||(o?n.empty():n.remove())},update:function(e,t,i,n){this.destruct(e,!0),this.init(e.html(t),i,n)},replace:function(e,i){this.destruct(!0,e),this.init(t(i).replaceAll(e))},append:function(e,i){this.init(t(i).appendTo(e))},prepend:function(e,i){this.init(t(i).prependTo(e))},before:function(e,i){this.init(t(i).insertBefore(e))},after:function(e,i){this.init(t(i).insertAfter(e))},_buildCtxEventName:function(e){return this._name+":"+e},_liveClassBind:function(e,i,n,o){var r=this;if(i.indexOf(" ")>-1)i.split(" ").forEach(function(t){r._liveClassBind(e,t,n,o)});else{var a=b[i],s=t.identify(n);a||(a=b[i]={},h.bind(i,r.changeThis(r._liveClassTrigger,r))),a=a[e]||(a[e]={uniqIds:{},fns:[]}),s in a.uniqIds||(a.fns.push({uniqId:s,fn:r._buildLiveEventFn(n,o)}),a.uniqIds[s]=a.fns.length-1)}return this},_liveClassUnbind:function(e,i,n){var o=b[i];if(o)if(n){if(o=o[e]){var r=t.identify(n);if(r in o.uniqIds){var a=o.uniqIds[r],s=o.fns.length-1;for(o.fns.splice(a,1);s>a;)o.uniqIds[o.fns[a++].uniqId]=a-1;delete o.uniqIds[r]}}}else delete o[e];return this},_liveClassTrigger:function(e){var i=b[e.type];if(i){var n=e.target,o=[];for(var r in i)i.hasOwnProperty(r)&&o.push(r);do for(var a=" "+n.className+" ",s=0;r=o[s++];)if(a.indexOf(" "+r+" ")>-1){for(var l,c=0,u=i[r].fns,d=!1;l=u[c++];)l.fn.call(t(n),e)===!1&&(d=!0);if(d&&e.preventDefault(),d||e.isPropagationStopped())return;o.splice(--s,1)}while(o.length&&(n=n.parentNode))}},_buildLiveEventFn:function(e,i){var n=this;return function(r){var a=[n._name,((r.data||(r.data={})).domElem=t(this)).closest(n.buildSelector()),!0],s=o.apply(null,i?a.concat([e,r]):a);return s&&!i&&e?e.apply(s,arguments):void 0}},liveInitOnEvent:function(e,t,i){return this.liveBindTo(e,t,i,!0)},liveBindTo:function(e,n,o,r){(!n||t.isFunction(n))&&(o=n,n=e,e=i),e&&"string"!=typeof e||(e={elem:e}),e.elemName&&(e.elem=e.elemName);var a=this;return e.elem&&e.elem.indexOf(" ")>0?(e.elem.split(" ").forEach(function(t){a._liveClassBind(B(a._name,t,e.modName,e.modVal),n,o,r)}),a):a._liveClassBind(B(a._name,e.elem,e.modName,e.modVal),n,o,r)},liveUnbindFrom:function(e,t,i){var n=this;return e.indexOf(" ")>1?(e.split(" ").forEach(function(e){n._liveClassUnbind(B(n._name,e),t,i)}),n):n._liveClassUnbind(B(n._name,e),t,i)},_liveInitOnBlockEvent:function(e,t,i,n){var o=this._name;return v[t].on(e,function(e){if(e.block.domElem){var t=arguments,r=e.block[n](o);i&&r.forEach(function(e){i.apply(e,t)})}}),this},liveInitOnBlockEvent:function(e,t,i){return this._liveInitOnBlockEvent(e,t,i,"findBlocksOn")},liveInitOnBlockInsideEvent:function(e,t,i){return this._liveInitOnBlockEvent(e,t,i,"findBlocksOutside")},liveInitOnBlockInit:function(e,t){return this.liveInitOnBlockEvent("init",e,t)},liveInitOnBlockInsideInit:function(e,t){return this.liveInitOnBlockInsideEvent("init",e,t)},on:function(e,t,i,n,o){return e.jquery?this._liveCtxBind(e,t,i,n,o):this.__base(e,t,i,n)},un:function(e,t,i,n){return e.jquery?this._liveCtxUnbind(e,t,i,n):this.__base(e,t,i)},liveCtxBind:function(e,t,i,n,o){return this._liveCtxBind(e,t,i,n,o)},_liveCtxBind:function(e,n,o,r,a){var s=this;if("string"==typeof n)if(t.isFunction(o)&&(a=r,r=o,o=i),n.indexOf(" ")>-1)n.split(" ").forEach(function(t){s._liveCtxBind(e,t,o,r,a)});else{var l=s._buildCtxEventName(n),c=g[l]||(g[l]={counter:0,ctxs:{}});e.each(function(){var e=t.identify(this),i=c.ctxs[e];i||(i=c.ctxs[e]={},++c.counter),i[t.identify(r)+(a?t.identify(a):"")]={fn:r,data:o,ctx:a}})}else t.each(n,function(t,i){s._liveCtxBind(e,t,i,o)});return s},liveCtxUnbind:function(e,t,i,n){return this._liveCtxUnbind(e,t,i,n)},_liveCtxUnbind:function(e,i,n,o){var r=this,a=g[i=r._buildCtxEventName(i)];return a&&(e.each(function(){var e,i=t.identify(this,!0);i&&(e=a.ctxs[i])&&(n&&delete e[t.identify(n)+(o?t.identify(o):"")],(!n||t.isEmptyObject(e))&&(a.counter--,delete a.ctxs[i]))}),a.counter||delete g[i]),r},_extractElemNameFrom:function(e){if(e.__bemElemName)return e.__bemElemName;var t=e[0].className.match(this._buildElemNameRE());return t?t[1]:i},extractParams:l,_buildModClassPrefix:function(e,t){return B(this._name)+(t?M+("string"==typeof t?t:this._extractElemNameFrom(t)):"")+k+e+k},_buildModValRE:function(e,t,i){return new RegExp("(\\s|^)"+this._buildModClassPrefix(e,t)+"("+y+")(?=\\s|$)",i)},_buildElemNameRE:function(){return new RegExp(this._name+M+"("+y+")(?:\\s|$)")},buildSelector:function(e,t,i){return"."+B(this._name,e,t,i)},getBlockByUniqId:function(e){return f[e]},getWindowSize:function(){return{width:d.width(),height:d.height()}}});t(function(){e.DOM.scope=t("body")})}(BEM,jQuery),function(){String.prototype.trim||(String.prototype.trim=function(){for(var e=this.replace(/^\s\s*/,""),t=/\s/,i=e.length;t.test(e.charAt(--i)););return e.slice(0,i+1)})}(),BEM.DOM.decl("i-global",{onSetMod:{js:function(){this.del(this.__self._params=$.extend({},this.params),"uniqId","name"),this.__self._params}},getDefaultParams:function(){return{"appcurl-host":"www.appcurl.com","api-airomo-host":"api.airomo.com","airomo-host":"www.airomo.com","appsociety-host":"apps.airomo.com","api-host":"api.airomo.com","app-api-host":"appapi.airomo.com","airomo-static-host":"static.airomo.com","page-url":"/","facebook-app-permissions":["email","user_status","read_friendlists","publish_actions","user_birthday","user_about_me"]}}},{param:function(e){return(this._params||{})[e]}}),$(function(){BEM.DOM.init()}),BEM.DOM.decl("b-page",{onSetMod:{js:function(){this.__base.apply(this,arguments),BEM.blocks["b-form-input"].on(this.findBlockInside("appcurl-search").domElem,"update-items",this._scrollToBottom)},mode:{serp:function(){BEM.blocks["b-form-input"].un(this.findBlockInside("appcurl-search").domElem,"update-items",this._scrollToBottom)},"":function(){BEM.blocks["b-form-input"].on(this.findBlockInside("appcurl-search").domElem,"update-items",this._scrollToBottom)}}},_scrollToBottom:function(){$("html, body").animate({scrollTop:$(".popup__switcher.why").offset().top},500)}}),function(e){BEM.decl("appcurl-api",{},{search:function(t,i,n){return n||(n=i,i={}),i.q=t,this._sendRequest("search",i,n),delete i.page,delete i.tags,delete i.categories,delete i.q,delete i.withFacets,delete i.withLikes,e.cookie("appcurl_search_params",e.param(i)),this},quickSearch:function(e,t,i){return i||(i=t,t={}),t.q=e,this._sendRequest("qs",t,i),this},getAppFeed:function(e,t,i){return i||(i=t,t={size:6}),t.appId=e,this._sendRequest("appFeeds",t,i),this},getCategories:function(e){var t=this;this._getCategories(function(i){var n={};return i.forEach(function(e){n[e.id]=e.name,e.subcategories&&e.subcategories.forEach(function(e){n[e.id]=e.name})}),e(n),t.trigger("getCategories",{categories:n}),t})},_getCategories:function(e){var t={result:[{name:"Books & Reference",id:1},{name:"Business",id:2},{name:"Educational",id:3},{name:"Entertainment",id:4},{name:"Finance",id:5},{name:"Games",id:6,subcategories:[{name:"Action",id:31},{name:"Adventure",id:32},{name:"Arcade",id:33},{name:"Board",id:34},{name:"Card",id:35},{name:"Casino",id:36},{name:"Dice",id:37},{name:"Educational",id:38},{name:"Family",id:39},{name:"Kids",id:40},{name:"Music",id:41},{name:"Puzzle",id:42},{name:"Racing",id:43},{name:"Role Playing",id:44},{name:"Simulation",id:45},{name:"Sports",id:46},{name:"Strategy",id:47},{name:"Trivia",id:48},{name:"Word",id:49},{name:"Misc.",id:50}]},{name:"Health & Fitness",id:7},{name:"Lifestyle",id:8},{name:"Media & Video",id:9},{name:"Medical",id:10},{name:"Music & Audio",id:11},{name:"Navigation",id:12},{name:"News & Magazines",id:13},{name:"Photography",id:14},{name:"Productivity",id:15},{name:"Social",id:17},{name:"Shopping",id:16},{name:"Travel & Local",id:19},{name:"Sports",id:18},{name:"Weather",id:21},{name:"Utilities",id:20},{name:"Personalization",id:23}],total:22};return e(t.result),this},_sendRequest:function(t,i,n){var o=this,r={search:"appSearch",qs:"appQs"},a=r[t]||t;i=e.extend({},i),AI[a](i,function(e,i){return e?(console.log("API request of ",a," resulted in  error: ",e,i),void 0):(o.trigger(t,{data:i}),n(i),void 0)},!0)}})}(jQuery);var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-27594594-1"]),_gaq.push(["_setDomainName","appcurl.com"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");
e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),function(e,t,i){(t[i]=t[i]||[]).push(function(){try{t.yaCounter22600246=new Ya.Metrika({id:22600246,webvisor:!0,clickmap:!0,trackLinks:!0,accurateTrackBounce:!0,trackHash:!0})}catch(e){}});var n=e.getElementsByTagName("script")[0],o=e.createElement("script"),r=function(){n.parentNode.insertBefore(o,n)};o.type="text/javascript",o.async=!0,o.src=("https:"==e.location.protocol?"https:":"http:")+"//mc.yandex.ru/metrika/watch.js","[object Opera]"==t.opera?e.addEventListener("DOMContentLoaded",r,!1):r()}(document,window,"yandex_metrika_callbacks"),BEM.DOM.decl("infopane",{onSetMod:{js:function(){this.__self.pane=this}}},{show:function(e,t,i){this.pane.hasMod("visibility")&&this.getNewPane();var n=this.pane;e="object"==typeof e?BEMHTML.apply(e):e,t?n.setMod("type",t):n.delMod("type"),n.elem("text").html(e),i&&setTimeout(function(){n.delMod("visibility")},i),n.setMod("visibility","visible")},getNewPane:function(){BEM.DOM.after(this.pane.domElem,BEMHTML.apply({block:"infopane"}))}}),function(e){"use strict";var t=e.document,i=e.setTimeout||i,n=e.clearTimeout||n,o=e.setInterval||o,r=e.History=e.History||{};if("undefined"!=typeof r.initHtml4)throw new Error("History.js HTML4 Support has already been loaded...");r.initHtml4=function(){return"undefined"!=typeof r.initHtml4.initialized?!1:(r.initHtml4.initialized=!0,r.enabled=!0,r.savedHashes=[],r.isLastHash=function(e){var t,i=r.getHashByIndex();return t=e===i},r.saveHash=function(e){return r.isLastHash(e)?!1:(r.savedHashes.push(e),!0)},r.getHashByIndex=function(e){var t=null;return t="undefined"==typeof e?r.savedHashes[r.savedHashes.length-1]:0>e?r.savedHashes[r.savedHashes.length+e]:r.savedHashes[e]},r.discardedHashes={},r.discardedStates={},r.discardState=function(e,t,i){var n,o=r.getHashByState(e);return n={discardedState:e,backState:i,forwardState:t},r.discardedStates[o]=n,!0},r.discardHash=function(e,t,i){var n={discardedHash:e,backState:i,forwardState:t};return r.discardedHashes[e]=n,!0},r.discardedState=function(e){var t,i=r.getHashByState(e);return t=r.discardedStates[i]||!1},r.discardedHash=function(e){var t=r.discardedHashes[e]||!1;return t},r.recycleState=function(e){var t=r.getHashByState(e);return r.discardedState(e)&&delete r.discardedStates[t],!0},r.emulated.hashChange&&(r.hashChangeInit=function(){r.checkerFunction=null;var i,n,a,s,l="";return r.isInternetExplorer()?(i="historyjs-iframe",n=t.createElement("iframe"),n.setAttribute("id",i),n.style.display="none",t.body.appendChild(n),n.contentWindow.document.open(),n.contentWindow.document.close(),a="",s=!1,r.checkerFunction=function(){if(s)return!1;s=!0;var t=r.getHash()||"",i=r.unescapeHash(n.contentWindow.document.location.hash)||"";return t!==l?(l=t,i!==t&&(a=i=t,n.contentWindow.document.open(),n.contentWindow.document.close(),n.contentWindow.document.location.hash=r.escapeHash(t)),r.Adapter.trigger(e,"hashchange")):i!==a&&(a=i,r.setHash(i,!1)),s=!1,!0}):r.checkerFunction=function(){var t=r.getHash();return t!==l&&(l=t,r.Adapter.trigger(e,"hashchange")),!0},r.intervalList.push(o(r.checkerFunction,r.options.hashChangeInterval)),!0},r.Adapter.onDomLoad(r.hashChangeInit)),r.emulated.pushState&&(r.onHashChange=function(i){var n,o=i&&i.newURL||t.location.href,a=r.getHashByUrl(o),s=null,l=null;return r.isLastHash(a)?(r.busy(!1),!1):(r.doubleCheckComplete(),r.saveHash(a),a&&r.isTraditionalAnchor(a)?(r.Adapter.trigger(e,"anchorchange"),r.busy(!1),!1):(s=r.extractState(r.getFullUrl(a||t.location.href,!1),!0),r.isLastSavedState(s)?(r.busy(!1),!1):(l=r.getHashByState(s),(n=r.discardedState(s))?(r.getHashByIndex(-2)===r.getHashByState(n.forwardState)?r.back(!1):r.forward(!1),!1):(r.pushState(s.data,s.title,s.url,!1),!0))))},r.Adapter.bind(e,"hashchange",r.onHashChange),r.pushState=function(i,n,o,a){if(r.getHashByUrl(o))throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(a!==!1&&r.busy())return r.pushQueue({scope:r,callback:r.pushState,args:arguments,queue:a}),!1;r.busy(!0);var s=r.createStateObject(i,n,o),l=r.getHashByState(s),c=r.getState(!1),u=r.getHashByState(c),d=r.getHash();return r.storeState(s),r.expectedStateId=s.id,r.recycleState(s),l===u?(r.busy(!1),!1):(l!==d&&l!==r.getShortUrl(t.location.href)&&r.setHash(l,!1),r.saveState(s),r.Adapter.trigger(e,"statechange"),r.busy(!1),!0)},r.replaceState=function(e,t,i,n){if(r.getHashByUrl(i))throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(n!==!1&&r.busy())return r.pushQueue({scope:r,callback:r.replaceState,args:arguments,queue:n}),!1;r.busy(!0);var o=r.createStateObject(e,t,i),a=r.getState(!1),s=r.getStateByIndex(-2);return r.discardState(a,o,s),r.pushState(o.data,o.title,o.url,!1),!0}),r.emulated.pushState&&r.getHash()&&!r.emulated.hashChange&&r.Adapter.onDomLoad(function(){r.Adapter.trigger(e,"hashchange")}),void 0)},"undefined"!=typeof r.init&&r.init()}(window),function(e,t){"use strict";var i=e.History=e.History||{},n=e.jQuery;if("undefined"!=typeof i.Adapter)throw new Error("History.js Adapter has already been loaded...");i.Adapter={bind:function(e,t,i){n(e).bind(t,i)},trigger:function(e,t,i){n(e).trigger(t,i)},extractEventData:function(e,i,n){var o=i&&i.originalEvent&&i.originalEvent[e]||n&&n[e]||t;return o},onDomLoad:function(e){n(e)}},"undefined"!=typeof i.init&&i.init()}(window),function(e,t,i){"use strict";var n=e.console||i,o=e.document,r=e.navigator,a=e.sessionStorage||!1,s=e.setTimeout,l=e.clearTimeout,c=e.setInterval,u=e.clearInterval,d=e.JSON,h=(e.alert,e.History=e.History||{}),p=e.history,f="#!",m=/\#!/;if("undefined"!=typeof h.init)throw new Error("History.js Core has already been loaded...");h.init=function(){return"undefined"==typeof h.Adapter?!1:("undefined"!=typeof h.initCore&&h.initCore(),"undefined"!=typeof h.initHtml4&&h.initHtml4(),!0)},h.initCore=function(){if("undefined"!=typeof h.initCore.initialized)return!1;if(h.initCore.initialized=!0,h.options=h.options||{},h.options.hashChangeInterval=h.options.hashChangeInterval||250,h.options.safariPollInterval=h.options.safariPollInterval||500,h.options.doubleCheckInterval=h.options.doubleCheckInterval||500,h.options.storeInterval=h.options.storeInterval||1e3,h.options.busyDelay=h.options.busyDelay||250,h.options.debug=!0,h.options.initialTitle=h.options.initialTitle||o.title,h.options.sessionStorage=h.options.sessionStorage||!1,h.intervalList=[],h.clearAllIntervals=function(){var e,t=h.intervalList;if("undefined"!=typeof t&&null!==t){for(e=0;e<t.length;e++)u(t[e]);h.intervalList=null}},h.debug=function(){h.options.debug&&h.log.apply(h,arguments)},h.log=function(){var e,t,i=!("undefined"==typeof n||"undefined"==typeof n.log||"undefined"==typeof n.log.apply);return i&&(t=Array.prototype.slice.call(arguments),e=t.shift(),"undefined"!=typeof n.debug?n.debug.apply(n,[e,t]):n.log.apply(n,[e,t])),!0},h.getInternetExplorerMajorVersion=function(){var e=h.getInternetExplorerMajorVersion.cached="undefined"!=typeof h.getInternetExplorerMajorVersion.cached?h.getInternetExplorerMajorVersion.cached:function(){for(var e=3,t=o.createElement("div"),i=t.getElementsByTagName("i");(t.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->")&&i[0];);return e>4?e:!1}();return e},h.isInternetExplorer=function(){var e=h.isInternetExplorer.cached="undefined"!=typeof h.isInternetExplorer.cached?h.isInternetExplorer.cached:Boolean(h.getInternetExplorerMajorVersion());return e},h.emulated={pushState:!Boolean(e.history&&e.history.pushState&&e.history.replaceState&&!(/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(r.userAgent)||/AppleWebKit\/5([0-2]|3[0-2])/i.test(r.userAgent)||/Bada\/([\d.]+)/i.test(r.userAgent))),hashChange:Boolean(!("onhashchange"in e||"onhashchange"in o)||h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<8)},h.enabled=!h.emulated.pushState,h.bugs={setHash:Boolean(!h.emulated.pushState&&"Apple Computer, Inc."===r.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(r.userAgent)),safariPoll:Boolean(!h.emulated.pushState&&"Apple Computer, Inc."===r.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(r.userAgent)),ieDoubleCheck:Boolean(h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<7)},h.isEmptyObject=function(e){for(var t in e)return!1;return!0},h.cloneObject=function(e){return e?t.extend({},e):{}},h.getRootUrl=function(){var e=o.location.protocol+"//"+(o.location.hostname||o.location.host);return o.location.port&&(e+=":"+o.location.port),e+="/"},h.getBaseHref=function(){var e=o.getElementsByTagName("base"),t=null,i="";return 1===e.length&&(t=e[0],i=t.href.replace(/[^\/]+$/,"")),i=i.replace(/\/+$/,""),i&&(i+="/"),i},h.getBaseUrl=function(){var e=h.getBaseHref()||h.getBasePageUrl()||h.getRootUrl();return e},h.getPageUrl=function(){var e,t=h.getState(!1,!1),i=(t||{}).url||o.location.href;return e=i.replace(/\/+$/,"").replace(/[^\/]+$/,function(e){return/\./.test(e)?e:e+"/"})},h.getBasePageUrl=function(){var e=o.location.href.replace(/[#\?].*/,"").replace(/[^\/]+$/,function(e){return/[^\/]$/.test(e)?"":e}).replace(/\/+$/,"")+"/";return e},h.getFullUrl=function(e,t){var i=e,n=e.substring(0,1);return t="undefined"==typeof t?!0:t,/[a-z]+\:\/\//.test(e)||(i="/"===n?h.getRootUrl()+e.replace(/^\/+/,""):"#"===n?h.getPageUrl().replace(/#.*/,"")+e:"?"===n?h.getPageUrl().replace(/[\?#].*/,"")+e:t?h.getBaseUrl()+e.replace(/^(\.\/)+/,""):h.getBasePageUrl()+e.replace(/^(\.\/)+/,"")),i.replace(/\#$/,"")},h.getShortUrl=function(e){var t=e,i=h.getBaseUrl(),n=h.getRootUrl();return h.emulated.pushState&&(t=t.replace(i,"/")),t=t.replace(n,"/"),h.isTraditionalAnchor(t)&&(t="/"+t),t=t.replace(/^(\.\/)+/g,"./").replace(/\#$/,"").replace(m,"").replace("//","/")},h.store={},h.idToState=h.idToState||{},h.stateToId=h.stateToId||{},h.urlToId=h.urlToId||{},h.storedStates=h.storedStates||[],h.savedStates=h.savedStates||[],h.normalizeStore=function(){h.store.idToState=h.store.idToState||{},h.store.urlToId=h.store.urlToId||{},h.store.stateToId=h.store.stateToId||{}},h.getState=function(e,t){"undefined"==typeof e&&(e=!0),"undefined"==typeof t&&(t=!0);var i=h.getLastSavedState();return!i&&t&&(i=h.createStateObject()),e&&(i=h.cloneObject(i),i.url=i.url),i},h.getIdByState=function(e){var t,i=h.extractId(e.url);if(!i)if(t=h.getStateString(e),"undefined"!=typeof h.stateToId[t])i=h.stateToId[t];else if("undefined"!=typeof h.store.stateToId[t])i=h.store.stateToId[t];else{for(;;)if(i=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),"undefined"==typeof h.idToState[i]&&"undefined"==typeof h.store.idToState[i])break;h.stateToId[t]=i,h.idToState[i]=e}return i},h.normalizeState=function(e){var t;return e&&"object"==typeof e||(e={}),"undefined"!=typeof e.normalized?e:(e.data&&"object"==typeof e.data||(e.data={}),t={},t.normalized=!0,t.title=e.title||"",t.url=h.getFullUrl(e.url||o.location.href),t.hash=h.getShortUrl(t.url),t.data=h.cloneObject(e.data),t.id=h.getIdByState(t),t.url=t.url.replace(/\??\&_suid.*/,""),t.hashedUrl=h.getFullUrl(h.getShortUrl(t.url)),(h.emulated.pushState||h.bugs.safariPoll)&&h.hasUrlDuplicate(t)&&(t.url=t.hashedUrl),t)},h.createStateObject=function(e,t,i){var n={data:e,title:t,url:i};return n=h.normalizeState(n)},h.getStateById=function(e){e=String(e);var t=h.idToState[e]||h.store.idToState[e]||i;return t},h.getStateString=function(e){var t,i,n;return t=h.normalizeState(e),i={data:t.data,title:e.title,url:e.url},n=d.stringify(i)},h.getStateId=function(e){var t,i;return t=h.normalizeState(e),i=t.id},h.getHashByState=function(e){var t,i;return t=h.normalizeState(e),i=t.hash},h.extractId=function(e){var t,i,n;return i=/(.*)\&_suid=([0-9]+)$/.exec(e),n=i?i[1]||e:e,t=i?String(i[2]||""):"",t||!1},h.isTraditionalAnchor=function(e){var t=!/[\/\?\.]/.test(e);return t},h.extractState=function(e,t){var i,n,o=null;return t=t||!1,i=h.extractId(e),i&&(o=h.getStateById(i)),o||(n=h.getFullUrl(e),i=h.getIdByUrl(n)||!1,i&&(o=h.getStateById(i)),o||!t||h.isTraditionalAnchor(e)||(o=h.createStateObject(null,null,n))),o},h.getIdByUrl=function(e){var t=h.urlToId[e]||h.store.urlToId[e]||i;return t},h.getLastSavedState=function(){return h.savedStates[h.savedStates.length-1]||i},h.getLastStoredState=function(){return h.storedStates[h.storedStates.length-1]||i},h.hasUrlDuplicate=function(e){var t,i=!1;return t=h.extractState(e.url),i=t&&t.id!==e.id},h.storeState=function(e){return h.urlToId[e.url]=e.id,h.storedStates.push(h.cloneObject(e)),e},h.isLastSavedState=function(e){var t,i,n,o=!1;return h.savedStates.length&&(t=e.id,i=h.getLastSavedState(),n=i.id,o=t===n),o},h.saveState=function(e){return h.isLastSavedState(e)?!1:(h.savedStates.push(h.cloneObject(e)),!0)},h.getStateByIndex=function(e){var t=null;return t="undefined"==typeof e?h.savedStates[h.savedStates.length-1]:0>e?h.savedStates[h.savedStates.length+e]:h.savedStates[e]},h.getHash=function(){return h.unescapeHash(o.location.hash)},h.unescapeString=function(t){for(var i,n=t;;){if(i=e.decodeURI(n),i===n)break;n=i}return n},h.unescapeHash=function(e){var t=h.normalizeHash(e);return t=h.unescapeString(t)},h.normalizeHash=function(e){var t=e.replace(/[^#]*#!?/,"").replace(/#.*/,"");return t},h.setHash=function(e,t){var i,n,r;return t!==!1&&h.busy()?(h.pushQueue({scope:h,callback:h.setHash,args:arguments,queue:t}),!1):(i=e,h.busy(!0),n=h.extractState(e,!0),n&&!h.emulated.pushState?h.pushState(n.data,n.title,n.url,!1):o.location.hash!==i&&(h.bugs.setHash?(r=h.getPageUrl(),h.pushState(null,null,r+f+i,!1)):h.setDocumentHash(f+i)),h)},h.setDocumentHash=function(e){o.location.hash=e.replace(/#/,"")},h.escapeHash=function(t){var i=h.normalizeHash(t);return i=e.encodeURI(i),h.bugs.hashEscape||(i=i.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),i},h.getHashByUrl=function(e){var t=String(e||"").replace(/([^#]*)(#(!\/)?)?([^#]*)#?(.*)/,"$4");return t=h.unescapeHash(t)},h.setTitle=function(e){var t,i=e.title;i||(t=h.getStateByIndex(0),t&&t.url===e.url&&(i=t.title||h.options.initialTitle));try{o.getElementsByTagName("title")[0].innerHTML=i}catch(n){}return o.title=i,h},h.queues=[],h.busy=function(e){if("undefined"!=typeof e?h.busy.flag=e:"undefined"==typeof h.busy.flag&&(h.busy.flag=!1),!h.busy.flag){l(h.busy.timeout);var t=function(){var e,i,n;if(!h.busy.flag)for(e=h.queues.length-1;e>=0;--e)i=h.queues[e],0!==i.length&&(n=i.shift(),h.fireQueueItem(n),h.busy.timeout=s(t,h.options.busyDelay))};h.busy.timeout=s(t,h.options.busyDelay)}return h.busy.flag},h.busy.flag=!1,h.fireQueueItem=function(e){return e.callback.apply(e.scope||h,e.args||[])},h.pushQueue=function(e){return h.queues[e.queue||0]=h.queues[e.queue||0]||[],h.queues[e.queue||0].push(e),h},h.queue=function(e,t){return"function"==typeof e&&(e={callback:e}),"undefined"!=typeof t&&(e.queue=t),h.busy()?h.pushQueue(e):h.fireQueueItem(e),h},h.clearQueue=function(){return h.busy.flag=!1,h.queues=[],h},h.stateChanged=!1,h.doubleChecker=!1,h.doubleCheckComplete=function(){return h.stateChanged=!0,h.doubleCheckClear(),h},h.doubleCheckClear=function(){return h.doubleChecker&&(l(h.doubleChecker),h.doubleChecker=!1),h},h.doubleCheck=function(e){return h.stateChanged=!1,h.doubleCheckClear(),h.bugs.ieDoubleCheck&&(h.doubleChecker=s(function(){return h.doubleCheckClear(),h.stateChanged||e(),!0},h.options.doubleCheckInterval)),h},h.safariStatePoll=function(){var t,i=h.extractState(o.location.href);if(!h.isLastSavedState(i))return t=i,t||(t=h.createStateObject()),h.Adapter.trigger(e,"popstate"),h},h.back=function(e){return e!==!1&&h.busy()?(h.pushQueue({scope:h,callback:h.back,args:arguments,queue:e}),!1):(h.busy(!0),h.doubleCheck(function(){h.back(!1)}),p.go(-1),!0)},h.forward=function(e){return e!==!1&&h.busy()?(h.pushQueue({scope:h,callback:h.forward,args:arguments,queue:e}),!1):(h.busy(!0),h.doubleCheck(function(){h.forward(!1)}),p.go(1),!0)},h.go=function(e,t){var i;if(e>0)for(i=1;e>=i;++i)h.forward(t);else{if(!(0>e))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(i=-1;i>=e;--i)h.back(t)}return h},h.emulated.pushState){var g=function(){};h.pushState=h.pushState||g,h.replaceState=h.replaceState||g}else h.onPopState=function(t,i){var n,r,a=!1,s=!1;return h.doubleCheckComplete(),(n=h.getHash())?(r=h.extractState(n||o.location.href,!0),r?h.replaceState(r.data,r.title,r.url,!1):(h.Adapter.trigger(e,"anchorchange"),h.busy(!1)),h.expectedStateId=!1,!1):(a=h.Adapter.extractEventData("state",t,i)||!1,s=a?h.getStateById(a):h.expectedStateId?h.getStateById(h.expectedStateId):h.extractState(o.location.href),s||(s=h.createStateObject(null,null,o.location.href)),h.expectedStateId=!1,h.isLastSavedState(s)?(h.busy(!1),!1):(h.storeState(s),h.saveState(s),h.Adapter.trigger(e,"statechange"),h.busy(!1),!0))},h.Adapter.bind(e,"popstate",h.onPopState),h.pushState=function(t,i,n,o){if(h.getHashByUrl(n)&&h.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(o!==!1&&h.busy())return h.pushQueue({scope:h,callback:h.pushState,args:arguments,queue:o}),!1;h.busy(!0);var r=h.createStateObject(t,i,n);return h.isLastSavedState(r)?h.busy(!1):(h.storeState(r),h.expectedStateId=r.id,p.pushState(r.id,r.title,r.url),h.Adapter.trigger(e,"popstate")),!0},h.replaceState=function(t,i,n,o){if(h.getHashByUrl(n)&&h.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(o!==!1&&h.busy())return h.pushQueue({scope:h,callback:h.replaceState,args:arguments,queue:o}),!1;h.busy(!0);var r=h.createStateObject(t,i,n);return h.isLastSavedState(r)?h.busy(!1):(h.storeState(r),h.expectedStateId=r.id,p.replaceState(r.id,r.title,r.url),h.Adapter.trigger(e,"popstate")),!0};if(a&&h.options.sessionStorage){try{h.store=d.parse(a.getItem("History.store"))||{}}catch(b){h.store={}}h.normalizeStore()}else h.store={},h.normalizeStore();h.Adapter.bind(e,"beforeunload",h.clearAllIntervals),h.Adapter.bind(e,"unload",h.clearAllIntervals),h.saveState(h.storeState(h.extractState(o.location.href,!0))),a&&h.options.sessionStorage&&(h.onUnload=function(){var e,t;try{e=d.parse(a.getItem("History.store"))||{}}catch(i){e={}}e.idToState=e.idToState||{},e.urlToId=e.urlToId||{},e.stateToId=e.stateToId||{};for(t in h.idToState)h.idToState.hasOwnProperty(t)&&(e.idToState[t]=h.idToState[t]);for(t in h.urlToId)h.urlToId.hasOwnProperty(t)&&(e.urlToId[t]=h.urlToId[t]);for(t in h.stateToId)h.stateToId.hasOwnProperty(t)&&(e.stateToId[t]=h.stateToId[t]);h.store=e,h.normalizeStore(),a.setItem("History.store",d.stringify(e))},h.intervalList.push(c(h.onUnload,h.options.storeInterval)),h.Adapter.bind(e,"beforeunload",h.onUnload),h.Adapter.bind(e,"unload",h.onUnload)),h.emulated.pushState||(h.bugs.safariPoll&&h.intervalList.push(c(h.safariStatePoll,h.options.safariPollInterval)),("Apple Computer, Inc."===r.vendor||"Mozilla"===(r.appCodeName||""))&&(h.Adapter.bind(e,"hashchange",function(){h.Adapter.trigger(e,"popstate")}),h.getHash()&&h.Adapter.onDomLoad(function(){h.Adapter.trigger(e,"hashchange")})))},h.init()}(window,jQuery),function(e){function t(e){return e.replace(/%.{2}/g,function(e){return n[e]||e})}function i(e,i){var n="";try{n=e(i)}catch(o){try{n=e(t(i))}catch(o){n=i}}return n}var n={"%D0":"%D0%A0","%C0":"%D0%90","%C1":"%D0%91","%C2":"%D0%92","%C3":"%D0%93","%C4":"%D0%94","%C5":"%D0%95","%A8":"%D0%81","%C6":"%D0%96","%C7":"%D0%97","%C8":"%D0%98","%C9":"%D0%99","%CA":"%D0%9A","%CB":"%D0%9B","%CC":"%D0%9C","%CD":"%D0%9D","%CE":"%D0%9E","%CF":"%D0%9F","%D1":"%D0%A1","%D2":"%D0%A2","%D3":"%D0%A3","%D4":"%D0%A4","%D5":"%D0%A5","%D6":"%D0%A6","%D7":"%D0%A7","%D8":"%D0%A8","%D9":"%D0%A9","%DA":"%D0%AA","%DB":"%D0%AB","%DC":"%D0%AC","%DD":"%D0%AD","%DE":"%D0%AE","%DF":"%D0%AF","%E0":"%D0%B0","%E1":"%D0%B1","%E2":"%D0%B2","%E3":"%D0%B3","%E4":"%D0%B4","%E5":"%D0%B5","%B8":"%D1%91","%E6":"%D0%B6","%E7":"%D0%B7","%E8":"%D0%B8","%E9":"%D0%B9","%EA":"%D0%BA","%EB":"%D0%BB","%EC":"%D0%BC","%ED":"%D0%BD","%EE":"%D0%BE","%EF":"%D0%BF","%F0":"%D1%80","%F1":"%D1%81","%F2":"%D1%82","%F3":"%D1%83","%F4":"%D1%84","%F5":"%D1%85","%F6":"%D1%86","%F7":"%D1%87","%F8":"%D1%88","%F9":"%D1%89","%FA":"%D1%8A","%FB":"%D1%8B","%FC":"%D1%8C","%FD":"%D1%8D","%FE":"%D1%8E","%FF":"%D1%8F"};e.extend({decodeURI:function(e){return i(decodeURI,e)},decodeURIComponent:function(e){return i(decodeURIComponent,e)}})}(jQuery),function(){var e;BEM.decl("i-location",{onSetMod:{js:function(){this._syncState(),BEM.DOM.win.bind("statechange",this.changeThis(this._onStateChange))}},_onStateChange:function(){this._syncState(),this._state.__needTrigger!==!1&&(delete this._state.__needTrigger,this.trigger("change",this._state))},_syncState:function(){var e=History.getState();return this._state=$.extend(e.data,{url:e.url,path:this.__self.parsePath(e.hash),params:this.__self.parseParams(e.hash)}),this},change:function(e){e.url=this.__self.normalizeURL(e.url),e.history=e.history!==!1,e.url&&delete e.params,e.title&&(document.title=e.title),e.params&&(e.url=this.__self.joinPath(this._state.path,this.__self.joinParams(this._state.params,e.params))),$.each(e,function(t){"url"===t&&!e[t]||"history"===t||"title"!==t&&(e.__needTrigger=!0)}),e.__needTrigger||(e.__needTrigger=!1),History[(e.history?"push":"replace")+"State"](e,e.title,e.url)},getState:function(){return this._state}},{get:function(){return e||(e=BEM.create("i-location"))},parsePath:function(e){return e.match(/([^\?&]*)/)[0]},parseParams:function(e){if(e=e.replace(/[^?]*\??/,""),!e)return{};var t=/(?:^|&|;)([^&=;]*)=?([^&;]*)/g,i={};return e.replace(t,function(e,t,n){t&&(i[t]=n.replace(/\+/g," ")),i[t]=$.decodeURIComponent(i[t])}),i},joinParams:function(e,t){return $.extend({},e,t)},joinPath:function(e,t){return this.normalizeURL(e+"?"+$.param(t))},normalizeURL:function(e){return(e||"").replace(/\+/g,"%20")}})}(),function(e){BEM.decl("i-location",{change:function(t){t.url=this.__self.normalizeURL(t.url),t.history=t.history!==!1,t.url&&delete t.params,t.title&&(document.title=t.title),t.params&&(t.url=this.__self.joinPath(this._state.path,this.__self.joinParams(this._state.params,t.params))),t.__needTrigger===!1||e.each(t,function(e){"url"===e&&!t[e]||"history"===e||"title"!==e&&(t.__needTrigger=!0)}),t.__needTrigger||(t.__needTrigger=!1),History[(t.history?"push":"replace")+"State"](t,t.title,t.url)}},{joinPath:function(t,i){return this.normalizeURL(t+"?"+e.param(i).replace(/%2C/g,","))}})}(jQuery),function(e){BEM.DOM.decl("dropdown",{onSetMod:{js:function(){this.bindTo("switcher","click",function(){this.toggleMod("state","shown")})},state:{shown:function(){if(this.hasMod("disabled"))return!1;this.trigger("shown");var t=e.browser.opera?"keypress":"keydown";this.afterCurrentEvent(function(){this.bindToDoc("leftclick",function(t){this.containsDomElem(e(t.target))||this._onOutClick(t)}).bindToDoc(t,function(e){27==e.keyCode&&this.hide()})})},"":function(){return this.trigger("hide"),this.unbindFromDoc("leftclick keypress")}}},show:function(){this.setMod("state","shown")},hide:function(){this.delMod("state")},_onOutClick:function(t){var i=e.Event("outside-click");this.trigger(i,{domEvent:t}),i.isDefaultPrevented()||this.hide()}})}(jQuery),function(e){var t=e.event.special.leftclick={setup:function(){e(this).bind("click",t.handler)},teardown:function(){e(this).unbind("click",t.handler)},handler:function(t){t.button||(t.type="leftclick",e.event.handle.apply(this,arguments),t.type="click")}}}(jQuery),function(){var e=[],t=[],i={};BEM.decl("airomo-api",{},{get:function(e,t,i,n){return this._get("get",e,t,i,n),this},me:function(e,t,i){return this.get(e,t,i),this},getFollowing:function(e,t,i,n){return"me"==e&&this._getAuthorized("get_following",e,t,i,n),"me"==e||this._get("get_following",e,t,i,n),this},getFollowers:function(e,t,i,n){return"me"==e&&this._getAuthorized("get_followers",e,t,i,n),"me"==e||this._get("get_followers",e,t,i,n),this},getFollow:function(e,t,i,n){var o=0,r={},a=function(e){o++,$.extend(r,e),2==a&&t&&t(r)};return this.getFollowing(e,a,i,n),this.getFollowers(e,a,i,n),this},_get:function(e,t,i,n,o){var r=this;this._getData("init",function(){r._getData(e,t,i,n,o)})},_getAuthorized:function(e,t,i,n,o){var r=this;this._get("get","me",function(){r._getData(e,t,i,n,o)},function(){n&&n()},o)},_getData:function(n,o,r,a,s){var l=this;if("string"!=typeof o&&(s=a,a=r,r=o,o="me"),"boolean"==typeof r&&(s=r,r=void 0),"boolean"==typeof a&&(s=a,a=void 0),!s&&e[n]&&e[n][o])return r&&r(e[n][o]),void 0;if(t[n]||(t[n]={}),t[n][o]||(t[n][o]=[]),t[n][o].push([r,a]),!i[n]||!i[n][o]){i[n]||(i[n]=[]),i[n][o]=!0,e[n]||(e[n]={});var c=function(e){for(var r;t[n][o].length;)r=t[n][o].shift()[0],r&&r(e);i[n][o]=!1},u=function(t){e[n][o]=t,c(t);var i={get_following:"getFollowing",get_followers:"getFollowers"},r=i[n]||n;"get"==n&&"me"==o&&(l.data||(l.data={}),l.data.user=t),"init"==n||BEM.channel("airomo").trigger(r,{data:t,userId:o,isMe:"me"==o?!0:!1})},d=function(e){for(var r;t[n][o].length;)r=t[n][o].shift()[1],r&&r(e);i[n][o]=!1};"init"==n?airomo.init(function(e){u(e)}):airomo.users[n](o,function(e){u(e)},function(e){d(e)})}}})}(),BEM.decl("auth",{onSetMod:{js:function(){this.__self.get(),BEM.channel("airomo").on("logout",function(){this.cache="unauthorized",BEM.channel("airomo").trigger("unauthorized",{data:"unauthorized"})})}}},{_callbackArray:[],get:function(e){if(this._cache)return e(this._cache),void 0;this._callbackArray.push(e);var t=this;BEM.blocks["airomo-api"].me(function(e){for(e.me=!0,t._cache=e;t._callbackArray.length;)t._callbackArray.shift()(e);BEM.channel("airomo").trigger("user",{user:e,me:!0})},function(){for(;t._callbackArray.length;)t._cache="unauthorized",t._callbackArray.shift()("unauthorized")})}}),function(){var e,t=!1,i=[];BEM.decl("airomo-api-v2",{},{apiInit:function(n){t?n.apply(n,e):i.push(n)}}),AI.init(function(){t=!0,e=arguments,i&&i.length&&(i.forEach(function(t){t.apply(t,e)}),i=null)})}(),BEM.DOM.decl("user",{onSetMod:{js:function(){var e=this;this.on("authorize",this.onAuthorize),this._checkAuthorization(),this._dropdown=this.findBlockOn("dropdown"),this.bindTo(this.elem("link","type","logout"),"click",function(){this._dropdown&&this._dropdown.delMod("state"),airomo.logout(function(){e.onLogout(),window.location.href="http://"+BEM.blocks["i-global"].param("airomo-host")+"/"})})}},onAuthorize:function(e,t){var i=t.user,n=this.findBlockInside("avatar");this.elem("username").removeAttr("href").removeClass("b-link").text(i.username),this.setMod("authorized","yes").delMod(this.elem("link","type","login"),"visibility").setMod(this.elem("link","type","profile"),"visibility","visible").setMod(this.elem("link","type","settings"),"visibility","visible").setMod(this.elem("link","type","logout"),"visibility","visible"),this._dropdown&&this._dropdown.delMod("disabled"),n.elem("img").attr({src:i.avatar,alt:i.username}),n.setMod(n.elem("img"),"visibility","visible").delMod("visibility")},onLogout:function(){var e=this.findBlockInside("avatar"),t=BEM.I18N?BEM.I18N("b-page","username"):"Join/Login";return e.delMod(e.elem("img"),"visibility"),this.elem("username").text(t),this.delMod(this.elem("link"),"visibility").setMod(this.elem("link","type","login"),"visibility","visible").trigger("logout"),this._dropdown&&this._dropdown.setMod("disabled","yes"),this},_checkAuthorization:function(){var e=this;BEM.blocks.auth.get(function(t){"unauthorized"==t?(e.delMod("authorized").onLogout().trigger("logout").__self._userInfo=void 0,BEM.channel("airomo").trigger("logout")):e.setMod("authorized","yes").trigger("authorize",{user:t}).__self._userInfo=t})}},{getUserInfo:function(){return this._userInfo}}),BEM.DOM.decl("user",{onSetMod:{js:function(){var e=this;this.on("authorize",this.onAuthorize),this._checkAuthorization(),this._dropdown=this.findBlockOn("dropdown"),this.bindTo(this.elem("link","type","logout"),"click",function(){this._dropdown&&this._dropdown.delMod("state"),airomo.logout(function(){e.onLogout(),window.location.href="http://"+BEM.blocks["i-global"].param("airomo-host")+"/"})})}},_checkAuthorization:function(){var e=this;BEM.blocks["airomo-api-v2"].apiInit(function(){var t=Array.prototype.slice.call(arguments);t[0]||("unauthorized"===t[1].user?(e.delMod("authorized").onLogout().trigger("logout").__self._userInfo=void 0,BEM.channel("airomo").trigger("logout")):e.setMod("authorized","yes").trigger("authorize",{user:t[1].user}).__self._userInfo=t[1].user)})}}),BEM.HTML.decl("b-link",{onBlock:function(e){e.tag("a").attr("href",e.param("url"));for(var t,i=["title","target"];t=i.pop();)e.param(t)&&e.attr(t,e.param(t))}}),BEM.DOM.decl("go-appcurl",{onSetMod:{js:function(){if(-1!=window.location.href.indexOf("explore")){var e=this;this.iLocation=BEM.blocks["i-location"].get(),this.link=this.findBlockOn("b-link"),this.updateLink(),this.iLocation.on("change",function(t,i){e.updateLink(i.params)})}}},updateLink:function(e){var t=e||this.iLocation.getState().params,i=t.type||"apps",n={};t.q&&(n.q=t.q,t.tags&&(n.tag=t.tags.split(",")[0]),t.categories&&(n.categories=t.categories),"games"==i&&(n.categories=6),t.platforms&&(n.platform=t.platforms),t.prices&&"all"!=t.prices&&(n.price=t.prices)),this.link.domElem.attr("href","http://"+BEM.blocks["i-global"].param("appcurl-host")+($.isEmptyObject(n)?"/":"/?"+$.param(n)))}}),BEM.DOM.decl("content",{onSetMod:{js:function(){return!0}}}),BEM.DOM.decl("appcurl-logo",{onSetMod:{js:function(){},type:{serp:function(){this.bindTo("click",this.goHome)},"":function(){this.unbindFrom("click")}}},showWhy:function(){},goHome:function(){var e=BEM.blocks["i-location"].get(),t=this.findBlockOutside("b-page");e.change({url:"/",title:"Appcurl : Discover the best Android and iPhone Apps with AppCurl"}),this.setMod("type","index"),t.delMod("mode"),t.findBlockInside("serp").delMod("visibility"),t.findBlockInside("appcurl-search").findBlockInside("b-form-input").val("")}}),BEM.DOM.decl("popup",{onSetMod:{js:function(){this.hasMod("popup","visibility")&&(this._isShown=!0),this.bindTo("switcher","click",this.toggle),this.bindTo("close","click",function(){this.hide()})}},onElemSetMod:{popup:{visibility:{visible:function(){this._isShown=!0,this.trigger("show")},"":function(){this._isShown=!1,this.trigger("hide")}}}},hide:function(){this.delMod(this.elem("popup"),"visibility")},show:function(){this.setMod(this.elem("popup"),"visibility","visible")},toggle:function(){this.isShown()?this.hide():this.show()},isShown:function(){return this._isShown}}),BEM.DOM.decl("why",{onSetMod:{js:function(){this.findBlockInside("popup").on("show hide",function(){this.findBlockInside("promo-video").domElem.attr("src","http://www.youtube.com/embed/iWPJfHPOq0w?rel=0")})}}}),BEM.DOM.decl("appcurl-search",{onSetMod:{js:function(){var e=this.findBlockInside("b-form-input"),t=BEM.blocks["i-location"].get(),i=t.getState().params.q;i&&i.replace(/%/g,"%25"),i&&e.val(decodeURIComponent(i)),this.bindTo("submit",function(){var i=e.val(),n=BEM.I18N&&BEM.I18N.lang();return n="en"==n?"":"uk"==n?"/ua":"/"+n,t.change({url:n+"/?q="+encodeURIComponent(i),title:i+" — Appcurl"}),e._getPopup().hide(),!1}),t.on("change",function(t,i){e.val(i.params.q)})}}}),BEM.decl("quick-search",{get:function(e,t){BEM.blocks["appcurl-api"].quickSearch(e,function(e){t.call(this,{items:e.result})})}}),function(){var e,t,i=function(){for(var t,i=0;t=e[i++];)t.val(t.elem("input").val())},n=function(e){try{return e.activeElement}catch(t){}};BEM.DOM.decl("b-form-input",{onSetMod:{js:function(){var o=this,r=o.elem("input"),a=n(o.__self.doc[0]),s=o.params.autoFocus&&!(a&&$(a).is("input, textarea"));o._val=r.val(),(a===r[0]||s)&&(o.setMod("focused","yes")._focused=!0),t||(e=[],t=o.channel("sys").on({tick:i,idle:function(){t.un("tick",i)},wakeup:function(){t.on("tick",i)}})),o._instanceIndex=e.push(o.bindTo(r,{focus:o._onFocus,blur:o._onBlur}))-1,o.params.shortcut&&o.bindToDoc("keydown",function(e){e.ctrlKey&&38==e.keyCode&&!$(e.target).is("input, textarea")&&o.setMod("focused","yes")
})},disabled:function(e,t){this.elem("input").attr("disabled","yes"==t)},focused:function(e,t){if(this.hasMod("disabled","yes"))return!1;var i="yes"==t;i?this._focused||this._focus():this._focused&&this._blur(),this.afterCurrentEvent(function(){this.trigger(i?"focus":"blur")})}},onElemSetMod:{message:{visibility:function(e,t,i){var n=this,o=n.getMod(e,"type");if(o){var r=!0;i||n.elem("message","type",o).each(function(){this!=e[0]&&n.hasMod($(this),"visibility","visible")&&(r=!1)}),r&&n.toggleMod("message-"+o,"yes","","visible"===i)}}}},val:function(e,t){if("undefined"==typeof e)return this._val;if(this._val!=e){var i=this.elem("input");i.val()!=e&&i.val(e),this._val=e,this.trigger("change",t)}return this},name:function(){return this.elem("input").attr("name")},_onFocus:function(){return this._focused=!0,this.setMod("focused","yes")},_onBlur:function(){return this._focused=!1,this.delMod("focused")},_focus:function(){var e=this.elem("input")[0];if(e.createTextRange&&!e.selectionStart){var t=e.createTextRange();t.move("character",e.value.length),t.select()}else e.focus()},_blur:function(){this.elem("input").blur()},destruct:function(){this.__base.apply(this,arguments),this.params.shortcut&&this.unbindFromDoc("keydown"),e.splice(this._instanceIndex,1);for(var t,i=this._instanceIndex;t=e[i++];)--t._instanceIndex}}),BEM.HTML.decl("b-form-input",{onBlock:function(e){var t=e.param("id")||e.generateId();e.tag("span").tParam("id",t).tParam("has-clear","yes"===e.mod("has-clear")).afterContent({elem:"box",tag:"span",content:{elem:"input",attrs:{value:e.param("value"),name:e.param("name"),id:t}}}).js(!0)},onElem:{input:function(e){e.tag(e.mod("type")||"input")},label:function(e){e.tag("label").attr("for",e.tParam("id"))},box:function(e){e.tParam("has-clear")&&e.afterContent({elem:"clear",tag:"span"})},hint:function(e){e.tag("label").attr("for",e.tParam("id"))}}})}(),function(){var e,t=0,i=!1,n=0,o=BEM.channel("sys"),r=50;BEM.decl("i-system",{},{start:function(){$(document).bind("mousemove keydown",function(){n=0,i&&(i=!1,o.trigger("wakeup"))}),this._tick()},_tick:function(){var a=this;o.trigger("tick",{counter:t++}),!i&&(n+=r)>3e3&&(i=!0,o.trigger("idle")),e=setTimeout(function(){a._tick()},r)}}).start()}(),BEM.DOM.decl("b-form-input",{onSetMod:{js:function(){this.__base.apply(this,arguments),(this._hasHint=!!this.elem("hint")[0])&&this.on("change",this._updateHint)._updateHint()},focused:function(){this.__base.apply(this,arguments),this._hasHint&&this._updateHint()}},_updateHint:function(){this.toggleMod(this.elem("hint-wrap"),"visibility","visible",!(this._focused||this.val()))}}),function(){var e={};BEM.decl("i-request",{onSetMod:{js:function(){this._preventCache=!1}},get:function(e,t,i,n){$.isFunction(i)||(n=i,i=this.params.onError),this._get(e,t,i,$.extend({},this.params,n))},_get:function(t,i,n,o){var r=this._buildCacheKey(t,o),a=e[o.cacheGroup];o.cache&&a&&r in a.data?i.call(this.params.callbackCtx,a.data[r]):this._do(t,i,n,o)},_do:function(){},_onSuccess:function(e,t,i,n){n.cache&&!this._preventCache&&this.putToCache(n,e,i),this._preventCache=!1},_buildCacheKey:function(e){return"string"==typeof e?e:$.param(e)},putToCache:function(t,i,n){var o=e[t.cacheGroup]||(e[t.cacheGroup]={keys:[],data:{}});o.keys.length>=t.cacheSize&&delete o.data[o.keys.shift()];var r=this._buildCacheKey(i,t);o.data[r]=n,o.keys.push(r)},dropCache:function(){delete e[this.params.cacheGroup]},getDefaultParams:function(){return{cache:!1,cacheGroup:"default",cacheSize:100,callbackCtx:this}}})}(),BEM.decl({block:"i-request_type_ajax",baseBlock:"i-request"},{onSetMod:{js:function(){this.__base(),this._requestNumber=this._number=this._preventNumber=this._retryCount=0}},_get:function(e,t,i,n){this._number++,this._requestNumber++,this._retryCount=n.retryCount,this.__base.apply(this,arguments)},_do:function(e,t,i,n){var o=this;if(o._number>o._preventNumber){var r=arguments,a={data:n.data?$.extend({},n.data,e):e},s=o._wrapCallback(function(i,r,a){o._onSuccess(o._buildCacheKey(e,n),e,i[0],n),o._allowCallback(r,a)&&t.apply(n.callbackCtx,i)}),l=o._wrapCallback(function(e,t,a){o._allowCallback(t,a)&&(o._retryCount-->0?setTimeout(function(){o._do.apply(o,r)},n.retryInterval):i&&i.apply(n.callbackCtx,e))});$.each(["url","dataType","timeout","type","jsonp","jsonpCallback"].concat(n.paramsToSettings||[]),function(e,t){a[t]=n[t]}),$.ajax(a).done(s).fail(l)}},_wrapCallback:function(e){var t=this._requestNumber,i=this._number;return function(n){null!==n&&e(arguments,t,i)}},_allowCallback:function(e,t){return t>this._preventNumber&&this._requestNumber==e},_buildCacheKey:function(e,t){return"string"==typeof e?e:this.__base(e)+t.url},abort:function(){this._preventNumber=++this._number},preventCallbacks:function(){this.abort()},getDefaultParams:function(){return $.extend(this.__base(),{cache:!0,type:"GET",dataType:"jsonp",timeout:2e4,retryCount:0,retryInterval:2e3})}}),function(e){var t,i=BEM.HTML,n=BEM.DOM;e(function(){e(window).bind("focus",function(){t=document.activeElement})}),n.decl({name:"b-form-input",modName:"autocomplete",modVal:"yes"},{onSetMod:{js:function(){var t=this;t.params.foot&&(t.foot=t.params.foot),t._preventRequest=!0,t.__base.apply(t,arguments),t._userVal=t.val();var i=t._focused;i&&t.delMod("focused"),t.elem("input").attr("autocomplete","off"),t._preventRequest=!1,i&&t.setMod("focused","yes"),t._items=[],t._curItemIndex=-1,t._doRequest=e.debounce(t._doRequest,t.params.debounceDelay)},focused:{yes:function(){this.__base();var e=this.params.showListOnFocus?this._onChange():this._onChange;this.on("change",e)},"":function(){this.__base(),this.un("change",this._onChange)._preventHide||this._getPopup().hide()}}},getDataprovider:function(){return this._dataprovider||(this._dataprovider=BEM.create(this.params.dataprovider.name||this.__self.getName()+"__dataprovider",e.extend(this.params.dataprovider,{callbackCtx:this})))},_onChange:function(){return t===this.elem("input")[0]?t=null:this._preventRequest||this._doRequest(),this._onChange},_onKeyDown:function(e){if(38==e.keyCode||40==e.keyCode){e.preventDefault();var t=this._items.length;if(t){var i=e.keyCode-39,n=this._curItemIndex,o=0;do n+=i,n=0>n?t-1:n>=t?0:n;while(this._onEnterItem(this._items[n],!0)===!1&&++o<t)}}},_onKeyPress:function(e){13==e.keyCode&&this._curItemIndex>-1&&this._isCurItemEnteredByKeyboard&&(e.preventDefault(),this._onSelectItem(this._items[this._curItemIndex],!0))},_getPopup:function(){var t=this;if(!t._popup){var n=e.browser.opera?"keypress":"keydown",o=t.__self.getName(),r=[{elem:"items",tag:"ul",mix:[{block:o,elem:"popup-items"}]},{block:"b-form-input",elem:"shadow",tag:"i"}];t._hasPopupFade()&&r.push({block:o,elem:"fade"}),t._popup=e(i.build({block:"i-popup",mix:[{block:o,elem:"popup",mods:t.params.popupMods}],content:r})).bem("i-popup").on({show:function(){t.bindTo("keypress",t._onKeyPress).bindTo(n,t._onKeyDown).bindToWin("resize",t._updatePopupPos)},"outside-click":function(i,n){t.containsDomElem(e(n.domEvent.target))&&i.preventDefault()},hide:function(){t.unbindFrom("keypress "+n).unbindFromWin("resize")._curItemIndex=-1}}),e.each({mouseover:t._onEnterItem,mouseout:t._onLeaveItem,mousedown:t._onSelectItem},function(e,i){BEM.blocks["b-autocomplete-item"].on(t._popup.domElem,e,function(e){i.call(t,e.block)})})}return t._popup},_hasPopupFade:function(){return"yes"==(this.params.popupMods||{}).fade},_updatePopupPos:function(){var e=this.elem("box"),t=e.offset();t.top+=e.outerHeight(),this._hasPopupFade()&&(t.width=e.outerWidth()),this._getPopup().show(t)},_onEnterItem:function(e,t){if(e.hasMod("enterable","no"))return!1;var i=this._items,n=this._curItemIndex;n>-1&&i[n].delMod("hovered"),n=this._getItemIndex(e),n>-1&&i[n].setMod("hovered","yes"),this._curItemIndex=n,this._isCurItemEnteredByKeyboard=!!t,t&&this.params.updateOnEnter&&(this._preventRequest=!0,this.val(e.enter()!==!1?e.val():this._userVal,{source:"autocomplete",itemIndex:this._curItemIndex}).del("_preventRequest"))},_onLeaveItem:function(e){var t=this._curItemIndex;t>-1&&t==this._getItemIndex(e)&&(this._items[t].delMod("hovered"),this._curItemIndex=-1)},_onSelectItem:function(e,t){if(e.hasMod("enterable","no"))return this.afterCurrentEvent(function(){this.setMod("focused","yes")});var i=e.select(t||!1)!==!1;this._preventRequest=!0,i&&this.val(this._userVal=e.val(),{source:"autocomplete",itemIndex:this._curItemIndex})._getPopup().hide(),t?this.del("_preventRequest"):(i||(this._preventHide=!0),this.afterCurrentEvent(function(){this.setMod("focused","yes").del("_preventRequest","_preventHide")})),i&&this.trigger("select",{item:e,byKeyboard:t})},_getItemIndex:function(t){return e.inArray(t,this._items)},_doRequest:function(){var t=this;t._userVal=t.val(),t.trigger("data-requested").getDataprovider().get(t.val(),function(i){t.trigger("data-received",i);var o=t._getPopup(),r=i.items||i;t.foot&&r.length&&-1==e.inArray(t.foot,r)&&r.push(t.foot),r.length?(t._curItemIndex=-1,n.update(o.elem("items"),t._buildItemsHtml(r),function(){t._updatePopupPos(),t._items=o.findBlocksInside("b-autocomplete-item"),t.trigger("update-items")})):o.hide()})},_buildItemsHtml:function(t){return i.build(e.map(t,function(t){return{block:"b-autocomplete-item",data:t,mods:{type:e.isArray(t)?t[0]:"text"}}}))},setFoot:function(e){return this.foot=e},getDefaultParams:function(){return e.extend(this.__base(),{updateOnEnter:!0,debounceDelay:50,showListOnFocus:!0})}})}(jQuery),BEM.DOM.decl({name:"b-form-input",modName:"autocomplete",modVal:"yes"},{_buildItemsHtml:function(e){return BEM.HTML.build($.map(e,function(e){return{block:"b-autocomplete-item",data:e,mods:{type:"quick-search"}}}))}}),BEM.decl({name:"b-form-input__dataprovider",baseBlock:"i-request_type_ajax"},{get:function(e,t){return this.__base({part:e},function(e){t.call(this,{items:e[1],metainfo:e[2]})})}}),function(e){function t(){return r.length?r.shift():o?o.clone():o=n()}function i(e){r.push(e)}function n(){return e((a.safari||a.webkit)&&navigator.userAgent.toLowerCase().indexOf("mobile")>-1?"<div/>":"<iframe"+(a.msie&&a.version<9?' frameborder="0"':"")+"/>")}var o,r=[],a=e.browser;BEM.DOM.decl("i-popup",{onSetMod:{visibility:{visible:function(){var e=this._getUnder(),t=e.parent();this.hasMod(e,"type","paranja")?t.is("body")||e.appendTo("body"):t[0]!==this.domElem[0]&&e.prependTo(this.domElem),this._inBody||(this._inBody=!!this.domElem.appendTo("body")),this.trigger("show")},"":function(){var e=this._getUnder();this.hasMod(e,"type","paranja")&&e.remove(),this._putUnder(),this.trigger("hide")}}},_getUnder:function(){return this._under||(this._under=t().attr("class",this._underClass||(this._underClass=this.findElem("under").remove().attr("class"))))},_putUnder:function(){i(this._under),delete this._under},show:function(e){return e&&this.domElem.css(e),this.setMod("visibility","visible")},hide:function(){return this.delMod("animate").delMod("visibility")}},{live:!0})}(jQuery),BEM.HTML.decl("i-popup",{onBlock:function(e){e.mod("autoclosable","yes").js(!0).wrapContent({elem:"content"}).afterContent({elem:"under",mods:e.param("underMods"),mix:e.param("underMix")}).param("zIndex")&&e.attr("style","z-index:"+(32700+e.param("zIndex")))}}),function(e){var t=e.browser.opera&&e.browser.version<12.1?"keypress":"keydown";BEM.DOM.decl({name:"i-popup",modName:"autoclosable",modVal:"yes"},{onSetMod:{visibility:{visible:function(){this.afterCurrentEvent(function(){if(this.hasMod("visibility","visible")){var i=this._under;this.bindToDoc("leftclick",function(t){this.containsDomElem(e(t.target))||this._onOutClick(t)}).bindToDoc(t,function(e){27==e.keyCode&&this.hide()}),i&&i.is("iframe")&&this.hasMod(i,"type","paranja")&&this.bindToDomElem(e([i[0].contentWindow,i[0].contentWindow.document]),"leftclick",this.hide)}}),this.__base.apply(this,arguments)},"":function(){return this.unbindFromDoc("leftclick "+t).__base.apply(this,arguments)}}},_onOutClick:function(t){var i=e.Event("outside-click");this.trigger(i,{domEvent:t}),i.isDefaultPrevented()||this.hide()}})}(jQuery),BEM.decl("util",{},{getLocationSearchParamByName:function(e){var t=RegExp(e+"="+"(.+?)(&|$)").exec(location.search);return t&&t[1]?decodeURI(t[1]):void 0},getLocationHashParamByName:function(e){var t=RegExp(e+"="+"(.+?)(&|$)").exec(location.hash);return t&&t[1]?decodeURI(t[1]):void 0},getUrlParamByName:function(e){var t=[],i=this.getLocationSearchParamByName(e),n=this.getLocationHashParamByName(e);return i&&t.push(i),n&&t.push(n),t},parseParam:function(e){return"?"==e[0]&&(e=e.substr(1)),paramsObj={},e.split("&").forEach(function(e){var t=e.split("=");paramsObj[t[0]]=t[1]}),paramsObj},shuffleArray:function(e){var t,i,n,o=[].concat(e),r=o.length;if(0===r)return!1;for(;--r;)t=Math.floor(Math.random()*(r+1)),i=o[r],n=o[t],o[r]=n,o[t]=i;return o},capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},cleverSubstring:function(e,t,i){var n="…";return e.length>t+i?e.substring(0,t-1)+n:e},isValidMail:function(e){var t=/^[-a-z0-9!#$%&'*+/=?^_`{|}~]+(\.[-a-z0-9!#$%&'*+/=?^_`{|}~]+)*@([a-z0-9]([-a-z0-9]{0,61}[a-z0-9])?\.)*(aero|arpa|asia|biz|cat|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel|[a-z][a-z])$/;return t.test(e)},escapeHTML:function(){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return function(t){return t?String(t).replace(/&(?!\w+;)|[<>"']/g,function(t){return e[t]||t}):""}}()}),BEM.DOM.decl("b-autocomplete-item",{val:function(){return this.params.val||this.elem("text").text()||this.domElem.text()},enter:function(){},select:function(){}},{live:function(){this.liveBindTo("mouseover mouseout mousedown",function(e){this.trigger(e.type)})}}),BEM.HTML.decl("b-autocomplete-item",{onBlock:function(e){var t,i,n=e.param("data");$.isArray(n)?($.isPlainObject(t=n.concat().pop())&&e.params($.extend(e.params(),t)),i=BEM.blocks.util.escapeHTML(n[1])):i=BEM.blocks.util.escapeHTML(n),$.isArray(e.param("search_cgi"))&&e.js({cgi:e.param("search_cgi")}),e.tag("li").mod("pers",e.param("pers")?"yes":!1).content(i).js(!0)}}),BEM.HTML.decl({block:"b-autocomplete-item",modName:"type",modVal:"hl"},{onBlock:function(e){e.content($.map(e.param("data").slice(1),function(e){return $.isArray(e)?{tag:"span",elem:"highlight",content:e[0]}:e}))}}),BEM.HTML.decl({block:"b-autocomplete-item",modName:"type",modVal:"fact"},{onBlock:function(e){var t=e.param("data").slice(1);e.content([{tag:"span",elem:"text",content:BEM.blocks.util.escapeHTML(t[0])},{tag:"span",elem:"fact",content:[" — ",BEM.blocks.util.escapeHTML(t[1])]}])}}),BEM.DOM.decl({block:"b-autocomplete-item",modName:"type",modVal:"nav"},{enter:function(){return!1},select:function(e){return e&&$('<form style="display:none" action="'+this.val()+'" target="_blank"/>').appendTo("body").submit().remove(),{needEvent:!0}}}),BEM.HTML.decl({block:"b-autocomplete-item",modName:"type",modVal:"nav"},{onBlock:function(e){var t=e.param("data"),i=4==e.param("suggestVersion"),n=t[4]||t[3],o=(n.match(/^\w[\w-]*:\/\//g)?"":"http://")+n;e.js({val:o}).content({elem:"link",url:o,title:i?t[3]:t[2],description:i?t[2]:t[1]})},onElem:{link:function(e){e.tag("a").attrs({href:e.param("url"),target:"_blank"}).content([{elem:"link-url",tag:"span",content:BEM.blocks.util.escapeHTML(e.param("title"))},{elem:"link-info",tag:"span",content:"&nbsp;&mdash; "+BEM.blocks.util.escapeHTML(e.param("description"))}])}}}),BEM.HTML.decl({block:"b-autocomplete-item",modName:"type",modVal:"nah"},{onBlock:function(e){e.content(e.param("data")[1])}}),BEM.DOM.decl({block:"b-autocomplete-item",modName:"type",modVal:"foot"},{select:function(){return!1}}),BEM.HTML.decl({block:"b-autocomplete-item",modName:"type",modVal:"foot"},{onBlock:function(e){e.mod("enterable","no").content($.map(e.param("data").slice(1),function(e){return $.isArray(e)?{tag:"span",elem:"foot",content:e[0]}:e}))}}),BEM.DOM.decl({block:"b-autocomplete-item",modName:"type",modVal:"href"},{url:function(){return this.findBlockInside("b-link").domElem.attr("href")},enter:function(){return!1},select:function(e){return e&&(location.href=this.url()),!1}}),BEM.HTML.decl({block:"b-autocomplete-item",modName:"type",modVal:"href"},{onBlock:function(e){var t=e.param("data").slice(1);e.content({block:"b-link",content:t[0],url:t[1]})}}),BEM.DOM.decl({block:"b-autocomplete-item",modName:"type",modVal:"quick-search"},{enter:function(){return!1},select:function(e){return e&&document.location.replace(this.val()),!1}}),BEM.HTML.decl({block:"b-autocomplete-item",modName:"type",modVal:"quick-search"},{onBlock:function(e){var t=e.param("data"),i=t.id,n="http://"+BEM.blocks["i-global"].param("airomo-host")+"/apps/"+i;e.js({val:n}).content({elem:"link",url:n,title:t.title,icon:t.icon})},onElem:{link:function(e){e.tag("a").attrs({href:e.param("url")}).content([{elem:"icon",tag:"img",attrs:{src:BEM.blocks.util.escapeHTML(e.param("icon"))}},{elem:"link-url",mix:[{block:"b-link"}],tag:"span",content:BEM.blocks.util.escapeHTML(e.param("title"))}])}}}),BEM.DOM.decl({name:"b-form-input",modName:"has-clear",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.on("change",this._updateClear)._updateClear()}},_onClearClick:function(){this.trigger("clear"),this.removeInsets&&this.removeInsets(),this.val("").setMod("focused","yes")},_updateClear:function(){return this.toggleMod(this.elem("clear"),"visibility","visible","",!!this._val)}},{live:function(){return this.__base(),this.liveBindTo("clear","leftclick",function(){this._onClearClick()}),!1}}),BEM.DOM.decl("b-form-button",{onSetMod:{js:function(){var e=this.isDisabled();(this._href=this.domElem.attr("href"))&&e&&this.domElem.removeAttr("href"),this.elem("input").attr("disabled",e)},focused:{yes:function(){if(this.isDisabled())return!1;var e=this;e.bindTo("keydown",this._onKeyDown).elem("input").focus(),e._unloadInited||(e._unloadInited=$(window).bind("unload",function(){e.delMod("focused")}))},"":function(){this.unbindFrom("keydown").elem("input").blur()}},disabled:function(e,t){var i="yes"==t;this.elem("input").attr("disabled",i),this._href&&(i?this.domElem.removeAttr("href"):this.domElem.attr("href",this._href)),i&&this.domElem.keyup()},pressed:function(e,t){this.isDisabled()||this.trigger("yes"==t?"press":"release")},hovered:{"":function(){this.delMod("pressed")}},"*":function(e){return this.isDisabled()&&"hovered pressed".indexOf(e)>-1?!1:void 0}},isDisabled:function(){return this.hasMod("disabled","yes")},url:function(e){return"undefined"==typeof e?this._href:(this._href=e,this.isDisabled()||this.domElem.attr("href",e),this)},_onKeyDown:function(e){var t=e.keyCode;13!=t&&32!=t||this._keyDowned||(this._keyDowned=!0,this.setMod("pressed","yes").bindTo("keyup",function(){this.delMod("pressed").unbindFrom("keyup"),delete this._keyDowned,32==t&&this.domElem.attr("href")&&(document.location=this.domElem.attr("href"))}))},_onClick:function(e){this.isDisabled()?e.preventDefault():this.afterCurrentEvent(function(){this.trigger("click")})}},{live:function(){var e={mouseover:{name:"hovered",val:"yes"},mouseout:{name:"hovered"},mousedown:{name:"pressed",val:"yes"},mouseup:{name:"pressed"},focusin:{name:"focused",val:"yes"},focusout:{name:"focused"}};this.liveBindTo("leftclick",function(e){this._onClick(e)}).liveBindTo("mouseover mouseout mouseup focusin focusout",function(t){var i=e[t.type];this.setMod(i.name,i.val||"")}).liveBindTo("mousedown",function(t){var i=e[t.type];1==t.which&&this.setMod(i.name,i.val||"")})}}),BEM.HTML.decl("b-form-button",{onBlock:function(e){e.tag(e.param("url")?"a":"span").attrs({href:e.param("url"),target:e.param("target")}).mods({size:e.mod("size"),theme:e.mod("theme")}).content([{elem:"left",tag:"i"},{elem:"content",tag:"span",content:{elem:"text",tag:"span",content:e.content()}}],!0).afterContent(e.param("type")?{elem:"input",attrs:{value:"",type:e.param("type"),disabled:e.mod("disabled")&&"disabled"}}:{elem:"click"}).js(!0)},onElem:{input:function(e){e.tag("input")},click:function(e){e.tag("i")}}}),BEM.HTML.decl("progress",{onBlock:function(e){e.content([{elem:"caption",content:e.content()},{elem:"canvas",content:{elem:"bar"}}],!0)}}),BEM.DOM.decl("appcurl-lang-switcher",{onSetMod:{js:function(){this.setMod("enabled","no"),this.bindTo(this.elem("option","pos","first"),"click",function(){this.toggleMod("enabled","yes","no")})}}}),BEM.DOM.decl("serp",{onSetMod:{js:function(){var e=this,t=BEM.blocks["i-location"].get(),i=t.getState().params,n=i.q;BEM.blocks["appcurl-api"].getCategories(function(o){e._categories=o,n&&e.renderSerp(n,i),t.on("change",function(t,i){i.params.q&&e.renderSerp(i.params.q,i.params)})})}},renderSerp:function(e,t){e=e||t.q||"";var i=this,n=this.findBlockOutside("b-page"),o=n.findBlockInside("progress"),r=10,a=+t.p||1,s={tags:t.tag,platforms:t.platform,price:t.price,categories:t.categories,rating:t.rating,order:t.order,stores:t.stores},l=$.extend({page:a,withFacets:!0,withLikes:!0},s),c=$.cookie("appcurl_search_params");c&&(l=$.extend(BEM.blocks.util.parseParam(c.replace(/\+/g," ").replace(/%2C/g,",")),l)),c&&BEM.blocks["i-location"].get().change({params:l,history:!1,__needTrigger:!1}),n.setMod("mode","serp"),n.findBlockInside("appcurl-logo").setMod("type","serp"),o.setMod("state","active"),this.setMod("visibility","visible"),BEM.blocks["appcurl-api"].search(e,l,function(t){o.delMod("state");var n=[];return i.renderStatistics(e,t.total,t.totalByTitle),t.total?(t.result.forEach(function(t){n.push(i._getAppBemJson(t,e))}),BEM.DOM.update(i.elem("apps"),BEM.HTML.build(n)),i.renderPaginator(e,t.result.length?t.total:void 0,r,a),void 0):($.cookie("appcurl_search_params",$.param($.extend(BEM.blocks.util.parseParam(c),{page:1}))),i.renderEmptyResult(e),i.renderPaginator(),void 0)})},renderStatistics:function(e,t,i){var n=t?[t+" "+(1==t?BEM.I18N("serp","app"):BEM.I18N("serp","apps"))+BEM.I18N("serp","found and"),{tag:"span",content:i+" "+BEM.I18N("serp","apps")}," "+BEM.I18N("serp","with")+" “",{tag:"strong",content:BEM.blocks.util.escapeHTML(e)},"” "+BEM.I18N("serp","in the title.")]:"";BEM.DOM.update(this.elem("statistics"),BEM.HTML.build(n))},renderEmptyResult:function(e){var t=[{block:"app",mods:{type:"empty"},content:{elem:"description",content:[{content:BEM.I18N("serp","your search")+BEM.blocks.util.escapeHTML(e)+BEM.I18N("serp","did not match any apps")},{content:BEM.I18N("serp","suggestions")},{tag:"ul",content:[{tag:"li",content:BEM.I18N("serp","make sure all words are spelled correctly")},{tag:"li",content:BEM.I18N("serp","try different or more general keywords")},{tag:"li",content:BEM.I18N("serp","try wild card search")},{tag:"li",content:BEM.I18N("serp","try keywords in phrase within quotes")}]},{content:[BEM.I18N("serp","still not sure what you are looking for"),{block:"b-link",url:"http://"+BEM.blocks["i-global"].param("appcurl-host")+"/explore/",content:"Explore Interface"}]}]}}];BEM.DOM.update(this.elem("apps"),BEM.HTML.build(t))},renderPaginator:function(e,t,i,n){var o=this.findBlockInside("paginator");return!t||i>=t?(o.delMod("visibility"),void 0):(BEM.DOM.update(o.domElem,BEM.blocks.paginator.getPaginatorHtml(e,t,i,n)),o.setMod("visibility","visible"),void 0)},_getAppBemJson:function(e,t){var i=this,n=[],o=e.categories,r=function(e){return{block:"b-link",url:"http://"+BEM.blocks["i-global"].param("appcurl-host")+"/explore/?categories="+e,mix:[{block:"app",elem:"category"}],content:BEM.I18N("serp-filter",i._categories[e])||i._categories[e]}};if(2==o.length&&o.indexOf("6")>-1){o.splice(o.indexOf("6"),1);var a=o[0];n=[r(6)," | ",r(a)]}else o.forEach(function(e,t){n.push(r(e)),t<o.length-1&&n.push(", ")});var s=2==e.store?"&utm_source=airomo&utm_medium=airomo_web&utm_campaign=airomo_web":"",l=new RegExp(t,"ig"),c=e.description.replace(l,function(e){return BEM.HTML.build({block:"highlight",tag:"span",content:e})}),u=$("<div>").html(e.title).text(),d=e.hasFeeds?{block:"b-dropdowna",mix:[{block:"feed",mods:{target:"app"},js:{appId:e.id}}],content:[{elem:"switcher",content:{block:"b-link",mods:{pseudo:"yes"},mix:[{block:"feed",elem:"button"}],content:BEM.I18N("serp","feed")}},{block:"b-popupa",mods:{direction:"down"},content:[{elem:"tail"},{elem:"content",content:{block:"b-menu",mods:{layout:"vert"},mix:[{block:"b-dropdowna",elem:"menu"}]}}]}]}:"",h=e.store>1?{block:"b-link",url:e.nativeUrl+s,mix:[{block:"app",elem:"android-store",mods:{store:2==e.store?"google-play":3==e.store?"amazon":"nook"}}]}:"";return{block:"app",js:{appId:e.id},content:[{elem:"left",content:[{block:"b-link",url:"http://"+BEM.blocks["i-global"].param("airomo-host")+"/apps/"+e.id,content:{block:"app",elem:"icon",tag:"img",attrs:{src:e.icon},alt:u}},{block:"rating",mods:{type:"readonly",rating:BEM.blocks.rating.getNormalizedRating(e.rating)},attrs:{title:e.rating}}]},{block:"b-link",url:e.nativeUrl+s,mix:[{block:"app",elem:"store",mods:{platform:1==e.platform?"iphone":"android",price:e.price?"paid":"free"}}]},{elem:"price",content:e.price?"$"+e.price:BEM.I18N("serp-filter","free")},h,{block:"b-link",url:"http://"+BEM.blocks["i-global"].param("airomo-host")+"/apps/"+e.id,mix:[{block:"app",elem:"title"}],content:u},BEM.HTML.build(n),{elem:"description",content:c},d,{elem:"popularity-index",tag:"span",content:e.pi.toFixed(1)},{block:"app-social",content:[{elem:"likes",tag:"span",content:{elem:"number",tag:"span",content:e.likes.totalLikes}},{elem:"comments",tag:"span",content:{elem:"number",tag:"span",content:e.reviewCounts}}]}]}}}),BEM.DOM.decl("feed",{_getFeedBemJson:function(e){var t=this,i=[];return e.forEach(function(e,n){var o=e.type,r=["like","share","review","comment","question","first_sync","install_apps"],a="";if(r.indexOf(o)>-1){var s={first_sync:"firstSync",install_apps:"installApps"};o=s[o]||o,a=t["get"+BEM.blocks.util.capitalize(o)+"FeedItemBemJson"](e,n,o)}else t.getCommentFeedItemBemJson(e,n,o);i.push(a)}),i},getLikeFeedItemBemJson:function(e,t){var i=this._getCommonItemBemJson(e,t);return i.content.push({elem:"item-date",content:this._getFeedItemDate(e.date)},{block:"b-link",mix:[{block:"feed",elem:"item-icon-link"}],url:this.getAppLink(e.appId),content:{block:"feed",elem:"item-icon",tag:"img",attrs:{src:this._getIcon(e)}}},{elem:"item-info",content:{elem:"item-content",content:["I like ",{block:"b-link",url:this.getAppLink(e.appId),content:e.appName}]}}),i},getShareFeedItemBemJson:function(e,t){var i=this._getCommonItemBemJson(e,t);return i.content.push({elem:"item-date",content:this._getFeedItemDate(e.date)},{block:"b-link",mix:[{block:"feed",elem:"item-icon-link"}],url:this.getAppLink(e.appId),content:{block:"feed",elem:"item-icon",tag:"img",attrs:{src:this._getIcon(e)}}},{elem:"item-info",content:{elem:"item-content",content:["I shared ",{block:"b-link",url:this.getAppLink(e.appId),content:e.appName}," with my friends"]}}),i},getReviewFeedItemBemJson:function(e,t){var i=this._getCommonItemBemJson(e,t);return i.content.push({elem:"item-row",mix:[{block:"clearfix"}],content:[{block:"rating",mods:{size:"s",type:"readonly",rating:BEM.blocks.rating.getNormalizedRating(e.rating)},attrs:{title:e.rating}},{elem:"item-date",content:this._getFeedItemDate(e.date)}]},{block:"b-link",mix:[{block:"feed",elem:"item-icon-link"}],url:this.getAppLink(e.appId),content:{block:"feed",elem:"item-icon",tag:"img",attrs:{src:this._getIcon(e)}}},{elem:"item-info",content:[{block:"b-link",mix:[{block:"feed",elem:"item-title"}],url:this.getAppLink(e.appId),content:e.appName},{elem:"item-content",content:BEM.blocks.util.escapeHTML(e.comment)}]}),i},getCommentFeedItemBemJson:function(e,t,i){var n=this._getCommonItemBemJson(e,t),o="";return e.appId&&(o={block:"b-link",mix:[{block:"feed",elem:"item-icon-link"}],url:this.getAppLink(e.appId),content:{block:"feed",elem:"item-icon",tag:"img",attrs:{src:this._getIcon(e)}}}),n.content.push({elem:"item-date",content:this._getFeedItemDate(e.date)},o,{elem:"item-info",content:[{block:"b-link",mix:[{block:"feed",elem:"item-title"}],url:this.getAppLink(e.appId),content:e.appName},{elem:"item-content",content:"comment"==i||"question"==i?BEM.blocks.util.escapeHTML(e.comment):e.comment}]}),n},getQuestionFeedItemBemJson:function(e,t){return this.getCommentFeedItemBemJson(e,t)},getFirstSyncFeedItemBemJson:function(e,t){var i=e.apps&&e.apps.length?" with "+e.apps.length+" apps":"";return e.comment="Added a new "+(e.platform&&2==e.platform?"Android":"Apple")+" device"+i,this.getCommentFeedItemBemJson(e,t)},getInstallAppsFeedItemBemJson:function(e,t){e.comment=["Installed "];for(var i,n=this,o=e.apps||[],r=5,a=function(e,t){t.push({block:"b-link",mix:[{block:"feed",elem:"item-title"}],url:n.getAppLink(e.id),content:e.title})},s=Math.min(o.length,r),t=0;s>t;t++)i=o[t],t>0&&e.comment.push(", "),a(i,e.comment);if(1===o.length-s)i=o[s],e.comment.push(", "),a(i,e.comment);else if(s<o.length){for(var l=[],t=s;t<o.length;t++)i=o[t],l.push(", "),a(i,l);e.comment.push({block:"more",js:!0,tag:"span",content:[{elem:"and",content:[" and ",{block:"b-link",mods:{pseudo:"yes"},content:o.length-s+" more apps"}],tag:"span",mix:[{block:"b-link",modName:"pseudo",modVal:"yes"}]},{elem:"hidden",tag:"span",mods:{visibility:"hidden"},content:BEM.HTML.build(l)}]})}return this.getCommentFeedItemBemJson(e,t)},getEmptyUserFeedBemJson:function(){return{block:"feed",elem:"no-feed"}},getEmptyPublicFeedBemJson:function(e){var t=BEM.blocks.util.escapeHTML;return{block:"feed",elem:"no-feed",content:[{content:t(e.username)+" has no public activity yet."},{content:"Follow "+t(e.username)+" to get notified."}]}},_getCommonItemBemJson:function(e,t){return{block:"feed",elem:"item",mods:{type:e.type,pos:t%2?"even":"odd"},mix:[{block:"clearfix"}],content:[]}},_getFeedItemDate:function(e){var t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return e=new Date(e),e.getDate()+" "+t[e.getMonth()]+" "+e.getFullYear()},getAppLink:function(e){return"http://"+BEM.blocks["i-global"].param("airomo-host")+"/apps/"+e}}),BEM.DOM.decl({block:"b-form-button",modName:"theme"},{onSetMod:{js:function(){this.__base(),this.hasMod("theme","following")&&this.onFollowing(),this.hasMod("theme","follow")&&this.onFollow(),this.hasMod("theme","block")&&this.onBlock(),this.hasMod("theme","unblock")&&this.onUnblock(),(this.hasMod("theme","block")||this.hasMod("theme","unblock"))&&(this.on("block",this.onTriggerBlock),this.on("unblock",this.onTriggerUnblock))},theme:{follow:function(){this.onFollow()},following:function(){this.onFollowing()},block:function(){this.onBlock()},unblock:function(){this.onUnblock()}},hovered:{yes:function(){this.hasMod("theme","following")&&this.elem("text").text("Unfollow"),this.hasMod("theme","block")&&this.elem("text").text("Unblock"),this.hasMod("theme","unblock")&&this.elem("text").text("Block")},"":function(){this.hasMod("theme","following")&&this.elem("text").text("Following"),this.hasMod("theme","block")&&this.elem("text").text("Block"),this.hasMod("theme","unblock")&&this.elem("text").text("Unblock")}}},onFollow:function(){var e=this;this.unbindFrom("click.following"),this.bindTo("click.following",function(){airomo.users.follow(this.params.userId,function(){e.setMod("theme","following"),e.elem("text").text("Following")})})},onFollowing:function(){var e=this;this.unbindFrom("click.following"),this.bindTo("click.following",function(){this.params.userId,airomo.users.unfollow(this.params.userId,function(){e.setMod("theme","follow"),e.elem("text").text("Follow")})})},onBlock:function(){var e=this;this.unbindFrom("click.block"),this.bindTo("click.block",function(){var t=e.params.userId;airomo.users.blockUser(t,function(){e.setMod("theme","unblock"),e.elem("text").text("Unblock"),e.trigger("unblock",{userId:t})})})},onUnblock:function(){var e=this;this.unbindFrom("click.unblock"),this.bindTo("click.unblock",function(){var t=e.params.userId;airomo.users.unBlockUser(t,function(){e.setMod("theme","block"),e.elem("text").text("Block"),e.trigger("block",{userId:t})})})},onTriggerBlock:function(e,t){var i=this.params.userId;i==t.userId&&this.hasMod("theme","unblock")&&(this.setMod("theme","block"),this.elem("text").text("Block"))},onTriggerUnblock:function(e,t){var i=this.params.userId;
i==t.userId&&this.hasMod("theme","block")&&(this.setMod("theme","unblock"),this.elem("text").text("Unblock"))}}),BEM.DOM.decl("rating",{},{getNormalizedRating:function(e){return Math.floor(e)+""+(Math.round(10*(e%1))>=5?"5":"0")}}),BEM.DOM.decl("more",{onSetMod:{js:function(){var e=this,t=this.findBlockInside({block:"b-link",modName:"pseudo",modVal:"yes"});t.on("click",function(){e.delMod(e.elem("hidden"),"visibility"),e.setMod(e.elem("and"),"visibility","hidden")})}}}),BEM.DOM.decl({block:"feed",modName:"target",modVal:"app"},{_getIcon:function(e){return e.userIcon}}),BEM.DOM.decl({block:"feed",modName:"target",modVal:"app"},{onSetMod:{js:{inited:function(){var e=this;this.bindTo(this.elem("button"),"click",function(){BEM.blocks["appcurl-api"].getAppFeed(e.params.appId,function(t){e.renderFeed(t)})})}}},renderFeed:function(e){var t=this._getFeedBemJson(e);BEM.DOM.update(this.findBlockInside("b-dropdowna").getPopup().findBlockInside("b-menu").domElem,BEM.HTML.build(t))}}),BEM.DOM.decl("paginator",{onSetMod:{js:function(){var e=BEM.blocks["i-location"].get();BEM.blocks["b-link"].on(this.domElem,"click",function(t){var i=t.block;e.change({params:{p:i.params.page}})})}}},{getPaginatorHtml:function(e,t,i,n){var o={block:"paginator",elem:"inner",content:[]},r=10,n=n||1,a=parseInt(t/i),s={block:"paginator",elem:"more",tag:"span",content:"…"};t%i&&a++,a>30&&(a=30),n>1&&o.content.push({block:"b-link",js:{page:n-1},mods:{pseudo:"yes"},mix:[{block:"paginator",elem:"btn",mods:{type:"back"}}],url:"?q="+e+"&p="+(n-1),content:BEM.I18N("paginator","previous")}),n>6&&a>r&&o.content.push(s);for(var l=n>5?n-5:1;a>=l&&n-5+r>=l;l++)o.content.push({block:"b-link",js:{page:l},mods:{pseudo:"yes"},mix:[{block:"paginator",elem:"page",mods:{state:l==n?"current":void 0}}],url:"?q="+e+(l>1?"&p="+l:""),content:l});return a>n&&a>r&&o.content.push(s),a>n&&o.content.push({block:"b-link",js:{page:n+1},mods:{pseudo:"yes"},mix:[{block:"paginator",elem:"btn",mods:{type:"next"}}],url:"?q="+e+"&p="+(n+1),content:BEM.I18N("paginator","next")}),BEM.HTML.build(o)}}),BEM.DOM.decl({name:"b-link",modName:"pseudo",modVal:"yes"},{_onClick:function(e){e.preventDefault(),this.hasMod("disabled","yes")||this.afterCurrentEvent(function(){this.trigger("click")})}},{live:function(){this.__base.apply(this,arguments),this.liveBindTo({modName:"pseudo",modVal:"yes"},"leftclick",function(e){this._onClick(e)})}}),BEM.HTML.decl({name:"b-link",modName:"pseudo",modVal:"yes"},{onBlock:function(e){e.tag(e.param("url")?"a":"span"),e.wrapContent({elem:"inner"})},onElem:{inner:function(e){e.tag("span")}}}),function(e){BEM.DOM.decl("b-dropdowna",{onSetMod:{js:function(){this._getSwitcher().on("click",this._toggle,this)},disabled:function(e,t){this._getSwitcher().setMod(e,t),"yes"==t&&this.getPopup().hide()}},_getSwitcher:function(){return this._switcher||(this._switcher=this.findBlockInside("b-"+(this.getMod(this.elem("switcher"),"type")||"link")))},_toggle:function(){this.getPopup().toggle(this.elem("switcher"))},getPopup:function(){return this._popup||(this._popup=this.findBlockInside("b-popupa")).on("outside-click",function(t,i){this._getSwitcher().containsDomElem(e(i.domEvent.target))&&t.preventDefault()},this)},destruct:function(){var e=this._popup;e&&e.destruct.apply(e,arguments),this.__base.apply(this,arguments)}},{live:function(){this.liveInitOnEvent("switcher","leftclick",function(){})}})}(jQuery),BEM.HTML.decl("b-dropdowna",{onBlock:function(e){e.js(!0)}}),function(e){var t=["down-right","down","down-left","up","up-right","up-left","right-down","right","right-up","left-down","left","left-up"];BEM.DOM.decl("b-popupa",{onSetMod:{js:function(){this._owner=null,this._isShowed=!1,this._direction=this.getMod("direction")||"down",this._lastDirection=null,this._hasTail=!!this.elem("tail").length,this._hasTail||Object.keys(this.params).forEach(function(e){0===e.indexOf("tail")&&(this.params[e]=0)},this)}},show:function(e){return this._isShowed&&this._owner===e||(this._owner=e,this._getUnder().show({left:-1e4,top:-1e4}),this.pos(),this._getUnder().setMod("animate","yes")),this},hide:function(){return this._isShowed&&this._getUnder().hide(),this},toggle:function(e){return this.isShowed()?this.hide():this.show(e)},_pos:function(){var e=this._calcParams(this._owner);return this._hasTail&&this.elem("tail").css(e.tailOffsets),this.setMod("direction",e.direction)._getUnder().show(e.offsets),this},pos:function(){return this._isShowed?this._pos():this},isShowed:function(){return this._isShowed},setDirection:function(e){this._direction!=e&&(this._direction=e,this.isShowed()&&this.pos())},setContent:function(e,t,i){return BEM.DOM.update(this.elem("content"),e,t,i),this.isShowed()?this.pos():this},_isOwnerNode:function(){return!(!this._owner||!this._owner.jquery)},_calcDimensions:function(){var e=this._getUnder().domElem,t=this._getUnder()._getUnder(),i=this.__self.win,n=this._owner,o=this._isOwnerNode(),r=o?n.offset():n,a=o?n.outerWidth():0,s=o?n.outerHeight():0,l=i.scrollLeft(),c=i.scrollTop(),u=this.__self.getWindowSize(),d=parseInt(this.elem("content").css("border-top-width"),10);return{ownerWidth:a,ownerHeight:s,ownerLeft:r.left,ownerTop:r.top,ownerRight:r.left+a,ownerBottom:r.top+s,ownerHorizMiddle:r.left+a/2,ownerVertMiddle:r.top+s/2,posWidth:e.outerWidth(),posHeight:e.outerHeight(),underWidth:t.outerWidth(),underHeight:t.outerHeight(),borderWidth:isNaN(d)?0:d,windowLeft:l,windowRight:l+u.width,windowTop:c,windowBottom:c+u.height}},_calcParams:function(){var t=this._calcDimensions();if(this.hasMod("adjustable","no"))return this.calcDirectionParams(this._direction,t);var i={},n=this.params.directions,o=e.inArray(this._direction,n);o>-1||(o=0);var r,a,s=o;do{if(r=n[o],a=i[r]=this.calcDirectionParams(r,t),!a.factor)return this._lastDirection=r,a;++o==n.length&&(o=0)}while(o!==s);return i[this._lastDirection||n[0]]},calcDirectionParams:function(e,t){var i,n=this.params,o={top:0,left:0},r={marginLeft:0,marginTop:0},a=e.split("-")[0],s=this._hasTail&&t.ownerWidth<n.tailWidthVertical?(n.tailWidthVertical-t.ownerWidth)/2:0,l=this._hasTail&&t.ownerHeight<n.tailHeightHorizontal?(n.tailHeightHorizontal-t.ownerHeight)/2:0;switch(e){case"up":case"down":o.left=t.ownerHorizMiddle-t.posWidth/2,o.top="down"==e?t.ownerBottom+n.tailHeightVertical:t.ownerTop-t.posHeight-n.tailHeightVertical,r.marginLeft=t.posWidth/2-n.tailWidthVertical/2,r.marginTop="down"==e?0-n.tailHeightVertical:0;break;case"up-left":case"up-right":case"down-left":case"down-right":o.left="down-right"==e||"up-right"==e?t.ownerLeft-s:t.ownerRight-t.posWidth+s,o.top="down"==a?t.ownerBottom+n.tailHeightVertical:t.ownerTop-t.posHeight-n.tailHeightVertical,r.marginLeft=t.ownerWidth>t.posWidth?t.posWidth/2-n.tailWidthVertical/2:t.ownerHorizMiddle-o.left-n.tailWidthVertical/2,r.marginTop="down"==a?t.borderWidth-n.tailHeightVertical:0-t.borderWidth;break;case"left-down":case"right-down":o.left="left-down"==e?t.ownerLeft-t.posWidth-n.tailWidthHorizontal:t.ownerRight+n.tailWidthHorizontal,o.top=t.ownerTop-l,r.marginLeft="left-down"==e?0-t.borderWidth:t.borderWidth-n.tailWidthHorizontal,r.marginTop=t.ownerHeight<t.posHeight?t.ownerVertMiddle-o.top-n.tailHeightHorizontal/2:t.posHeight/2-n.tailHeightHorizontal/2;break;case"left":case"right":o.left="left"==e?t.ownerLeft-t.posWidth-n.tailWidthHorizontal:t.ownerRight+n.tailWidthHorizontal,o.top=t.ownerVertMiddle-t.posHeight/2,r.marginLeft="left"==e?0-t.borderWidth:t.borderWidth-n.tailWidthHorizontal,r.marginTop=t.posHeight/2-n.tailHeightHorizontal/2;break;case"left-up":case"right-up":o.left="left-up"==e?t.ownerLeft-t.posWidth-n.tailWidthHorizontal:t.ownerRight+n.tailWidthHorizontal,o.top=t.ownerBottom-t.posHeight+l,r.marginLeft="left"==a?0-t.borderWidth:t.borderWidth-n.tailWidthHorizontal,r.marginTop=t.ownerHeight>t.posHeight?t.posHeight/2-n.tailHeightHorizontal/2:t.ownerVertMiddle-o.top-n.tailHeightHorizontal/2}return i=this.calcInWindowFactor(o,t),{direction:a,factor:i,offsets:o,tailOffsets:r}},calcInWindowFactor:function(e,t){var i=0;return t.windowTop>e.top&&(i+=t.windowTop-e.top),e.top+t.underHeight>t.windowBottom&&(i+=e.top+t.underHeight-t.windowBottom),t.windowLeft>e.left&&(i+=t.windowLeft-e.left),e.left+t.underWidth>t.windowRight&&(i+=e.left+t.underWidth-t.windowRight),i},getDefaultParams:function(){return{tailOffset:19,tailWidthHorizontal:9,tailWidthVertical:19,tailHeightHorizontal:19,tailHeightVertical:10,shadowSize:7,directions:t}},destruct:function(){var e=this._under;e?this._destructing||(this._destructing=!0,this.hide(),BEM.DOM.destruct(!1,e.domElem),this.__base(!0)):this.__base.apply(this,arguments)},_getUnder:function(){if(!this._under){var t=e(BEM.HTML.build({block:"i-popup",zIndex:this.params.zIndex,mods:{autoclosable:this.getMod("autoclosable")||"yes",fixed:this.hasMod("direction","fixed")&&"yes"},underMods:this.params.underMods,underMix:[{block:"b-popupa",elem:"under"}]}));(this._under=this.findBlockOn(t,"i-popup")).on({show:this._onUnderShowed,hide:this._onUnderHidden,"outside-click":this._onUnderOutsideClicked},this).elem("content").append(this.domElem)}return this._under},_onUnderShowed:function(){this._isShowed=!0,this.bindToWin("resize",this.pos)._isOwnerNode()&&this.bindToDomElem(this._owner.parents().add(this.__self.win),"scroll",this.pos),this.trigger("show")},_onUnderHidden:function(){this._isShowed=!1,this.unbindFromWin("resize")._isOwnerNode()&&this.unbindFromDomElem(this._owner.parents().add(this.__self.win),"scroll"),this.trigger("hide")},_onUnderOutsideClicked:function(){this.trigger.apply(this,arguments)}},{live:function(){this.liveBindTo("close","leftclick",function(){this.hide()})}}),BEM.HTML.decl("b-popupa",{onBlock:function(t){var i=!1;e.each(t.param("content"),function(e,t){return!(i="close"==t.elem)}),t.mods({theme:"ffffff",direction:"down","has-close":i&&"yes"}).js(!0).afterContent({elem:"shadow"})},onElem:{content:function(e){e.wrap({elem:"wrap-cell",tag:"td"}).wrap({tag:"tr"}).wrap({elem:"wrap",tag:"table"})},close:function(e){e.tag("i")},shadow:function(e){e.tag("i")},tail:function(e){e.tag("i").wrapContent({elem:"tail-i",tag:"i"})}}})}(jQuery),BEM.DOM.decl("b-popupa",{calcDirectionParams:function(e,t){var i,n=this.params.sideSpacing,o=this.params,r={top:0,left:0},a={marginLeft:0,marginTop:0},s=e.split("-")[0],l=this._hasTail&&t.ownerWidth<o.tailWidthVertical?(o.tailWidthVertical-t.ownerWidth)/2:0,c=this._hasTail&&t.ownerHeight<o.tailHeightHorizontal?(o.tailHeightHorizontal-t.ownerHeight)/2:0;switch(e){case"up":case"down":r.left=t.ownerHorizMiddle-t.posWidth/2,r.top="down"==e?t.ownerBottom+o.tailHeightVertical:t.ownerTop-t.posHeight-o.tailHeightVertical,a.marginLeft=t.posWidth/2-o.tailWidthVertical/2,a.marginTop="down"==e?0-o.tailHeightVertical:0;break;case"up-left":case"up-right":case"down-left":case"down-right":r.left="down-right"==e||"up-right"==e?t.ownerLeft-l:t.ownerRight-t.posWidth+l,n&&r.left<n&&(r.left=n),n&&t.windowRight-r.left-t.posWidth<n&&(r.left=t.windowRight-t.posWidth-n),r.top="down"==s?t.ownerBottom+o.tailHeightVertical:t.ownerTop-t.posHeight-o.tailHeightVertical,a.marginLeft=t.ownerWidth>t.posWidth?t.posWidth/2-o.tailWidthVertical/2:t.ownerHorizMiddle-r.left-o.tailWidthVertical/2,a.marginTop="down"==s?t.borderWidth-o.tailHeightVertical:0-t.borderWidth;break;case"left-down":case"right-down":r.left="left-down"==e?t.ownerLeft-t.posWidth-o.tailWidthHorizontal:t.ownerRight+o.tailWidthHorizontal,r.top=t.ownerTop-c,a.marginLeft="left-down"==e?0-t.borderWidth:t.borderWidth-o.tailWidthHorizontal,a.marginTop=t.ownerHeight<t.posHeight?t.ownerVertMiddle-r.top-o.tailHeightHorizontal/2:t.posHeight/2-o.tailHeightHorizontal/2;break;case"left":case"right":r.left="left"==e?t.ownerLeft-t.posWidth-o.tailWidthHorizontal:t.ownerRight+o.tailWidthHorizontal,r.top=t.ownerVertMiddle-t.posHeight/2,a.marginLeft="left"==e?0-t.borderWidth:t.borderWidth-o.tailWidthHorizontal,a.marginTop=t.posHeight/2-o.tailHeightHorizontal/2;break;case"left-up":case"right-up":r.left="left-up"==e?t.ownerLeft-t.posWidth-o.tailWidthHorizontal:t.ownerRight+o.tailWidthHorizontal,r.top=t.ownerBottom-t.posHeight+c,a.marginLeft="left"==s?0-t.borderWidth:t.borderWidth-o.tailWidthHorizontal,a.marginTop=t.ownerHeight>t.posHeight?t.posHeight/2-o.tailHeightHorizontal/2:t.ownerVertMiddle-r.top-o.tailHeightHorizontal/2}return i=this.calcInWindowFactor(r,t),{direction:s,factor:i,offsets:r,tailOffsets:a}}}),BEM.DOM.decl("serp-filter",{onSetMod:{js:function(){var e=this,t=BEM.blocks["i-location"].get();this._uniq=0,BEM.blocks["appcurl-api"].on("search",function(t,i){return i=i.data,i&&i.total?(e.renderStoresFilter(i.platformFacet,i.total).renderCostFilter(i.priceFacet,i.total).renderGamesCategoriesFilter(i.categoryFacet,i.total).renderCategoriesFilter(i.categoryFacet,i.total).renderRatingFilter(i.ratingFacet,i.total).setMod("visibility","visible"),void 0):(e.delMod("visibility"),void 0)}),BEM.blocks.radio.on(this.domElem,"change",function(e,i){var n={p:t.getState().params.p&&1};n[i.name]="all"==i.value?"":i.value,t.change({params:n})}),BEM.blocks["b-form-checkbox"].on(this.domElem,"change",function(e){var i=e.block,n=i.isChecked(),o=i.params,r=o.name,a=o.value,s="",l=t.getState().params,c=l[r],u=c?c.split(","):[],d=u.indexOf(a.toString()),h={p:t.getState().params.p&&1};n&&d>-1||!n&&-1==d||(!n&&d>-1?(u.splice(d,1),s=u.join(",")):(u.push(a),s=u.join(",")),h[r]=s,t.change({params:h}))})}},renderStoresFilter:function(e,t){if(!e)return this;var i=this,n=BEM.blocks["i-location"].get().getState().params,o=(n.platform,n.stores),r=[],a=o&&(~o.indexOf("2")||~o.indexOf("3")||~o.indexOf("4"));return r.push(this.buildRadioBemJson("stores","all",BEM.I18N("serp-filter","all"),t,o?void 0:"checked")),r.push(this.buildRadioBemJson("stores",1,"iTunes",e[1],1==o?"checked":void 0)),r.push(this.buildRadioBemJson("stores","2,3,4","Android",e[2],a?"checked":void 0)),a&&e[2]>1&&["Google Play","Amazon App Store","Nook"].forEach(function(e,t){storeId=t+2,r.push(i.buildCheckboxBemJson("stores",storeId,e,"",o==storeId?"checked":void 0))}),BEM.DOM.update(i.elem("filter","type","stores"),BEM.HTML.build(r)),this},renderCostFilter:function(e,t){if(!e)return this;var i=this,n=BEM.blocks["i-location"].get().getState().params.price,o=[];o.push(this.buildRadioBemJson("price","all",BEM.I18N("serp-filter","all"),t,n?void 0:"checked"));for(var r in e){var a=BEM.I18N("serp-filter",r)||r;o.push(this.buildRadioBemJson("price",r,a,e[r],n==r?"checked":void 0))}return BEM.DOM.update(i.elem("filter","type","price"),BEM.HTML.build(o)),this},renderCategoriesFilter:function(e,t){if(!e)return BEM.DOM.update(this.elem("filter","type","categories"),BEM.HTML.build(this.buildRadioBemJson("categories","all","All",t,n?void 0:"checked"))),this;var i=this,n=BEM.blocks["i-location"].get().getState().params.categories,o=[];return n&&(n=n.split(",").filter(function(e){return 30>e}).join(",")),BEM.blocks["appcurl-api"].getCategories(function(r){o.push(i.buildRadioBemJson("categories","all",BEM.I18N("serp-filter","all"),t,n?void 0:"checked")),e.forEach(function(e){var t=BEM.I18N("serp-filter",r[e.id])||r[e.id];e.id<30&&6!=e.id&&o.push(i.buildCheckboxBemJson("categories",e.id,t,e.c))}),BEM.DOM.update(i.elem("filter","type","categories"),BEM.HTML.build(o))}),this},renderGamesCategoriesFilter:function(e,t){if(!e)return BEM.DOM.update(this.elem("filter","type","categories"),BEM.HTML.build(this.buildRadioBemJson("categories","all","All",t,n?void 0:"checked"))),this;var i=this,n=BEM.blocks["i-location"].get().getState().params.categories,o=[];n&&(n=n.split(",").filter(function(e){return e>30}).join(","));var r=e.filter(function(e){return 6==e.id}),a=r[0]?r[0].c:0;return BEM.blocks["appcurl-api"].getCategories(function(t){o.push(i.buildRadioBemJson("categories","6",BEM.I18N("serp-filter","all"),a,n&&6!=n?void 0:"checked")),e.forEach(function(e){var n=BEM.I18N("serp-filter",t[e.id])||t[e.id];e.id>30&&o.push(i.buildCheckboxBemJson("categories",e.id,n,e.c))}),BEM.DOM.update(i.elem("filter","type","games-categories"),BEM.HTML.build(o))}),this},renderRatingFilter:function(e,t){if(!e)return this;var i=BEM.blocks["i-location"].get().getState().params.rating,n=[];n.push(this.buildRadioBemJson("rating","all",BEM.I18N("serp-filter","all"),t,i?void 0:"checked"));var o=[],r=this;for(var a in e)o[a]=e[a];return o.forEach(function(e,t){n.push(r.buildRatingCheckboxBemJson(t,e))}),BEM.DOM.update(this.elem("filter","type","rating"),BEM.HTML.build(n)),this},buildRadioBemJson:function(e,t,i,n,o){return this._uniq++,{block:"radio",js:!0,content:[{elem:"input",tag:"input",attrs:{type:"radio",name:e,value:t,checked:o,id:"serpFilterRadio"+this._uniq}},{elem:"label",tag:"label",attrs:{"for":"serpFilterRadio"+this._uniq},content:[i,{elem:"total",tag:"span",content:n}]}]}},buildCheckboxBemJson:function(e,t,i,n){var o=BEM.blocks["i-location"].get().getState().params[e],r=o?o.split(","):[];return{block:"b-form-checkbox",js:{name:e,value:t},mods:{theme:"grey-m",size:"m",checked:r.indexOf(t.toString())>-1?"yes":void 0},checkboxAttrs:{id:e+"-"+t},content:{elem:"label",content:[{elem:"total",tag:"span",content:n},i]}}},buildRatingCheckboxBemJson:function(e,t){return this.buildCheckboxBemJson("rating",e,{block:"rating",mods:{type:"readonly",rating:10*e},attrs:{title:e}},t)}}),BEM.DOM.decl("b-form-checkbox",{onSetMod:{js:function(){var e=this,t=e.elem("checkbox");try{var i=e.__self.doc[0].activeElement}catch(n){}e.setMod("checked",t.attr("checked")?"yes":""),i===t[0]&&e.setMod("focused","yes")},focused:{yes:function(){return this.isDisabled()?!1:(this.elem("checkbox").focus(),void 0)},"":function(){this.elem("checkbox").blur()}},checked:function(e,t){this.elem("checkbox").attr("checked","yes"==t),this.elem("tick").attr("alt","yes"==t?" v":""),this.afterCurrentEvent(function(){this.trigger("change")})},disabled:function(e,t){this.elem("checkbox").attr("disabled","yes"==t)}},isDisabled:function(){return this.hasMod("disabled","yes")},isChecked:function(){return this.hasMod("checked","yes")},toggle:function(){this.toggleMod("checked","yes","")},val:function(e){var t=this.elem("checkbox");return void 0==e?t.val():t.val(e)},_onClick:function(e){e.button||this.isDisabled()||this.setMod("focused","yes")},_onChange:function(e){e.target.checked?this.setMod("checked","yes"):this.delMod("checked")}},{live:function(){return this.liveBindTo("checkbox","click",function(e){this._onClick(e)}).liveBindTo("checkbox","change",function(e){this._onChange(e)}).liveBindTo("checkbox","focusin focusout",function(e){this.setMod("focused","focusin"==e.type?"yes":"")}),!1}}),BEM.HTML.decl("b-form-checkbox",{onBlock:function(e){var t=e.param("checkboxAttrs")||{};e.js(!0).mix(e.mod("size")?"":[{block:"b-form-checkbox",mods:{size:"m"}}]).tag("span").tParam("checkboxAttrs",$.extend(t||{},{id:e.param("id")||t.id||$.identify(),checked:e.mod("checked")?"checked":void 0,disabled:e.mod("disabled")?"disabled":void 0})).beforeContent({elem:"inner",content:[{elem:"checkbox",attrs:e.tParam("checkboxAttrs")},{elem:"bg"}]})},onElem:{label:function(e){e.tag("label").attr("for",e.tParam("checkboxAttrs").id)},checkbox:function(e){e.tag("input").attrs($.extend(e.attrs(),{type:"checkbox"}))},bg:function(e){e.tag("i").content({elem:"tick"})},tick:function(e){e.tag("i")},inner:function(e){e.tag("span")}}}),BEM.DOM.decl("radio",{onSetMod:{js:function(){this.isChecked()?this.setMod("checked","yes"):this.delMod("checked"),this.bindTo(this.elem("input"),"change",function(e){var t=e.data.domElem,i=this.isChecked();i?this.setMod("checked","yes"):this.delMod("checked"),this.trigger("change",{name:t.attr("name"),value:t.val(),isChecked:this.isChecked()})})}},val:function(){return this.elem("input").val()},isChecked:function(){return!!this.elem("input").attr("checked")}}),BEM.DOM.decl("serp-hint",{onSetMod:{js:function(){var e=this;this._uniq=0,BEM.blocks["appcurl-api"].getCategories(function(t){e.categories=t}),BEM.blocks["appcurl-api"].on("search",function(t,i){e.delMod("visibility"),i=i.data,i.collation&&e.renderCollation(i.collation),i.collation||e.renderCategoryHint()||e.renderGeneric(i.total)});var t=BEM.blocks["i-location"].get();BEM.blocks["b-link"].on(this.domElem,"click",function(e){var i=e.block.params.query;t.change({url:"/?q="+i,title:i+" — Appcurl"})})}},renderCollation:function(e){BEM.DOM.init(this.elem("content").html(BEM.HTML.build([BEM.I18N("serp-hint","did you mean"),{block:"b-link",js:{query:encodeURIComponent(e)},url:"/?q="+encodeURIComponent(e),mods:{pseudo:"yes"},content:e},"?"]))),this.setMod("visibility","visible")},renderCategoryHint:function(){var e=BEM.blocks["i-location"].get(),t=e.getState().params.q.toLowerCase(),i="";for(var n in this.categories)if(this.categories[n].toLowerCase()==t){i=n;break}return i?(this.elem("content").html(BEM.HTML.build([BEM.I18N("serp-hint","your query marches one of the app categories"),{block:"b-link",url:"http://"+BEM.blocks["i-global"].param("appcurl-host")+"/explore/?categories="+i,content:BEM.blocks.util.capitalize(t)},"."])),this.setMod("visibility","visible"),!0):!1},renderGeneric:function(e){if(!(250>e)){var t=BEM.HTML.build([{content:BEM.I18N("serp-hint","your query seems too generic")},{content:BEM.I18N("serp-hint","narrow your search by adding more words to your query and/or by selecting result bins below")}]);BEM.DOM.update(this.elem("content"),t),this.setMod("visibility","visible")}}}),BEM.DOM.decl("serp-sort",{onSetMod:{js:function(){var e=this;this._uniq=0,BEM.blocks["appcurl-api"].on("search",function(t,i){e.delMod("visibility"),i=i.data,e.renderReorder(),i.total&&e.setMod("visibility","visible")});var t=BEM.blocks["i-location"].get();BEM.blocks.radio.on(this.domElem,"change",function(e,i){"order"==i.name&&t.change({params:{order:i.value,p:t.getState().params.p&&1}})})}},renderReorder:function(){BEM.DOM.update(this.elem("content"),this._getReorderHtml())},_getReorderHtml:function(){var e=BEM.blocks["i-location"].get().getState().params.order;return BEM.HTML.build([this._buildRadioBemJson("order","score desc",BEM.I18N("serp-sort","relevance"),!e||"score desc"==e&&"checked"),this._buildRadioBemJson("order","pi desc",BEM.I18N("serp-sort","popularity"),e&&"pi desc"==e&&"checked"),this._buildRadioBemJson("order","alpha asc",BEM.I18N("serp-sort","alphabetical"),e&&"alpha asc"==e&&"checked"),this._buildRadioBemJson("order","rating desc",BEM.I18N("serp-sort","rating"),e&&"rating desc"==e&&"checked")])},_buildRadioBemJson:function(e,t,i,n){return this._uniq++,{block:"radio",js:!0,content:[{elem:"input",tag:"input",attrs:{type:"radio",name:e,value:t,checked:n,id:e+this._uniq}},{elem:"label",tag:"label",attrs:{"for":e+this._uniq},content:i}]}}}),BEM.DOM.decl("explore-view",{onSetMod:{js:function(){var e=this;this.iLocation=BEM.blocks["i-location"].get(),BEM.blocks["appcurl-api"].on("search",function(t,i){i=i.data,i.total?e.update(i):e.delMod("visibility")})}},update:function(e){var t=this.iLocation.getState().params,i=(t.type||"apps",{});i.q=t.q,t.tag&&(i.tags=t.tag),t.categories&&(i.categories=t.categories),t.platform&&(i.platforms=t.platform),t.price&&(i.prices=t.price);var n,o="http://"+BEM.blocks["i-global"].param("appcurl-host")+"/explore"+($.isEmptyObject(i)?"/":"/?"+$.param(i)),r=[];e.categoryFacet.forEach(function(e){6==e.id&&(n=e.c)}),n&&r.push(this.getExploreViewItemBemJson("Games with "+this.getLinkHtml(o+"&type=games",t.q))),(e.categoryFacet.length>1||!n&&e.categoryFacet.length)&&r.push(this.getExploreViewItemBemJson("Apps with "+this.getLinkHtml(o,t.q))),this.elem("content").html(BEM.HTML.build(r)),this.setMod("visibility","visible")},getExploreViewItemBemJson:function(e){return{block:"explore-view",elem:"item",content:e}},getLinkHtml:function(e,t){return BEM.HTML.build({block:"b-link",url:e,content:BEM.blocks.util.escapeHTML(t)})}}),function(){BEM.DOM.decl("tags",{onSetMod:{js:function(){var e=this;BEM.blocks["appcurl-api"].on("search",function(t,i){var n=i.data.tagsFacet;return n&&n.length?(BEM.DOM.update(e.elem("content"),BEM.HTML.build(e.buildTagsBemJson(n))),e.setMod("visibility","visible"),void 0):(e.delMod("visibility"),void 0)})}},buildTagsBemJson:function(e){for(var t=[],i=15,n=BEM.blocks.tags._getTagsFromUrl(),o=0;o<e.length&&i>o;o++){var r=e[o];t.push({block:"tags",elem:"tag",js:{value:r},mods:{state:n.indexOf(r)>-1?"current":void 0},content:r})}return t}},{live:function(){var e=BEM.blocks["i-location"].get(),t=this;return this.liveBindTo("tag","leftclick",function(i){var n=i.data.domElem,o=this.elemParams(n).value;this.toggleMod(n,"state","current");var r=t._getTagsFromUrl();r.indexOf(o)<0?r.push(o):r.splice(r.indexOf(o),1),e.change({params:{tag:r.join(","),p:e.getState().params.p&&1}})}),!1},_getTagsFromUrl:function(){var e=BEM.blocks["i-location"].get(),t=e.getState().params,i=t.tag;return i?i.split(","):[]}})}(jQuery),BEM.DOM.decl("appcurl-footer",{onSetMod:{js:{inited:function(){var e=this,t=this.findBlockOutside("b-page");this.bindTo("expand-button","click",function(){var i=e.hasMod("visibility","visible");e.setMod("visibility",i?"hidden":"visible"),t.toggleMod("footer","expanded"),i||$("html, body").animate({scrollTop:e.elem("content").offset().top},0)})}}}}),function(e,t){function i(){p&&f&&console.log.apply(console,arguments)}function n(e){return"string"==typeof e&&(e={block:e}),e.block+(e.elem?c+e.elem:"")+(e.modName?l+e.modName+l+e.modVal:"")}function o(e){var t={};return e.split(c).forEach(function(e,i){var n=[i?"elem":"block","mod","val"];e.split(l).forEach(function(e,i){t[n[i]]=e})}),t}function r(e){return e?h.push(e):!1}function a(){return h.length&&h.pop()}function s(){this._lang="",this._prj="lego",this._keyset="",this._key=""}if("function"==typeof t.I18N&&t.I18N._proto)return t.I18N;"undefined"==typeof i18n&&(i18n={}),BEM=t;var l="_",c="__",u="ru",d={},h=[],p=!1,f="undefined"!=typeof console&&"function"==typeof console.log;s.prototype={lang:function(e){return this._lang=e,this},project:function(e){return this._prj=e,this},keyset:function(e,t){return t&&r(this._keyset),this._keyset=n(e),this},key:function(e){return this._key=e,this},decl:function(e){var t=o(this._keyset),i="i-tanker"===t.block?"tanker":this._prj,n=t.elem||this._keyset,r=this._key;i=i18n[i]||(i18n[i]={}),n=i[n]||(i[n]={}),n[r]="function"==typeof e?e:function(){return e};var a=d[this._lang]||(d[this._lang]={}),s=a[this._keyset]||(a[this._keyset]={});s[r]=e},val:function(e,t){var n=d[this._lang]&&d[this._lang][this._keyset],o="keyset: "+this._keyset+" key: "+this._key+" (lang: "+this._lang+")";if(!n)return i("[I18N_NO_KEYSET] %s",o),"";n=n[this._key];var r=typeof n;return"undefined"===r?(i("[I18N_NO_VALUE] %s",o),""):"string"===r?n:(t||(t=this),n.call(t,e))},_cache:function(){return d}},t.I18N=function(e){var t=function(e,i,n){return t.keyset(e).key(i,n)};return t._proto=e,t.project=function(e){return this._proto.project(e),this},t.keyset=function(e){return this._proto.keyset(e,!0),this},t.key=function(e,i){var n,o,r=this._proto;return r.lang(this._lang).key(e),n=r.val.call(r,i,t),o=a(),o&&r.keyset(o,!1),n},t.decl=function(e,t,i){var n,o=this._proto;i||(i={}),i.lang&&o.lang(i.lang),o.keyset(e);for(n in t)t.hasOwnProperty(n)&&o.key(n).decl(t[n]);return this},t.lang=function(e){return"undefined"!=typeof e&&(this._lang=e),this._lang},t.debug=function(e){p=!!e},t.lang(u),t}(new s)}(this,"undefined"==typeof BEM?{}:BEM),BEM.I18N.decl("appcurl-footer",{"more options":"More options","сopyright at airomo.com":"Copyright at airomo.com","about us":"ABOUT US","appcurl apps":"APPCURL APPS",links:"LINKS","social media":"SOCIAL MEDIA","about us content":function(){return"Appcurl is an app built over the airomo cloud. Airomo cloud is the mobile cloud platform from <a class='b-link' href='http://www.airomo.com/company/'>Airomo Inc.</a>, the mobile lifestyle management company."},"google play":"Google Play","amazon app store":"Amazon app store","nook app store":"Nook app store","apple app store":"Apple app store","facebook app store":"Facebook app store","submit apps":"Submit apps","appcurl blogs":"Appcurl blogs","how to guides":"How to guides","airomo privacy policy":"Airomo Privacy policy"},{lang:"pt"}),BEM.I18N.decl("appcurl-search",{"search mobile apps":"Procurar apps, jogos…",search:"Procurar"},{lang:"pt"}),BEM.I18N.decl("appcurl-static-links",{explore:"Explorar",apps:"apps",games:"jogos",users:"usuários"},{lang:"pt"}),BEM.I18N.decl("b-dropdowna",{more:"more",or:"or"},{lang:"pt"}),BEM.I18N.decl("b-page",{"page title":"Appcurl : Descubra as melhores apps para Android e iPhone com AppCurl – O Motor de Busca Social de Apps Móveis ",username:"você",login:"Login","my profile":"Meu Perfil",settings:"Definições","log out":"Sair"},{lang:"pt"}),BEM.I18N.decl("explore-view",{"explore view":"Explore View for "},{lang:"pt"}),BEM.I18N.decl("option",{en:"English",ru:"Русский",uk:"Українська",zh:"中文",pt:"Português",jp:"日本語",kr:"한국어",es:"Español"},{lang:"pt"}),BEM.I18N.decl("paginator",{next:"Próximo",previous:"Anterior"},{lang:"pt"}),BEM.I18N.decl("popup",{"why appcurl":"Porquê Appcurl?","what is appcurl text":"O motor de busca de apps Appcurl combina de forma perfeita os hábitos móveis sociais online do usuário para fornecer os resultados de busca mais acertados e relevantes. A busca de apps Appcurl usa análises de múltiplas fontes; web, mídia sociais e móveis; para classificar, filtrar e fornecer uma lista personalizada das melhores apps para android e iPhone. Appcurl não é apenas o motor de busca de apps que fornece resultados acertados e relevantes, é também uma plataforma social que lhe permite descobrir apps de outros usuários; amigos, família e peritos. Com Appcurl pode buscar apps por palavras-chave, pesquisar apps por categorias ou tags, e seguir outros usuários para descobrir apps de uma forma completamente diferente.","appcurl unibased text":" Appcurl é totalmente isento. Appcurl não promove ou vende quaisquer apps. Appcurl acredita que os verdadeiros peritos em aplicações móveis são os próprios usuários; Appcurl encoraja os usuários a se exprimirem em relação às suas apps e a influenciarem o mundo à sua volta.","example usage":function(){}},{lang:"pt"}),BEM.I18N.decl("progress",{searching:"Buscando..."},{lang:"pt"}),BEM.I18N.decl("serp",{app:"app",apps:"apps","found and":" encontradas e ","with":"com","in the title.":"no título.","your search":"Sua busca - ","did not match any apps":" – nenhuma app corresponde.",suggestions:"Sugestões:","make sure all words are spelled correctly":"Verifique se todas as palavras estão bem escritas.","try different or more general keywords":"Tente palavras-chave diferentes ou mais gerais.","try wild card search":"Tente buscas wild card (exemplo: math* encontrará apps que coincidem tanto com maths como com mathematics)","try keywords in phrase within quotes":"Tente palavras-chave em frases entre aspas (exemplo: 'Winnie the pooh' encontrará apps que coincidem com a frase completa e não apenas com Winnie ou Pooh.)",help:"Ajuda","still not sure what you are looking for":"Ainda sem certeza do que você busca? Tente o ",feed:"Feed"},{lang:"pt"}),BEM.I18N.decl("serp-filter",{all:"Tudo",cost:"Custo",platforms:"Plataformas",categories:"Categorias",rating:"Classificação","result filter":"Filtro de Resultados","Books & Reference":"Livros e Referência",Business:"Corporativo",Education:"Educação",Entertainment:"Entretenimento",Finance:"Finanças",Games:"Jogos","Health & Fitness":"Saúde e Cond. Físico",Lifestyle:"Estilo de Vida","Media & Video":"Mídia e Vídeos",Medical:"Medicina","Music & Audio":"Música & Áudio",Navigation:"Navegação","News & Magazines":"Notícias e Revistas",Photography:"Fotografia",Productivity:"Produtividade",Shopping:"Compras",Social:"Social",Sports:"Esportes","Travel & Local":"Turismo e Local",Utilities:"Utilidades",Weather:"Clima",Personalization:"Personalização",free:"Grátis",paid:"Paga"},{lang:"pt"}),BEM.I18N.decl("serp-hint",{"your query seems too generic":"Sua busca parece demasiado genérica.","your query marches one of the app categories":"Sua busca corresponde a uma das categorias de apps. Pode navegar diretamente nas apps em ","narrow your search by adding more words to your query and/or by selecting result bins below":"Limite sua busca adicionando mais palavras à sua consulta e/ou seleccionando os resultados abaixo.","did you mean":"Queria dizer ",hint:"Dica"},{lang:"pt"}),BEM.I18N.decl("serp-sort",{relevance:"Relevância",popularity:"Popularidade",alphabetical:"Alfabética",rating:"Classificação por estrelas","sort by":"Ordenar por"},{lang:"pt"}),BEM.I18N.decl("store-badges",{"it all starts here":"Tudo começa aqui.","ios app coming soon":"iOS app brevemente"},{lang:"pt"}),BEM.I18N.decl("tags",{"result bins":"Resultados"},{lang:"pt"}),BEM.I18N.lang("pt");
